"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8216],{23432:function(e,t,n){n.d(t,{Z:function(){return a}});let a=(0,n(31134).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},42083:function(e,t,n){var a=n(85893);t.Z=()=>(0,a.jsx)("span",{className:"flex justify-center items-center",children:(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3 text-greyscale-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]})})},44576:function(e,t,n){var a=n(85893);n(67294);var i=n(23432);t.Z=e=>{let{isLoading:t}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(i.Z,{className:"mx-auto h-8 w-8 animate-spin text-white"}),(0,a.jsx)("p",{className:"mt-2 text-sm font-medium text-white",children:"Loading"})]})}):null}},98216:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var a=n(85893),i=n(67294),s=n(92321),r=n(3601),u=n(27245),l=n(21774),c=n(11163),o=n(86501),d=n(75593),p=n(83540);let y=[{type:"fallback",stateMutability:"payable"},{type:"function",name:"allowance",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"approve",inputs:[{name:"guy",type:"address",internalType:"address"},{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"decimals",inputs:[],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{type:"function",name:"deposit",inputs:[],outputs:[],stateMutability:"payable"},{type:"function",name:"name",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"symbol",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"transfer",inputs:[{name:"dst",type:"address",internalType:"address"},{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFrom",inputs:[{name:"src",type:"address",internalType:"address"},{name:"dst",type:"address",internalType:"address"},{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"withdraw",inputs:[{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"Approval",inputs:[{name:"src",type:"address",indexed:!0,internalType:"address"},{name:"guy",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Deposit",inputs:[{name:"dst",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"src",type:"address",indexed:!0,internalType:"address"},{name:"dst",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Withdrawal",inputs:[{name:"src",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],m=()=>{let{writeContract:e,data:t,isPending:n,error:a}=(0,d.S)(),i=async t=>{try{await e({address:"0xc2F9D4CAd67124e86d7a5E7Bcd9DF26259B8c588",abi:y,functionName:"deposit",args:[],value:t})}catch(e){console.error("Deposit failed:",e)}},{isLoading:s,isSuccess:r}=(0,p.A)({hash:t});return{deposit:i,writeData:t,isPending:n,error:a,isConfirming:s,isConfirmed:r}};var f=n(91529),h=n(42083),w=n(44576),x=()=>{let[e,t]=(0,i.useState)(""),{address:n}=(0,s.m)(),d=(0,c.useRouter)(),{data:p,error:y,isLoading:x,refetch:v}=(0,r.K)({address:n}),{deposit:b,isPending:g,isConfirming:T,isConfirmed:j,error:N}=m(),C=async()=>{try{await b((0,f.vz)(e))}catch(e){console.error(e)}};return(0,i.useEffect)(()=>{j&&(o.Am.success("兑换成功"),setTimeout(()=>{d.back()},2e3))},[j]),(0,i.useEffect)(()=>{y&&o.Am.error(y.message)},[y]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"p-6 shadow-sm space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsxs)("h3",{className:"text-base font-medium",children:["兑换","ETH20"]}),(0,a.jsxs)("span",{className:"text-secondary text-sm ml-2",children:["(1",null==p?void 0:p.symbol," = 1","ETH20",")"]})]}),(0,a.jsx)("div",{className:"flex justify-between",children:(0,a.jsx)(l.I,{type:"number",placeholder:"填写 ".concat(null==p?void 0:p.symbol," 数量"),value:e,onChange:e=>t(e.target.value),className:"my-auto",disabled:g||T})}),(0,a.jsxs)("div",{className:"flex items-center text-sm mb-4",children:[(0,a.jsxs)("span",{className:"text-greyscale-400",children:[x?(0,a.jsx)(h.Z,{}):(0,f.LH)((null==p?void 0:p.value)||0n)," ",null==p?void 0:p.symbol]}),(0,a.jsx)(u.z,{variant:"link",size:"sm",onClick:()=>{t((0,f.bM)((null==p?void 0:p.value)||0n))},className:"text-secondary",disabled:x||g||T,children:"最高"})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(u.z,{className:"w-1/2 text-white py-2 rounded-lg",onClick:C,disabled:g||T||j,children:g||T?"兑换中...":j?"兑换成功":"兑换"})}),y&&(0,a.jsx)("div",{className:"text-red-500",children:y.message}),N&&(0,a.jsx)("div",{className:"text-red-500",children:N.message})]}),(0,a.jsx)(w.Z,{isLoading:g||T})]})}},91529:function(e,t,n){n.d(t,{LH:function(){return r},Vu:function(){return s},bM:function(){return l},vz:function(){return u}});var a=n(21803),i=n(15229);let s=e=>e?"".concat(e.substring(0,6),"...").concat(e.substring(e.length-4)):"",r=e=>{let t=l(e);return new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(Number(t))},u=e=>{let t=parseInt("18",10);return(0,a.v)(e,t)},l=e=>{let t=parseInt("18",10);return(0,i.b)(e,t)}},96128:function(e,t,n){n.d(t,{T:function(){return h}});var a=n(14503),i=n(8998),s=n(33840),r=n(26445),u=n(33639),l=n(87469),c=n(61163),o=n(74688),d=n(93714),p=n(47531),y=n(79524),m=n(76404),f=n(99238);async function h(e,t){let{account:n=e.account,chain:h=e.chain,accessList:w,blobs:x,data:v,gas:b,gasPrice:g,maxFeePerBlobGas:T,maxFeePerGas:j,maxPriorityFeePerGas:N,nonce:C,to:M,value:k,...F}=t;if(!n)throw new i.o({docsPath:"/docs/actions/wallet/sendTransaction"});let I=(0,a.T)(n);try{let n;if((0,p.F)(t),null!==h&&(n=await (0,d.s)(e,y.L,"getChainId")({}),(0,s.q)({currentChainId:n,chain:h})),"local"===I.type){let t=await (0,d.s)(e,m.Z,"prepareTransactionRequest")({account:I,accessList:w,blobs:x,chain:h,chainId:n,data:v,gas:b,gasPrice:g,maxFeePerBlobGas:T,maxFeePerGas:j,maxPriorityFeePerGas:N,nonce:C,parameters:[...m.Q,"sidecars"],to:M,value:k,...F}),a=h?.serializers?.transaction,i=await I.signTransaction(t,{serializer:a});return await (0,d.s)(e,f.p,"sendRawTransaction")({serializedTransaction:i})}let a=e.chain?.formatters?.transactionRequest?.format,i=(a||o.tG)({...(0,c.K)(F,{format:a}),accessList:w,blobs:x,chainId:n,data:v,from:I.address,gas:b,gasPrice:g,maxFeePerBlobGas:T,maxFeePerGas:j,maxPriorityFeePerGas:N,nonce:C,to:M,value:k});return await e.request({method:"eth_sendTransaction",params:[i]},{retryCount:0})}catch(e){throw function(e,{docsPath:t,...n}){let a=(()=>{let t=(0,l.k)(e,n);return t instanceof r.cj?e:t})();return new u.mk(a,{docsPath:t,...n})}(e,{...t,account:I,chain:t.chain||void 0})}}},61877:function(e,t,n){n.d(t,{n:function(){return r}});var a=n(55629),i=n(93714),s=n(96128);async function r(e,t){let{abi:n,address:r,args:u,dataSuffix:l,functionName:c,...o}=t,d=(0,a.R)({abi:n,args:u,functionName:c});return(0,i.s)(e,s.T,"sendTransaction")({data:`${d}${l?l.replace("0x",""):""}`,to:r,...o})}},33840:function(e,t,n){n.d(t,{q:function(){return i}});var a=n(80377);function i({chain:e,currentChainId:t}){if(!e)throw new a.Bk;if(t!==e.id)throw new a.Yl({chain:e,currentChainId:t})}},21803:function(e,t,n){n.d(t,{v:function(){return a}});function a(e,t){let[n,a="0"]=e.split("."),i=n.startsWith("-");if(i&&(n=n.slice(1)),a=a.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${a}`))&&(n=`${BigInt(n)+1n}`),a="";else if(a.length>t){let[e,i,s]=[a.slice(0,t-1),a.slice(t-1,t),a.slice(t)],r=Math.round(Number(`${i}.${s}`));(a=r>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${r}`).length>t&&(a=a.slice(1),n=`${BigInt(n)+1n}`),a=a.slice(0,t)}else a=a.padEnd(t,"0");return BigInt(`${i?"-":""}${n}${a}`)}},83540:function(e,t,n){n.d(t,{A:function(){return y}});var a=n(95946),i=n(51973),s=n(23147),r=n(36083),u=n(81946);async function l(e,t){let{chainId:n,timeout:l=0,...c}=t,o=e.getClient({chainId:n}),d=(0,u.s)(o,i.e,"waitForTransactionReceipt"),p=await d({...c,timeout:l});if("reverted"===p.status){let e=(0,u.s)(o,s.f,"getTransaction"),t=await e({hash:p.transactionHash}),n=(0,u.s)(o,r.R,"call"),i=await n({...t,data:t.input,gasPrice:"eip1559"!==t.type?t.gasPrice:void 0,maxFeePerGas:"eip1559"===t.type?t.maxFeePerGas:void 0,maxPriorityFeePerGas:"eip1559"===t.type?t.maxPriorityFeePerGas:void 0});throw Error(i?.data?(0,a.rR)(`0x${i.data.substring(138)}`):"unknown reason")}return{...p,chainId:o.chain.id}}var c=n(36100),o=n(82451),d=n(82002),p=n(37122);function y(e={}){let{hash:t,query:n={}}=e,a=(0,p.Z)(e),i=(0,d.x)({config:a}),s=function(e,t={}){return{async queryFn({queryKey:n}){let{hash:a,...i}=n[1];if(!a)throw Error("hash is required");return l(e,{...i,onReplaced:t.onReplaced,hash:a})},queryKey:function(e={}){let{onReplaced:t,...n}=e;return["waitForTransactionReceipt",(0,c.OP)(n)]}(t)}}(a,{...e,chainId:e.chainId??i}),r=!!(t&&(n.enabled??!0));return(0,o.aM)({...n,...s,enabled:r})}},75593:function(e,t,n){n.d(t,{S:function(){return p}});var a=n(98029),i=n(61877),s=n(81946),r=n(52425),u=n(75230),l=n(66432);async function c(e,t){let n;let{abi:a,chainId:i,connector:r,...c}=t;n=t.account?t.account:(await (0,u.e)(e,{chainId:i,connector:r})).account;let o=e.getClient({chainId:i}),d=(0,s.s)(o,l.a,"simulateContract"),{result:p,request:y}=await d({...c,abi:a,account:n});return{chainId:o.chain.id,result:p,request:{__mode:"prepared",...y,chainId:i}}}async function o(e,t){let n,a;let{account:l,chainId:o,connector:d,__mode:p,...y}=t;n="object"==typeof l&&l?.type==="local"?e.getClient({chainId:o}):await (0,u.e)(e,{account:l??void 0,chainId:o,connector:d});let{connector:m}=(0,r.D)(e);if("prepared"===p||m?.supportsSimulation)a=y;else{let{request:t}=await c(e,{...y,account:l,chainId:o});a=t}let f=(0,s.s)(n,i.n,"writeContract");return await f({...a,...l?{account:l}:{},chain:o?{id:o}:null})}var d=n(37122);function p(e={}){var t;let{mutation:n}=e,i=(t=(0,d.Z)(e),{mutationFn:e=>o(t,e),mutationKey:["writeContract"]}),{mutate:s,mutateAsync:r,...u}=(0,a.D)({...n,...i});return{...u,writeContract:s,writeContractAsync:r}}}}]);