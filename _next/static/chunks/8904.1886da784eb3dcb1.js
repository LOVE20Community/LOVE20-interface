"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8904],{44576:function(e,s,n){var t=n(85893);n(67294);var a=n(23432);s.Z=e=>{let{isLoading:s}=e;return s?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(a.Z,{className:"mx-auto h-8 w-8 animate-spin text-white"}),(0,t.jsx)("p",{className:"mt-2 text-sm font-medium text-white",children:"Loading"})]})}):null}},27082:function(e,s,n){n.r(s);var t=n(85893),a=n(67294),i=n(92321),l=n(27245),r=n(21774),c=n(41664),d=n.n(c),o=n(86501),m=n(91529),x=n(70019),u=n(19638),h=n(64777),f=n(42083),v=n(44576),j=n(78543);s.default=e=>{let{token:s,launchInfo:n}=e,[c,p]=(0,a.useState)(""),{address:g,chain:N}=(0,i.m)(),{balance:y,isPending:b,error:w}=(0,u.hS)(null==s?void 0:s.parentTokenAddress,g),{contributed:k,isPending:$,error:C}=(0,x.ap)(null==s?void 0:s.address,g),z=()=>!!(0,j.S)(N)&&(!(0n>=(0,m.vz)(c))||(o.Am.error("申购数量不能为0"),!1)),{approve:S,isWriting:A,isConfirming:E,isConfirmed:T,writeError:B}=(0,u.yA)(null==s?void 0:s.parentTokenAddress),I=async()=>{if(z())try{await S("0x5978945B0C36a5442FD4cc5483091c08202DF044",(0,m.vz)(c))}catch(e){console.error(e)}};(0,a.useEffect)(()=>{T&&o.Am.success("授权成功")},[T]);let{contribute:Z,isPending:L,isConfirming:_,isConfirmed:F,writeError:M}=(0,x.OY)(),P=async()=>{if(z())try{await Z(null==s?void 0:s.address,(0,m.vz)(c))}catch(e){console.error(e)}};(0,a.useEffect)(()=>{F&&(o.Am.success("申购成功"),setTimeout(()=>{window.location.reload()},2e3))},[F]);let D=A||E||T;return s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)(h.Z,{title:"参与申购"}),(0,t.jsx)("div",{className:"stats w-full",children:(0,t.jsxs)("div",{className:"stat place-items-center",children:[(0,t.jsx)("div",{className:"stat-title text-sm mr-6",children:"我已申购质押"}),(0,t.jsxs)("div",{className:"stat-value text-secondary",children:[(0,m.LH)(k||0n),(0,t.jsx)("span",{className:"text-greyscale-500 font-normal text-sm ml-2",children:s.parentTokenSymbol})]})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"flex justify-between",children:(0,t.jsx)(r.I,{type:"number",placeholder:"增加申购数量(".concat(s.parentTokenSymbol,")"),value:c,onChange:e=>p(e.target.value),className:"my-auto",disabled:D||0n>=(y||0n)})}),(0,t.jsxs)("div",{className:"flex items-center text-sm mb-4",children:[(0,t.jsxs)("span",{className:"text-greyscale-400",children:[(0,m.LH)(y||0n)," ",s.parentTokenSymbol]}),(0,t.jsx)(l.z,{variant:"link",size:"sm",onClick:()=>{p((0,m.bM)(y||0n))},disabled:D||0n>=(y||0n),className:"text-secondary",children:"最高"}),(0,t.jsx)(d(),{href:"/launch/deposit?symbol=".concat(s.symbol),children:(0,t.jsxs)(l.z,{variant:"link",size:"sm",className:"text-secondary",children:["获取",s.parentTokenSymbol]})})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,t.jsx)(l.z,{className:"w-1/2",onClick:I,disabled:D,children:D?"1.已授权":A||E?"授权中...":"1.授权"}),(0,t.jsx)(l.z,{className:"w-1/2 text-white py-2 rounded-lg",onClick:P,disabled:!T||L||_||F,children:L||_?"申购中...":F?"2.申购成功":"2.申购"})]})]}),B&&(0,t.jsx)("div",{className:"text-red-500",children:B.message}),M&&(0,t.jsx)("div",{className:"text-red-500",children:M.message})]}),(0,t.jsx)(v.Z,{isLoading:A||E||L||_})]}):(0,t.jsx)(f.Z,{})}},78543:function(e,s,n){n.d(s,{S:function(){return a}});var t=n(86501);let a=e=>!!e||(t.Am.error("请先将钱包链接 ".concat("sepolia")),!1)},21803:function(e,s,n){n.d(s,{v:function(){return t}});function t(e,s){let[n,t="0"]=e.split("."),a=n.startsWith("-");if(a&&(n=n.slice(1)),t=t.replace(/(0+)$/,""),0===s)1===Math.round(Number(`.${t}`))&&(n=`${BigInt(n)+1n}`),t="";else if(t.length>s){let[e,a,i]=[t.slice(0,s-1),t.slice(s-1,s),t.slice(s)],l=Math.round(Number(`${a}.${i}`));(t=l>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${l}`).length>s&&(t=t.slice(1),n=`${BigInt(n)+1n}`),t=t.slice(0,s)}else t=t.padEnd(s,"0");return BigInt(`${a?"-":""}${n}${t}`)}}}]);