"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1921],{76929:function(e,t,n){n.d(t,{l0:function(){return c},NI:function(){return b},pf:function(){return h},Wi:function(){return p},xJ:function(){return x},lX:function(){return T},zG:function(){return N}});var a=n(85893),s=n(67294),i=n(4222),r=n(87536),o=n(40108),d=n(99489);let l=(0,n(12003).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(d.f,{ref:t,className:(0,o.cn)(l(),n),...s})});u.displayName=d.f.displayName;let c=r.RV,m=s.createContext({}),p=e=>{let{...t}=e;return(0,a.jsx)(m.Provider,{value:{name:t.name},children:(0,a.jsx)(r.Qr,{...t})})},y=()=>{let e=s.useContext(m),t=s.useContext(f),{getFieldState:n,formState:a}=(0,r.Gc)(),i=n(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...i}},f=s.createContext({}),x=s.forwardRef((e,t)=>{let{className:n,...i}=e,r=s.useId();return(0,a.jsx)(f.Provider,{value:{id:r},children:(0,a.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",n),...i})})});x.displayName="FormItem";let T=s.forwardRef((e,t)=>{let{className:n,...s}=e,{error:i,formItemId:r}=y();return(0,a.jsx)(u,{ref:t,className:(0,o.cn)(i&&"text-destructive",n),htmlFor:r,...s})});T.displayName="FormLabel";let b=s.forwardRef((e,t)=>{let{...n}=e,{error:s,formItemId:r,formDescriptionId:o,formMessageId:d}=y();return(0,a.jsx)(i.g7,{ref:t,id:r,"aria-describedby":s?"".concat(o," ").concat(d):"".concat(o),"aria-invalid":!!s,...n})});b.displayName="FormControl";let h=s.forwardRef((e,t)=>{let{className:n,...s}=e,{formDescriptionId:i}=y();return(0,a.jsx)("p",{ref:t,id:i,className:(0,o.cn)("text-sm text-muted-foreground",n),...s})});h.displayName="FormDescription";let N=s.forwardRef((e,t)=>{let{className:n,children:s,...i}=e,{error:r,formMessageId:d}=y(),l=r?String(null==r?void 0:r.message):s;return l?(0,a.jsx)("p",{ref:t,id:d,className:(0,o.cn)("text-sm font-medium text-destructive",n),...i,children:l}):null});N.displayName="FormMessage"},23432:function(e,t,n){n.d(t,{Z:function(){return a}});let a=(0,n(31134).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},42083:function(e,t,n){var a=n(85893),s=n(23432);t.Z=()=>(0,a.jsx)(s.Z,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})},44576:function(e,t,n){var a=n(85893);n(67294);var s=n(23432);t.Z=e=>{let{isLoading:t,text:n="Loading"}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(s.Z,{className:"mx-auto h-8 w-8 animate-spin text-white"}),(0,a.jsx)("p",{className:"mt-2 text-sm font-medium text-white",children:n})]})}):null}},79718:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var a=n(85893),s=n(67294),i=n(11163),r=n(1604),o=n(56312),d=n(87536),l=n(92321),u=n(53438),c=n(27245),m=n(21774),p=n(76929),y=n(86501),f=n(48105),x=n(91529),T=n(71366),b=n(83540);let h=[{type:"fallback",stateMutability:"payable"},{type:"function",name:"allowance",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"approve",inputs:[{name:"guy",type:"address",internalType:"address"},{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"decimals",inputs:[],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{type:"function",name:"deposit",inputs:[],outputs:[],stateMutability:"payable"},{type:"function",name:"name",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"symbol",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"transfer",inputs:[{name:"dst",type:"address",internalType:"address"},{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFrom",inputs:[{name:"src",type:"address",internalType:"address"},{name:"dst",type:"address",internalType:"address"},{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"withdraw",inputs:[{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"Approval",inputs:[{name:"src",type:"address",indexed:!0,internalType:"address"},{name:"guy",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Deposit",inputs:[{name:"dst",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"src",type:"address",indexed:!0,internalType:"address"},{name:"dst",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Withdrawal",inputs:[{name:"src",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],N=()=>{let{writeContract:e,data:t,isPending:n,error:a}=(0,T.S)(),s=async t=>{try{await e({address:"0xf08A227e35fbb66f3f7d6F2a1e70f64b88bE3C3B",abi:h,functionName:"deposit",args:[],value:t})}catch(e){console.error("Deposit failed:",e)}},{isLoading:i,isSuccess:r}=(0,b.A)({hash:t});return{deposit:s,writeData:t,isPending:n,error:a,isConfirming:i,isConfirmed:r}};var v=n(19638),g=n(67068),A=n(95049),I=n(93778),w=n(42083),j=n(44576),E=n(64777);let k=e=>r.z.object({depositAmount:r.z.string().nonempty("请输入兑换数量").refine(t=>{try{let n=(0,x.vz)(t);return n>0n&&n<=e}catch(e){return!1}},{message:"兑换数量必须大于0且不超过您的余额"})});var S=()=>{let e=(0,i.useRouter)(),{address:t,chain:n}=(0,l.m)(),{token:r}=(0,s.useContext)(I.M)||{},{data:T,error:b,isLoading:h}=(0,u.K)({address:t}),{balance:S,isPending:R,error:F}=(0,v.hS)("0xf08A227e35fbb66f3f7d6F2a1e70f64b88bE3C3B",t),{deposit:M,isPending:C,isConfirming:L,isConfirmed:B,error:Z}=N(),P=(0,d.cI)({resolver:(0,o.F)(k((null==T?void 0:T.value)||0n)),defaultValues:{depositAmount:""},mode:"onChange"});async function z(e){if(!(0,f.S)(n)){y.Am.error("请切换到正确的网络");return}try{await M((0,x.vz)(e.depositAmount))}catch(e){console.error(e)}}let{setError:O}=(0,A.V)();(0,s.useEffect)(()=>{B&&(y.Am.success("兑换成功"),O(null),setTimeout(()=>{r&&!r.hasEnded?window.location.href="/launch/contribute/?symbol=".concat(r.symbol):r&&!r.initialStakeRound?window.location.href="/gov/stakelp?symbol=".concat(r.symbol,"&first=true"):e.back()},2e3))},[B,e]);let U=()=>{P.setValue("depositAmount",(0,x.bM)((null==T?void 0:T.value)||0n))},{handleContractError:_}=(0,g.S)();return(0,s.useEffect)(()=>{b&&_(b,"token"),F&&_(F,"token"),Z&&_(Z,"token")},[b,F,Z,_]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)(E.Z,{title:"换得 ".concat("ETH20")}),(0,a.jsx)("div",{className:"stats w-full",children:(0,a.jsxs)("div",{className:"stat place-items-center",children:[(0,a.jsxs)("div",{className:"stat-title text-sm",children:["我的","ETH20"]}),(0,a.jsx)("div",{className:"stat-value text-secondary mt-2",children:(0,x.LH)(S||0n)}),(0,a.jsx)("div",{className:"stat-desc text-sm mt-2"})]})}),(0,a.jsx)(p.l0,{...P,children:(0,a.jsxs)("form",{onSubmit:P.handleSubmit(z),className:"space-y-4",children:[(0,a.jsx)(p.Wi,{control:P.control,name:"depositAmount",render:e=>{let{field:t}=e;return(0,a.jsxs)(p.xJ,{children:[(0,a.jsx)(p.lX,{children:"兑换数量："}),(0,a.jsx)(p.NI,{children:(0,a.jsx)(m.I,{placeholder:"填写 ".concat(null==T?void 0:T.symbol," 数量"),type:"text",disabled:C||L,className:"!ring-secondary-foreground",...t})}),(0,a.jsx)(p.zG,{}),(0,a.jsxs)(p.pf,{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{children:["你拥有 ",h?(0,a.jsx)(w.Z,{}):(0,x.LH)((null==T?void 0:T.value)||0n)," ",null==T?void 0:T.symbol]}),(0,a.jsx)(c.z,{type:"button",variant:"link",size:"sm",onClick:U,className:"text-secondary p-0 ml-2",disabled:h||C||L,children:"最高"})]})]})}}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(c.z,{type:"submit",className:"w-1/2 text-white py-2 rounded-lg",disabled:C||L||B,children:C?"兑换中...":L?"确认中...":B?"兑换成功":"兑换"})}),(0,a.jsxs)("div",{className:"flex justify-center mb-2",children:[(0,a.jsx)("span",{className:"text-sm",children:"兑换比例："}),(0,a.jsxs)("span",{className:"text-secondary text-sm",children:["1",null==T?void 0:T.symbol," = 1","ETH20"]})]})]})})]}),(0,a.jsx)(j.Z,{isLoading:C||L,text:C?"提交交易...":"确认交易..."})]})}},67068:function(e,t,n){n.d(t,{S:function(){return r}});let a={launch:{AlreadyInitialized:"已初始化，无需再次初始化",InvalidTokenSymbol:"无效的代币符号",TokenSymbolExists:"代币符号已存在",NotEligibleToDeployToken:"不符合部署代币的条件",LaunchAlreadyEnded:"公平发射已结束，无法进行操作",LaunchNotEnded:"公平发射未结束，无法进行操作",NoContribution:"没有申购，无法操作",TokensAlreadyClaimed:"代币已领取，请勿重复领取",TransferFailed:"转账失败，请稍后重试",LaunchAlreadyExists:"公平发射已存在",ParentTokenNotSet:"父代币未设置",ZeroContribution:"申购数量不能为0",InvalidParentToken:"无效的父代币"},join:{AlreadyInitialized:"已初始化",AmountIsZero:"数量不能为0",AddressCannotBeZero:"地址不能为空",CannotGenerateAtCurrentRound:"不能在当前轮次生成",LastBlocksOfRoundCannotJoin:"每轮最后一些区块不能加入",ActionNotVoted:"该行动本轮没有投票",TransferFailed:"转账失败",InvalidToAddress:"目标地址无效",JoinedAmountIsZero:"加入数量为0",NotInWhiteList:"该地址不在白名单",JoinAmountExceedsMaxStake:"加入数量超过最大质押数量",RoundsIsZero:"轮次为0",RoundNotStarted:"轮次还没有开始，请耐心等待"},mint:{RoundNotFinished:"轮次未结束，无法铸造代币奖励",NoRewardAvailable:"没有奖励可用",RoundStartMustBeLessOrEqualToRoundEnd:"轮次开始必须小于或等于轮次结束",NotEnoughReward:"奖励不足，无法铸造",NotEnoughRewardToBurn:"奖励不足，无法销毁",RoundNotStarted:"轮次还没有开始，请耐心等待"},stake:{NotAllowedToStakeAtRoundZero:"不允许在0轮进行质押",InvalidToAddress:"无效的接收地址",StakeAmountMustBeSet:"质押数量必须大于0",ReleaseAlreadyRequested:"已请求释放",PromisedWaitingRoundsOutOfRange:"承诺等待的轮次超出范围",PromisedWaitingRoundsMustBeGreaterOrEqualThanBefore:"承诺等待的轮次必须大于或等于之前的轮次",NoStakedLiquidity:"无质押的流动性",NoStakedLiquidityOrToken:"没有质押的流动性或代币",AlreadyUnstaked:"已解除质押，无需再次解除",UnableToUnstakeAtRoundZero:"无法在第0轮解除质押",NotEnoughWaitingRounds:"等待轮次数量不足",RoundHasNotStartedYet:"轮次尚未开始",TokenAmountNotEnough:"代币数量不足",TransferTokenAmountForLPFailed:"为LP转账代币数量失败",TransferParentTokenAmountForLPFailed:"为LP转账父代币数量失败",TransferTokenAmountFailed:"转账代币数量失败",TransferSLTokenFailed:"转账SL代币失败",TransferSTTokenFailed:"转账ST代币失败",TransferParentTokenFailed:"转账父代币失败","transfer amount exceeds balance":"转账数量超过余额"},submit:{CannotSubmitAction:"您没有权限提交提案，请先质押获取足够代理票数",ActionIdNotExist:"提案ID不存在",ProposalIndexOutOfRange:"提案索引超出范围",StartGreaterThanEnd:"开始时间大于结束时间",MaxStakeZero:"最大质押数量必须大于0",MaxRandomAccountsZero:"最大随机账户数量必须大于0",AlreadySubmitted:"该提案已提交，请勿重复提交",OnlyOneSubmitPerRound:"每个轮次，1个地址只能提交1个行动"},token:{AlreadyInitialized:"已初始化",InvalidAddress:"无效的地址",NotEligibleToMint:"不符合铸造代币的条件",ExceedsMaxSupply:"超过最大供应量",InsufficientBalance:"余额不足",TransferFailed:"转账失败，请稍后重试",InvalidSupply:"无效的供应量"},slToken:{NotEligibleToMint:"不符合铸造代币的条件",InvalidAddress:"无效的地址",NoTokensToBurn:"没有代币可销毁",InsufficientLiquidity:"流动性不足",TotalLpExceedsBalance:"总LP数量超过余额",TransferFailed:"转账失败，请稍后重试"},stToken:{NotEligibleToMint:"不符合铸造代币的条件",InvalidAddress:"无效的地址",NoTokensToBurn:"没有代币可销毁",TransferFailed:"转账失败，请稍后重试"},verify:{AlreadyInitialized:"已初始化",AddressCannotBeZero:"地址不能为空",FirstTokenAddressCannotBeZero:"第一个代币地址不能为空",RandomAddressCannotBeZero:"随机地址不能为空",ScoresAndAccountsLengthMismatch:"分数和地址数量不匹配",ScoresExceedVotesNum:"分数超过投票数量",RoundNotStarted:"轮次还没有开始，请耐心等待"},vote:{InvalidActionIds:"无效的提案ID",CannotVote:"没有权限投票",NotEnoughVotesLeft:"投票数量不足",VotesMustBeGreaterThanZero:"投票数量必须大于0"},uniswapV2Router:{EXPIRED:"交易已过期，请重新交易",INSUFFICIENT_A_AMOUNT:"A代币数量不足，请调整输入数量",INSUFFICIENT_B_AMOUNT:"B代币数量不足，请调整输入数量",INSUFFICIENT_OUTPUT_AMOUNT:"目标代币数量不足，请调整输入数量",EXCESSIVE_INPUT_AMOUNT:"输入数量过多，请调整输入数量",INVALID_PATH:"无效的兑换路径"}};var s=n(95049),i=n(67294);let r=()=>{let{setError:e}=(0,s.V)();return{handleContractError:(0,i.useCallback)((t,n)=>{console.error("context",n),console.error("error",t),e(function(e,t){let n=null!=e?e:"",s=n.match(/(?:([A-Za-z0-9_]+)\()|(?:ERC20:\s*(.+))/),i="";s&&(void 0!=s[1]||void 0!=s[2])&&(s[1]?i=s[1]:s[2]&&(i="".concat(s[2])));let r=a[t];if(r&&r[i])return{name:"交易错误",message:r[i]};let o=n.match(/User denied transaction signature/)?"用户取消了交易":"";if(o)return{name:"交易提示",message:o};let d=function(e){let t=e.split("\n").find(e=>e.trim().startsWith("Error:"));if(t){var n;let e=null===(n=t.split("Error:")[1])||void 0===n?void 0:n.trim();if(e)return e}let a=e.split("\n"),s=a.findIndex(e=>e.includes("the following reason:"));if(-1!==s&&s+1<a.length){let e=a[s+1].trim();if(e)return e}return""}(n);return d?{name:"交易错误",message:d}:{name:"交易错误",message:"交易失败，请稍后刷新重试"}}(t.message,n))},[e])}}},48105:function(e,t,n){n.d(t,{S:function(){return s}});var a=n(86501);let s=e=>!!e||(a.Am.error("请先将钱包链接 ".concat("sepolia")),!1)},21803:function(e,t,n){n.d(t,{v:function(){return a}});function a(e,t){let[n,a="0"]=e.split("."),s=n.startsWith("-");if(s&&(n=n.slice(1)),a=a.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${a}`))&&(n=`${BigInt(n)+1n}`),a="";else if(a.length>t){let[e,s,i]=[a.slice(0,t-1),a.slice(t-1,t),a.slice(t)],r=Math.round(Number(`${s}.${i}`));(a=r>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${r}`).length>t&&(a=a.slice(1),n=`${BigInt(n)+1n}`),a=a.slice(0,t)}else a=a.padEnd(t,"0");return BigInt(`${s?"-":""}${n}${a}`)}}}]);