"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7082],{27082:function(e,s,a){a.r(s);var n=a(85893),l=a(67294),i=a(92321),r=a(27245),t=a(21774),c=a(86501),d=a(11163),o=a(41664),m=a.n(o),x=a(91529),h=a(70019),u=a(19638),v=a(64777),j=a(42083),y=a(44576),f=a(78543);s.default=e=>{let{token:s,launchInfo:a}=e,[o,p]=(0,l.useState)(""),{address:b,chain:N}=(0,i.m)(),g=(0,d.useRouter)(),{balance:k,isPending:w,error:C}=(0,u.hS)(null==s?void 0:s.parentTokenAddress,b),{contributed:z,isPending:S,error:T}=(0,h.ap)(null==s?void 0:s.address,b),A=()=>!!(0,f.S)(N)&&(!(0n>=(0,x.vz)(o))||(c.Am.error("申购数量不能为0"),!1)),{approve:E,isWriting:_,isConfirming:F,isConfirmed:L,writeError:P}=(0,u.yA)(null==s?void 0:s.parentTokenAddress),Z=async()=>{if(A())try{await E("0x5978945B0C36a5442FD4cc5483091c08202DF044",(0,x.vz)(o))}catch(e){console.error(e)}};(0,l.useEffect)(()=>{L&&c.Am.success("授权成功")},[L]);let{contribute:D,isPending:H,isConfirming:B,isConfirmed:I,writeError:M}=(0,h.OY)(),O=async()=>{if(A())try{await D(null==s?void 0:s.address,(0,x.vz)(o))}catch(e){console.error(e)}};(0,l.useEffect)(()=>{I&&(c.Am.success("申购成功"),setTimeout(()=>{g.push("/launch?symbol=".concat(null==s?void 0:s.symbol))},2e3))},[I]);let R=_||F||L;return s?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)(v.Z,{title:"参与申购"}),(0,n.jsx)("div",{className:"stats w-full",children:(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title text-sm mr-6",children:"我已申购质押"}),(0,n.jsxs)("div",{className:"stat-value text-secondary",children:[(0,x.LH)(z||0n),(0,n.jsx)("span",{className:"text-greyscale-500 font-normal text-sm ml-2",children:s.parentTokenSymbol})]})]})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"flex justify-between",children:(0,n.jsx)(t.I,{type:"number",placeholder:"增加申购数量(".concat(s.parentTokenSymbol,")"),value:o,onChange:e=>p(e.target.value),className:"my-auto",disabled:R||0n>=(k||0n)})}),(0,n.jsxs)("div",{className:"flex items-center text-sm mb-4",children:[(0,n.jsxs)("span",{className:"text-greyscale-400",children:[(0,x.LH)(k||0n)," ",s.parentTokenSymbol]}),(0,n.jsx)(r.z,{variant:"link",size:"sm",onClick:()=>{p((0,x.bM)(k||0n))},disabled:R||0n>=(k||0n),className:"text-secondary",children:"最高"}),(0,n.jsx)(m(),{href:"/launch/deposit?symbol=".concat(s.symbol),children:(0,n.jsxs)(r.z,{variant:"link",size:"sm",className:"text-secondary",children:["获取",s.parentTokenSymbol]})})]}),(0,n.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,n.jsx)(r.z,{className:"w-1/2",onClick:Z,disabled:R,children:_?"1.授权中...":F?"1.确认中...":L?"1.已授权":"1.授权"}),(0,n.jsx)(r.z,{className:"w-1/2 text-white py-2 rounded-lg",onClick:O,disabled:!L||H||B||I,children:H?"2.申购中...":B?"2.确认中...":I?"2.申购成功":"2.申购"})]})]}),P&&(0,n.jsx)("div",{className:"text-red-500",children:P.message}),M&&(0,n.jsx)("div",{className:"text-red-500",children:M.message})]}),(0,n.jsx)(y.Z,{isLoading:_||F||H||B,text:_||H?"提交交易...":"确认交易..."})]}):(0,n.jsx)(j.Z,{})}}}]);