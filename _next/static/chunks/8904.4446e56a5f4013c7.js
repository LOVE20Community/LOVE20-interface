"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8904],{23432:function(e,s,n){n.d(s,{Z:function(){return t}});let t=(0,n(31134).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},44576:function(e,s,n){var t=n(85893);n(67294);var a=n(23432);s.Z=e=>{let{isLoading:s}=e;return s?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(a.Z,{className:"mx-auto h-8 w-8 animate-spin text-white"}),(0,t.jsx)("p",{className:"mt-2 text-sm font-medium text-white",children:"Loading"})]})}):null}},27082:function(e,s,n){n.r(s);var t=n(85893),a=n(67294),i=n(92321),l=n(27245),r=n(21774),c=n(41664),d=n.n(c),o=n(86501),m=n(91529),x=n(70019),u=n(19638),h=n(64777),f=n(42083),p=n(44576);s.default=e=>{let{token:s,launchInfo:n}=e,[c,v]=(0,a.useState)(""),{address:g}=(0,i.m)(),{balance:j,isPending:N,error:y}=(0,u.hS)(null==s?void 0:s.parentTokenAddress,g),{contributed:b,isPending:k,error:w}=(0,x.ap)(null==s?void 0:s.address,g),{approve:$,isWriting:z,isConfirming:C,isConfirmed:T,writeError:A}=(0,u.yA)(null==s?void 0:s.parentTokenAddress),E=async()=>{try{await $(null==s?void 0:s.parentTokenAddress,(0,m.vz)(c))}catch(e){console.error(e)}};(0,a.useEffect)(()=>{T&&o.Am.success("授权成功")},[T]),console.log("parseUnits(contributeAmount)",(0,m.vz)(c));let{contribute:S,isPending:Z,isConfirming:I,isConfirmed:B,writeError:L}=(0,x.OY)(),M=async()=>{try{await S(null==s?void 0:s.address,(0,m.vz)(c))}catch(e){console.error(e)}};(0,a.useEffect)(()=>{B&&(o.Am.success("申购成功"),setTimeout(()=>{window.location.reload()},2e3))},[B]);let _=z||C||T;return s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)(h.Z,{title:"参与申购"}),(0,t.jsx)("div",{className:"stats w-full",children:(0,t.jsxs)("div",{className:"stat place-items-center",children:[(0,t.jsx)("div",{className:"stat-title text-sm mr-6",children:"我已申购质押"}),(0,t.jsxs)("div",{className:"stat-value text-secondary",children:[(0,m.LH)(b||0n),(0,t.jsx)("span",{className:"text-greyscale-500 font-normal text-sm ml-2",children:s.parentTokenSymbol})]})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"flex justify-between",children:(0,t.jsx)(r.I,{type:"number",placeholder:"增加申购数量(".concat(s.parentTokenSymbol,")"),value:c,onChange:e=>v(e.target.value),className:"my-auto",disabled:_||0n>=(j||0n)})}),(0,t.jsxs)("div",{className:"flex items-center text-sm mb-4",children:[(0,t.jsxs)("span",{className:"text-greyscale-400",children:[(0,m.LH)(j||0n)," ",s.parentTokenSymbol]}),(0,t.jsx)(l.z,{variant:"link",size:"sm",onClick:()=>{v((0,m.bM)(j||0n))},disabled:_||0n>=(j||0n),className:"text-secondary",children:"最高"}),(0,t.jsx)(d(),{href:"/launch/deposit?symbol=".concat(s.symbol),children:(0,t.jsxs)(l.z,{variant:"link",size:"sm",className:"text-secondary",children:["获取",s.parentTokenSymbol]})})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,t.jsx)(l.z,{className:"w-1/2",onClick:E,disabled:_,children:_?"1.已授权":z||C?"授权中...":"1.授权"}),(0,t.jsx)(l.z,{className:"w-1/2 text-white py-2 rounded-lg",onClick:M,disabled:!T||Z||I||B,children:Z||I?"申购中...":B?"2.申购成功":"2.申购"})]})]}),A&&(0,t.jsx)("div",{className:"text-red-500",children:A.message}),L&&(0,t.jsx)("div",{className:"text-red-500",children:L.message})]}),(0,t.jsx)(p.Z,{isLoading:z||C||Z||I})]}):(0,t.jsx)(f.Z,{})}},21803:function(e,s,n){n.d(s,{v:function(){return t}});function t(e,s){let[n,t="0"]=e.split("."),a=n.startsWith("-");if(a&&(n=n.slice(1)),t=t.replace(/(0+)$/,""),0===s)1===Math.round(Number(`.${t}`))&&(n=`${BigInt(n)+1n}`),t="";else if(t.length>s){let[e,a,i]=[t.slice(0,s-1),t.slice(s-1,s),t.slice(s)],l=Math.round(Number(`${a}.${i}`));(t=l>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${l}`).length>s&&(t=t.slice(1),n=`${BigInt(n)+1n}`),t=t.slice(0,s)}else t=t.padEnd(s,"0");return BigInt(`${a?"-":""}${n}${t}`)}}}]);