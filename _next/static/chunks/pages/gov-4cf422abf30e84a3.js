(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6700],{54889:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gov",function(){return s(84216)}])},4270:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(31134).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},27460:function(e,t,s){"use strict";var n=s(85893),a=s(86501),i=s(74855),l=s(18289),r=s(91529);t.Z=e=>{let{address:t,showCopyButton:s=!0,showAddress:d=!0,colorClassName:c=""}=e;return(0,n.jsxs)("span",{className:"flex items-center space-x-2",children:[d&&(0,n.jsx)("span",{className:"text-xs ".concat(null!=c?c:"text-greyscale-500"),children:(0,r.Vu)(t)}),s&&(0,n.jsx)(i.CopyToClipboard,{text:t,onCopy:(e,t)=>{t?a.ZP.success("复制成功"):a.ZP.error("复制失败")},children:(0,n.jsx)("button",{className:"flex items-center justify-center p-1 rounded hover:bg-gray-200 focus:outline-none",onClick:e=>{e.preventDefault(),e.stopPropagation()},"aria-label":"复制地址",children:(0,n.jsx)(l.Z,{className:"h-4 w-4 ".concat(null!=c?c:"text-greyscale-500")})})})]})}},37122:function(e,t,s){"use strict";var n=s(85893),a=s(67294),i=s(92321),l=s(27245),r=s(41664),d=s.n(r),c=s(91529),u=s(93778),o=s(7080),p=s(87250),m=s(67068),y=s(42083),x=s(64777);t.Z=e=>{let{currentRound:t,showBtn:s=!0}=e,{token:r}=(0,a.useContext)(u.M)||{},{address:v}=(0,i.m)(),{votesNumByAccount:h,isPending:j,error:f}=(0,o.VI)(null==r?void 0:r.address,t,v||""),{scoreByVerifier:b,isPending:N,error:T}=(0,p.w3)(null==r?void 0:r.address,t,v||""),g=j||N?BigInt(0):h-b,{handleContractError:w}=(0,m.S)();return((0,a.useEffect)(()=>{f&&w(f,"vote"),T&&w(T,"verify")},[f,T]),r)?v?(0,n.jsxs)("div",{className:"flex-col items-center px-4 pt-3 pb-2",children:[(0,n.jsx)(x.Z,{title:"行动验证"}),(0,n.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0 mt-4",children:[(0,n.jsxs)("div",{className:"stat place-items-center pt-1 pb-2",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"已验证票数"}),(0,n.jsx)("div",{className:"stat-value text-xl ".concat(s?"":"text-secondary"),children:N?(0,n.jsx)(y.Z,{}):(0,c.LH)(b||BigInt(0))})]}),(0,n.jsxs)("div",{className:"stat place-items-center pt-1 pb-2",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"未验证票数"}),(0,n.jsx)("div",{className:"stat-value text-xl ".concat(s?"":"text-secondary"),children:j||N?(0,n.jsx)(y.Z,{}):(0,c.LH)(g)})]})]}),s&&(0,n.jsx)("div",{className:"flex justify-center",children:j||N?(0,n.jsx)(y.Z,{}):h>b?(0,n.jsx)(l.z,{className:"w-1/2",asChild:!0,children:(0,n.jsx)(d(),{href:"/verify?symbol=".concat(r.symbol),children:"去验证"})}):(0,n.jsx)(l.z,{disabled:!0,className:"w-1/2",children:b>0?"已验证":"未投票，无需验证"})})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex-col items-center px-4 pt-6 pb-2",children:[(0,n.jsx)(x.Z,{title:"行动验证"}),(0,n.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"请先连接钱包"})]})}):""}},77156:function(e,t,s){"use strict";s.d(t,{yA:function(){return d},A5:function(){return r}});var n=s(89810),a=s(71366),i=s(83540);let l=[{type:"constructor",inputs:[{name:"minter_",type:"address",internalType:"address"},{name:"tokenAddress_",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"function",name:"allowance",inputs:[{name:"owner",type:"address",internalType:"address"},{name:"spender",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"approve",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"amount",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"burn",inputs:[{name:"to",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"decimals",inputs:[],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{type:"function",name:"decreaseAllowance",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"subtractedValue",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"increaseAllowance",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"addedValue",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"mint",inputs:[{name:"to",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"minter",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"name",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"reserve",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"symbol",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"tokenAddress",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"transfer",inputs:[{name:"to",type:"address",internalType:"address"},{name:"amount",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"amount",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"event",name:"Approval",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"},{name:"spender",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"TokenBurn",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"TokenMint",inputs:[{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"error",name:"InvalidAddress",inputs:[]},{type:"error",name:"NoTokensToBurn",inputs:[]},{type:"error",name:"NotEligibleToMint",inputs:[]},{type:"error",name:"TransferFailed",inputs:[]}],r=e=>{let{data:t,isPending:s,error:a}=(0,n.u)({address:e,abi:l,functionName:"totalSupply",args:[]});return{totalSupply:t,isPending:s,error:a}},d=e=>{let{writeContract:t,data:s,isPending:n,error:r}=(0,a.S)(),d=async(s,n)=>{try{await t({address:e,abi:l,functionName:"approve",args:[s,n]})}catch(e){console.error("Approve failed:",e)}},{isLoading:c,isSuccess:u}=(0,i.A)({hash:s});return{approve:d,writeData:s,isPending:n,error:r,isConfirming:c,isConfirmed:u}}},84216:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return M}});var n=s(85893),a=s(67294),i=s(11163),l=s(93778),r=s(7080),d=s(67068),c=s(37436),u=s(27245),o=s(41664),p=s.n(o),m=s(92180),y=s(77156),x=s(91529),v=s(42083),h=s(7191),j=e=>{let{currentRound:t}=e,{token:s}=(0,a.useContext)(l.M)||{},{govVotesNum:i,isPending:r,error:c}=(0,m.kc)(null==s?void 0:s.address),{totalSupply:o,isPending:j,error:f}=(0,y.A5)(null==s?void 0:s.stTokenAddress),{handleContractError:b}=(0,d.S)();return(0,a.useEffect)(()=>{c&&b(c,"stake"),f&&b(f,"stToken")},[c,f]),(0,n.jsxs)("div",{className:"px-4 pb-4",children:[(0,n.jsx)(h.Z,{currentRound:t,roundType:"vote"}),(0,n.jsxs)("div",{className:"border rounded-lg p-0",children:[(0,n.jsxs)("div",{className:"stats  w-full grid grid-cols-2 divide-x-0",children:[(0,n.jsxs)("div",{className:"stat place-items-center pt-3 pb-0 mb-0",children:[(0,n.jsx)("div",{className:"stat-title",children:"总治理票数"}),(0,n.jsx)("div",{className:"stat-value text-2xl",children:r?(0,n.jsx)(v.Z,{}):(0,x.LH)(i||BigInt(0),0)})]}),(0,n.jsxs)("div",{className:"stat place-items-center pt-3 pb-0 mb-0",children:[(0,n.jsx)("div",{className:"stat-title",children:"质押代币数"}),(0,n.jsx)("div",{className:"stat-value text-2xl",children:j?(0,n.jsx)(v.Z,{}):(0,x.LH)(o||BigInt(0),0)})]})]}),(0,n.jsx)("div",{className:"w-full flex items-center py-0 mt-0 mb-0",children:(0,n.jsx)(u.z,{variant:"link",size:"sm",className:"w-full text-gray-400",asChild:!0,children:(0,n.jsx)(p(),{href:"/gov/liquid?symbol=".concat(null==s?void 0:s.symbol),children:"流动性质押数据>>"})})})]})]})},f=s(92321),b=s(64777),N=()=>{let{token:e}=(0,a.useContext)(l.M)||{},{address:t}=(0,f.m)(),{govVotes:s,stAmount:i,isPending:r,error:c}=(0,m.L)((null==e?void 0:e.address)||"",t||""),{handleContractError:o}=(0,d.S)();return((0,a.useEffect)(()=>{c&&o(c,"stake")},[c]),e)?t?(0,n.jsxs)("div",{className:"flex-col items-center px-4 pt-2 pb-0",children:[(0,n.jsx)(b.Z,{title:"我的质押"}),(0,n.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,n.jsxs)("div",{className:"stat place-items-center py-1",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"我的治理票数"}),(0,n.jsx)("div",{className:"stat-value text-xl",children:r?(0,n.jsx)(v.Z,{}):(0,x.LH)(s||BigInt(0),0)}),(0,n.jsx)("div",{className:"stat-actions w-full my-0",children:(0,n.jsx)(u.z,{variant:"link",size:"sm",className:"w-full text-secondary",asChild:!0,children:(0,n.jsx)(p(),{href:"/gov/stakelp?symbol=".concat(e.symbol),children:"去获取"})})})]}),(0,n.jsxs)("div",{className:"stat place-items-center py-1",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"我的质押代币数"}),(0,n.jsx)("div",{className:"stat-value text-xl",children:r?(0,n.jsx)(v.Z,{}):(0,x.LH)(i||BigInt(0),0)}),(0,n.jsx)("div",{className:"stat-actions w-full my-0",children:(0,n.jsx)(u.z,{variant:"link",size:"sm",className:"w-full text-secondary",asChild:!0,children:(0,n.jsx)(p(),{href:"/gov/staketoken?symbol=".concat(e.symbol),children:"去质押"})})})]})]})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex-col items-center px-4 py-2",children:[(0,n.jsx)(b.Z,{title:"我的质押"}),(0,n.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"请先连接钱包"})]})}):""},T=e=>{let{currentRound:t}=e,{token:s}=(0,a.useContext)(l.M)||{},{address:i}=(0,f.m)(),{validGovVotes:c,isPending:o,error:y}=(0,m.Ty)((null==s?void 0:s.address)||"",i||""),{votesNumByAccount:h,isPending:j,error:N}=(0,r.VI)((null==s?void 0:s.address)||"",t,i||""),{handleContractError:T}=(0,d.S)();return((0,a.useEffect)(()=>{N&&T(N,"vote"),y&&T(y,"stake")},[N,y]),s)?i?(0,n.jsxs)("div",{className:"flex-col items-center px-4 py-0",children:[(0,n.jsx)(b.Z,{title:"行动投票"}),(0,n.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,n.jsxs)("div",{className:"stat place-items-center pt-1 pb-2",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"我的已投票数"}),(0,n.jsx)("div",{className:"stat-value text-xl",children:j?(0,n.jsx)(v.Z,{}):(0,x.LH)(h||BigInt(0),0)})]}),(0,n.jsxs)("div",{className:"stat place-items-center pt-1 pb-2",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"我的剩余票数"}),(0,n.jsx)("div",{className:"stat-value text-xl",children:o||j?(0,n.jsx)(v.Z,{}):c?(0,x.LH)(c-h||BigInt(0),0):"0"})]})]}),(0,n.jsx)("div",{className:"flex justify-center",children:o||j?(0,n.jsx)(v.Z,{}):c>h+2n?(0,n.jsx)(u.z,{className:"w-1/2",asChild:!0,children:(0,n.jsx)(p(),{href:"/vote?symbol=".concat(s.symbol),children:"去投票"})}):(0,n.jsx)(u.z,{disabled:!0,className:"w-1/2",children:c>0?"已投票":"无治理票，不能投票"})})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex-col items-center px-4 py-2",children:[(0,n.jsx)(b.Z,{title:"行动投票"}),(0,n.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"请先连接钱包"})]})}):""},g=s(37122),w=s(4062),Z=s(4270),k=e=>{let{token:t}=e;return(0,n.jsxs)("div",{className:"mt-2 p-4",children:[(0,n.jsx)(b.Z,{title:"部署子币"}),(0,n.jsx)("div",{className:"w-full text-center",children:(0,n.jsx)(u.z,{variant:"outline",size:"sm",className:"mt-2 w-1/2 text-secondary border-secondary",asChild:!0,children:(0,n.jsxs)(p(),{href:"/launch/deploy?symbol=".concat(null==t?void 0:t.symbol),children:[(0,n.jsx)(Z.Z,{className:"w-4 h-4"}),"去部署"]})})}),(0,n.jsxs)("div",{className:"bg-gray-100 text-greyscale-500 rounded-lg p-4 text-sm mt-4",children:[(0,n.jsx)("p",{className:"mb-1",children:"说明："}),(0,n.jsxs)("p",{children:["1. 部署者：须持有$",null==t?void 0:t.symbol,"不少于 0.5%的治理票"]}),(0,n.jsxs)("p",{children:["2. 子币发射目标：须筹集 20,000,000个 ",null==t?void 0:t.symbol]})]})]})},M=()=>{let e=(0,i.useRouter)(),{currentRound:t,error:s}=(0,r.Bk)(),{token:u}=(0,a.useContext)(l.M)||{};(0,a.useEffect)(()=>{u&&!u.hasEnded?e.push("/launch?symbol=".concat(u.symbol)):u&&!u.initialStakeRound&&e.push("/gov/stakelp?symbol=".concat(u.symbol,"&first=true"))},[u]);let{handleContractError:o}=(0,d.S)();return((0,a.useEffect)(()=>{s&&o(s,"vote")},[s]),u)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.Z,{title:"治理首页"}),(0,n.jsxs)("main",{className:"flex-grow",children:[(0,n.jsx)(w.Z,{}),(0,n.jsx)(j,{currentRound:t||0n}),(0,n.jsx)(N,{}),(0,n.jsx)(T,{currentRound:t||0n}),(0,n.jsx)(g.Z,{currentRound:t>2?t-2n:0n}),(0,n.jsx)(k,{token:u})]})]}):(0,n.jsx)(v.Z,{})}}},function(e){e.O(0,[1664,2209,8710,6242,4637,5263,7250,7807,1024,2888,9774,179],function(){return e(e.s=54889)}),_N_E=e.O()}]);