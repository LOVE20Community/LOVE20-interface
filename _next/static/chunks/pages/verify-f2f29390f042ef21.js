(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4143],{85719:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify",function(){return n(48585)}])},91318:function(e,s,n){"use strict";var t=n(85893);s.Z=()=>(0,t.jsx)("span",{className:"flex justify-center items-center",children:(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]})})},18308:function(e,s,n){"use strict";var t=n(85893),r=n(67294),l=n(92321),a=n(41664),c=n.n(a),i=n(7080),d=n(87250),x=n(93778),o=n(91529),m=n(91318);s.Z=e=>{let{currentRound:s,showBtn:n=!0}=e,{token:a}=(0,r.useContext)(x.M)||{},{address:h}=(0,l.m)(),{votesNumByAccount:u,isPending:j,error:f}=(0,i.VI)(null==a?void 0:a.address,s,h||""),{scoreByVerifier:N,isPending:g,error:p}=(0,d.w3)(null==a?void 0:a.address,s,h||""),v=j||g?BigInt(0):u-N;return(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-4 p-6 bg-white",children:[(0,t.jsxs)("h1",{className:"text-base text-center",children:["验证轮（第 ",(0,t.jsx)("span",{className:"text-red-500",children:Number(s)})," 轮）"]}),(0,t.jsxs)("div",{className:"flex w-full justify-center space-x-20",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"我的已投验证票"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-orange-400",children:g?(0,t.jsx)(m.Z,{}):(0,o.LH)(N||BigInt(0))})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"我的剩余验证票"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-orange-400",children:j||g?(0,t.jsx)(m.Z,{}):(0,o.LH)(v)})]})]}),n&&(j||g?(0,t.jsx)(m.Z,{}):u>N?(0,t.jsx)(c(),{href:"/verify",className:"btn-primary btn w-1/2",children:"去验证"}):(0,t.jsx)("span",{className:"text-gray-500 text-sm",children:"无剩余验证票"}))]})}},48585:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return j}});var t=n(85893),r=n(35337),l=n(87250),a=n(18308),c=n(67294),i=n(41664),d=n.n(i),x=n(7080),o=n(94782),m=n(93778),h=n(91318),u=e=>{let{currentRound:s}=e,{token:n}=(0,c.useContext)(m.M)||{},{actionIds:r,votes:l,isPending:a,error:i}=(0,x.$S)((null==n?void 0:n.address)||"",s),{actionInfos:u,isPending:j,error:f}=(0,o.fT)((null==n?void 0:n.address)||"",r||[]);return a||r&&r.length>0&&j?(0,t.jsx)("div",{className:"p-4 flex justify-center items-center",children:(0,t.jsx)(h.Z,{})}):i||f?(console.log("errorVotesNums",i),console.log("errorActionInfosByIds",f),(0,t.jsx)("div",{children:"加载出错，请稍后再试。"})):(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h2",{className:"text-sm font-bold mb-4 text-gray-600",children:"待验证行动"}),(0,t.jsx)("div",{className:"space-y-4",children:null==u?void 0:u.map((e,s)=>(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg mb-4",children:(0,t.jsxs)(d(),{href:"/verify/".concat(e.head.id),children:[(0,t.jsxs)("div",{className:"font-semibold mb-2",children:[(0,t.jsx)("span",{className:"text-gray-400 text-base mr-1",children:"No.".concat(e.head.id)}),(0,t.jsx)("span",{className:"text-gray-800 text-lg",children:"".concat(e.body.action)})]}),(0,t.jsx)("p",{className:"leading-tight",children:e.body.consensus})]},e.head.id)},e.head.id))})]})},j=()=>{let{currentRound:e}=(0,l.Bk)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Z,{title:"社区首页"}),(0,t.jsxs)("main",{className:"flex-grow",children:[(0,t.jsx)(a.Z,{currentRound:e,showBtn:!1}),(0,t.jsx)(u,{currentRound:e})]})]})}}},function(e){e.O(0,[9215,6789,2077,7250,2888,9774,179],function(){return e(e.s=85719)}),_N_E=e.O()}]);