(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6700],{54889:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gov",function(){return l(7263)}])},27460:function(e,s,l){"use strict";var t=l(85893),n=l(86501),r=l(74855),a=l(45356),c=l(91529);s.Z=e=>{let{address:s,showCopyButton:l=!0}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:(0,c.Vu)(s)}),l&&(0,t.jsx)(r.CopyToClipboard,{text:s,onCopy:(e,s)=>{s?n.ZP.success("复制成功"):n.ZP.error("复制失败")},children:(0,t.jsx)("button",{className:"",onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,t.jsx)(a.Z,{className:"h-4 w-4 text-xs text-gray-500"})})})]})}},7191:function(e,s,l){"use strict";var t=l(85893);l(67294);var n=l(3125),r=l(91529),a=l(34155);s.Z=e=>{let{currentRound:s,roundName:l}=e,{data:c}=(0,n.O)(),x=c?Number("100")-Number(c)%Number("100"):0,i=x>0?Number(x)*Number(a.env.NEXT_PUBLIC_BLOCK_TIME):0,d=(0,r.ZC)(i);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("h1",{className:"text-base text-center font-bold",children:[l,"（第 ",(0,t.jsx)("span",{className:"text-red-500",children:Number(null!=s?s:0n)})," 轮）"]}),(0,t.jsxs)("span",{className:"text-sm text-gray-400 mt-1 pt-0",children:["本轮剩余：",d]})]})}},18308:function(e,s,l){"use strict";var t=l(85893),n=l(67294),r=l(92321),a=l(41664),c=l.n(a),x=l(7080),i=l(87250),d=l(93778),o=l(91529),m=l(91318),u=l(7191);s.Z=e=>{let{currentRound:s,showBtn:l=!0}=e,{token:a}=(0,n.useContext)(d.M)||{},{address:j}=(0,r.m)(),{votesNumByAccount:h,isPending:f,error:N}=(0,x.VI)(null==a?void 0:a.address,s,j||""),{scoreByVerifier:g,isPending:b,error:v}=(0,i.w3)(null==a?void 0:a.address,s,j||""),p=f||b?BigInt(0):h-g;return(0,t.jsxs)("div",{className:"flex flex-col items-center bg-white py-4",children:[(0,t.jsx)(u.Z,{currentRound:s,roundName:"验证轮"}),(0,t.jsxs)("div",{className:"flex w-full justify-center space-x-20 my-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"我的已投验证票"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-orange-400",children:b?(0,t.jsx)(m.Z,{}):(0,o.LH)(g||BigInt(0))})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"我的剩余验证票"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-orange-400",children:f||b?(0,t.jsx)(m.Z,{}):(0,o.LH)(p)})]})]}),l&&(f||b?(0,t.jsx)(m.Z,{}):h>g?(0,t.jsx)(c(),{href:"/verify",className:"btn-primary btn w-1/2",children:"去验证"}):(0,t.jsx)("span",{className:"text-gray-500 text-sm",children:"无剩余验证票"}))]})}},68789:function(e,s,l){"use strict";var t=l(85893),n=l(67294),r=l(41664),a=l.n(r),c=l(27460),x=l(93778);s.Z=e=>{let{showGovernanceLink:s=!1}=e,l=(0,n.useContext)(x.M);if(!l||!l.token)return(0,t.jsx)("div",{className:"text-center text-error",children:"Token information is not available."});let{token:r}=l;return(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(0,t.jsx)("div",{className:"mr-2",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"font-bold text-2xl text-yellow-500",children:"$"}),(0,t.jsx)("span",{className:"font-bold text-2xl mr-2",children:r.symbol}),(0,t.jsx)(c.Z,{address:r.address})]})}),s&&(0,t.jsx)(a(),{href:"/gov",className:"text-blue-400 text-sm hover:underline ml-auto",children:"参与治理>>"})]})}},7263:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return w}});var t=l(85893),n=l(35337),r=l(7080),a=l(67294),c=l(92180),x=l(77156),i=l(93778),d=l(91529),o=l(68789),m=l(18303),u=()=>{let{token:e}=(0,a.useContext)(i.M)||{},{govVotesNum:s,isPending:l}=(0,c.kc)(null==e?void 0:e.address),{totalSupply:n,isPending:r}=(0,x.A5)(null==e?void 0:e.stTokenAddress);return(0,t.jsxs)("div",{className:"p-6 bg-white ",children:[(0,t.jsx)(o.Z,{}),(0,t.jsxs)("div",{className:"flex w-full justify-center space-x-20 mb-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"总治理票"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-orange-400",children:l?"Loading...":(0,d.LH)(s||BigInt(0))})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"代币质押量"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-orange-400",children:r?"Loading...":(0,d.LH)(n||BigInt(0))})]})]}),(0,t.jsx)("div",{className:"w-full flex flex-col items-center space-y-4 bg-gray-100 rounded p-4",children:(0,t.jsx)(m.Z,{})})]})},j=l(92321),h=l(91318),f=l(41664),N=l.n(f),g=l(27245),b=()=>{let{token:e}=(0,a.useContext)(i.M)||{},{address:s}=(0,j.m)(),{govVotes:l,stAmount:n,isPending:r,error:x}=(0,c.L)((null==e?void 0:e.address)||"",s||"");return(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-4 p-6 bg-white  mt-4",children:[(0,t.jsxs)("div",{className:"flex w-full justify-center space-x-20",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"我的治理票数"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-orange-400",children:r?(0,t.jsx)(h.Z,{}):(0,d.LH)(l||BigInt(0))})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"我的质押数"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-orange-400",children:r?(0,t.jsx)(h.Z,{}):(0,d.LH)(n||BigInt(0))})]})]}),(0,t.jsx)(N(),{href:"/gov/stake",className:"w-1/2",children:(0,t.jsx)(g.z,{className:"w-full bg-blue-600 hover:bg-blue-700",children:"去质押"})})]})},v=l(7191),p=e=>{let{currentRound:s}=e,{token:l}=(0,a.useContext)(i.M)||{},{address:n}=(0,j.m)(),{validGovVotes:x,isPending:o}=(0,c.Ty)((null==l?void 0:l.address)||"",n||""),{votesNumByAccount:m,isPending:u}=(0,r.VI)((null==l?void 0:l.address)||"",s,n||"");return console.log("validGovVotes",x),console.log("votesNumByAccount",m),(0,t.jsxs)("div",{className:"flex flex-col items-center p-6 bg-white mt-4 mb-4",children:[(0,t.jsx)(v.Z,{currentRound:s,roundName:"投票轮"}),(0,t.jsxs)("div",{className:"flex w-full justify-center space-x-20 my-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"我的已投票数"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-orange-400",children:u?(0,t.jsx)(h.Z,{}):(0,d.LH)(m||BigInt(0))})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"我的剩余票数"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-orange-400",children:o||u?(0,t.jsx)(h.Z,{}):(0,d.LH)(x-m||BigInt(0))})]})]}),o||u?(0,t.jsx)(h.Z,{}):x>m?(0,t.jsxs)("div",{className:"flex justify-center space-x-6",children:[(0,t.jsx)(N(),{href:"/vote/actions4submit",children:(0,t.jsx)(g.z,{className:"w-full bg-blue-600 hover:bg-blue-700",children:"去推举"})}),(0,t.jsx)(N(),{href:"/vote",children:(0,t.jsx)(g.z,{className:"w-full bg-blue-600 hover:bg-blue-700",children:"去投票"})})]}):(0,t.jsxs)("div",{className:"flex justify-center space-x-6",children:[(0,t.jsx)(N(),{href:"/vote/actions4submit",children:(0,t.jsx)(g.z,{className:"w-full bg-blue-600 hover:bg-blue-700",children:"去推举"})}),(0,t.jsx)(g.z,{className:"w-1/2 bg-gray-400 cursor-not-allowed",children:"去投票"})]})]})},y=l(18308),w=()=>{let{currentRound:e}=(0,r.Bk)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Z,{title:"治理首页"}),(0,t.jsxs)("main",{className:"flex-grow",children:[(0,t.jsx)(u,{}),(0,t.jsx)(b,{}),(0,t.jsx)(p,{currentRound:e}),(0,t.jsx)(y.Z,{currentRound:e>2?e-2n:0n})]})]})}}},function(e){e.O(0,[4784,8424,5608,7080,765,7250,7716,2888,9774,179],function(){return e(e.s=54889)}),_N_E=e.O()}]);