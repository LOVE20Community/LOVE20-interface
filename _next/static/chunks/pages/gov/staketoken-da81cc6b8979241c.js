(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7809],{51906:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gov/staketoken",function(){return t(10703)}])},77156:function(e,n,t){"use strict";t.d(n,{A5:function(){return i}});var a=t(89810);let s=[{type:"constructor",inputs:[{name:"mintableAddress_",type:"address",internalType:"address"},{name:"tokenAddress_",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"function",name:"allowance",inputs:[{name:"owner",type:"address",internalType:"address"},{name:"spender",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"approve",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"burn",inputs:[{name:"to",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"decimals",inputs:[],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{type:"function",name:"mint",inputs:[{name:"to",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"mintableAddress",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"name",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"reserve",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"symbol",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"tokenAddress",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"transfer",inputs:[{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"event",name:"Approval",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"},{name:"spender",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"error",name:"ERC20InsufficientAllowance",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"allowance",type:"uint256",internalType:"uint256"},{name:"needed",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ERC20InsufficientBalance",inputs:[{name:"sender",type:"address",internalType:"address"},{name:"balance",type:"uint256",internalType:"uint256"},{name:"needed",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ERC20InvalidApprover",inputs:[{name:"approver",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidReceiver",inputs:[{name:"receiver",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidSender",inputs:[{name:"sender",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidSpender",inputs:[{name:"spender",type:"address",internalType:"address"}]}],i=e=>{let{data:n,isPending:t,error:i}=(0,a.u)({address:e,abi:s,functionName:"totalSupply",args:[]});return{totalSupply:n,isPending:t,error:i}}},10703:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return T}});var a=t(85893),s=t(67294),i=t(92321),r=t(93778),l=t(19638),d=t(7224),u=t(58732),p=t(86501),o=t(27245),y=t(78543),m=t(92180),c=t(77156),f=t(91529),x=t(64777),b=t(44576),v=e=>{let{tokenBalance:n}=e,{address:t,chain:d}=(0,i.m)(),{token:u}=(0,s.useContext)(r.M)||{},{totalSupply:v,isPending:T}=(0,c.A5)(null==u?void 0:u.stTokenAddress),{approve:w,isWriting:h,isConfirming:g,isConfirmed:j,writeError:N}=(0,l.yA)(null==u?void 0:u.address),{stakeToken:A,isWriting:k,isConfirming:C,isConfirmed:M,writeError:E}=(0,m.aE)(),[_,S]=(0,s.useState)(""),[I,R]=(0,s.useState)("4"),P=()=>{if(!(0,y.S)(d))return!1;if(0n===BigInt(_)){p.Am.error("请输入正确的数量");return}return!0},z=async()=>{if(P())try{await w("0xf63D97fA996A57a78bf14839d112dd741Dc27321",(0,f.vz)(_))}catch(e){p.Am.error((null==e?void 0:e.message)||"授权失败"),console.error("Approve failed",e)}};(0,s.useEffect)(()=>{j&&p.Am.success("授权成功")},[j]);let B=async()=>{if(P())try{await A(null==u?void 0:u.address,(0,f.vz)(_),BigInt(I),t)}catch(e){console.error("Stake failed",e)}};return(0,s.useEffect)(()=>{M&&(p.Am.success("质押成功"),S(""),R(""),setTimeout(()=>{window.location.reload()},2e3))},[M]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"w-full flex flex-col items-center p-6 mt-1",children:[(0,a.jsx)("div",{className:"w-full text-left mb-4",children:(0,a.jsx)(x.Z,{title:"质押增加治理收益"})}),(0,a.jsxs)("form",{className:"w-full max-w-md",onSubmit:e=>e.preventDefault(),children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("label",{className:"block text-left mb-1 text-sm text-greyscale-500",children:["质押数 (当前持有数量：",(0,a.jsxs)("span",{className:"text-secondary",children:[(0,f.LH)(n)," ",null==u?void 0:u.symbol]}),")"]}),(0,a.jsx)("input",{type:"number",placeholder:"输入 ".concat(null==u?void 0:u.symbol," 数量"),value:_,onChange:e=>{S(e.target.value)},className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-left mb-1 text-sm text-greyscale-500",children:"释放期"}),(0,a.jsx)("select",{value:I,onChange:e=>R(e.target.value),className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring",required:!0,children:Array.from({length:9},(e,n)=>(0,a.jsx)("option",{value:n+4,children:n+4},n+4))})]}),(0,a.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,a.jsx)(o.z,{className:"w-1/2",disabled:h||g||j,onClick:z,children:h||g?"1.授权中...":j?"1.已授权":"1.授权"}),(0,a.jsx)(o.z,{className:"w-1/2",disabled:!j||k||C||M,onClick:B,children:k||C?"2.质押中...":M?"2.已质押":"2.质押"})]})]}),E&&(0,a.jsx)("div",{className:"text-red-500",children:E.message}),N&&(0,a.jsx)("div",{className:"text-red-500",children:N.message}),(0,a.jsx)(b.Z,{isLoading:h||g||k||C})]})})},T=()=>{let{token:e}=(0,s.useContext)(r.M)||{},{address:n}=(0,i.m)(),{balance:t}=(0,l.hS)(null==e?void 0:e.address,n),{balance:p}=(0,l.hS)(null==e?void 0:e.parentTokenAddress,n),{tokenAmount:o,parentTokenAmount:y,feeTokenAmount:m,feeParentTokenAmount:c,isPending:f}=(0,d.tT)(null==e?void 0:e.slTokenAddress);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Z,{title:"质押"}),(0,a.jsxs)("main",{className:"flex-grow",children:[o&&(0,a.jsx)(v,{tokenBalance:t||0n}),(0,a.jsxs)("div",{className:"flex flex-col w-full p-6 mt-4",children:[(0,a.jsx)("div",{className:"text-base font-bold text-greyscale-700 pb-2",children:"规则说明："}),(0,a.jsx)("div",{className:"text-sm text-greyscale-500 mb-2",children:"1、单独质押代币可获得激励提升（最高不超过 2 倍的验证激励），同时获得 st类代币作为质押的凭证；"}),(0,a.jsx)("div",{className:"text-sm text-greyscale-500",children:"2、释放期指：申请解锁后，几轮之后可以领取。最小为4轮，最大为12轮；"})]})]})]})}}},function(e){e.O(0,[4637,2180,6625,2888,9774,179],function(){return e(e.s=51906)}),_N_E=e.O()}]);