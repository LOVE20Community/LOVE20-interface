(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7809],{51906:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gov/staketoken",function(){return n(10703)}])},98082:function(e,t,n){"use strict";n.d(t,{Cd:function(){return u},X:function(){return o},bZ:function(){return d}});var a=n(85893),s=n(67294),r=n(12003),i=n(40108);let l=(0,r.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=s.forwardRef((e,t)=>{let{className:n,variant:s,...r}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(l({variant:s}),n),...r})});d.displayName="Alert";let u=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",n),...s})});u.displayName="AlertTitle";let o=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",n),...s})});o.displayName="AlertDescription"},44576:function(e,t,n){"use strict";var a=n(85893);n(67294);var s=n(23432);t.Z=e=>{let{isLoading:t,text:n="Loading"}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(s.Z,{className:"mx-auto h-8 w-8 animate-spin text-white"}),(0,a.jsx)("p",{className:"mt-2 text-sm font-medium text-white",children:n})]})}):null}},58732:function(e,t,n){"use strict";var a=n(85893),s=n(9008),r=n.n(s);n(67294);var i=n(98082),l=n(68655),d=n(3294),u=n(91907),o=n(92321);t.Z=e=>{let{title:t}=e,{address:n,chain:s}=(0,o.m)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r(),{children:[(0,a.jsx)("title",{children:"".concat(t," - LIFE20")}),(0,a.jsx)("meta",{name:"".concat(t," - LIFE20"),content:"A Web3 DApp for Life20 token management"})]}),(0,a.jsxs)("header",{className:"flex justify-between items-center py-2 px-4",children:[(0,a.jsx)(u.vP,{className:"-ml-1"}),(0,a.jsx)(d.NL,{})]}),n&&!s&&(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)(i.bZ,{variant:"destructive",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),(0,a.jsx)(i.Cd,{children:n?"钱包网络错误":"未连接钱包"}),(0,a.jsx)(i.X,{children:n?"请切换到 ".concat("sepolia"," 网络"):"请先连接钱包，再进行操作"})]})})]})}},77156:function(e,t,n){"use strict";n.d(t,{yA:function(){return d},A5:function(){return l}});var a=n(89810),s=n(71366),r=n(83540);let i=[{type:"constructor",inputs:[{name:"mintableAddress_",type:"address",internalType:"address"},{name:"tokenAddress_",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"function",name:"allowance",inputs:[{name:"owner",type:"address",internalType:"address"},{name:"spender",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"approve",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"burn",inputs:[{name:"to",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"decimals",inputs:[],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{type:"function",name:"mint",inputs:[{name:"to",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"mintableAddress",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"name",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"reserve",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"symbol",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"tokenAddress",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"transfer",inputs:[{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"event",name:"Approval",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"},{name:"spender",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"error",name:"ERC20InsufficientAllowance",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"allowance",type:"uint256",internalType:"uint256"},{name:"needed",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ERC20InsufficientBalance",inputs:[{name:"sender",type:"address",internalType:"address"},{name:"balance",type:"uint256",internalType:"uint256"},{name:"needed",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ERC20InvalidApprover",inputs:[{name:"approver",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidReceiver",inputs:[{name:"receiver",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidSender",inputs:[{name:"sender",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidSpender",inputs:[{name:"spender",type:"address",internalType:"address"}]}],l=e=>{let{data:t,isPending:n,error:s}=(0,a.u)({address:e,abi:i,functionName:"totalSupply",args:[]});return{totalSupply:t,isPending:n,error:s}},d=e=>{let{writeContract:t,data:n,isPending:a,error:l}=(0,s.S)(),d=async(n,a)=>{try{await t({address:e,abi:i,functionName:"approve",args:[n,a]})}catch(e){console.error("Approve failed:",e)}},{isLoading:u,isSuccess:o}=(0,r.A)({hash:n});return{approve:d,writeData:n,isPending:a,error:l,isConfirming:u,isConfirmed:o}}},10703:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var a=n(85893),s=n(67294),r=n(92321),i=n(93778),l=n(19638),d=n(7224),u=n(58732),o=n(42083),p=n(86501),c=n(27245),m=n(78543),y=n(92180),f=n(77156),x=n(91529),v=n(64777),b=n(44576),g=e=>{let{tokenBalance:t}=e,{address:n,chain:d}=(0,r.m)(),{token:u}=(0,s.useContext)(i.M)||{},{totalSupply:o,isPending:g}=(0,f.A5)(null==u?void 0:u.stTokenAddress),{approve:h,isWriting:T,isConfirming:j,isConfirmed:w,writeError:N}=(0,l.yA)(null==u?void 0:u.address),{stakeToken:A,isWriting:k,isConfirming:C,isConfirmed:E,writeError:M}=(0,y.aE)(),[S,_]=(0,s.useState)(""),[I,R]=(0,s.useState)("4"),Z=()=>{if(!(0,m.S)(d))return!1;if(0n===BigInt(S)){p.Am.error("请输入正确的数量");return}return!0},L=async()=>{if(Z())try{await h("0xf63D97fA996A57a78bf14839d112dd741Dc27321",(0,x.vz)(S))}catch(e){p.Am.error((null==e?void 0:e.message)||"授权失败"),console.error("Approve failed",e)}};(0,s.useEffect)(()=>{w&&p.Am.success("授权成功")},[w]);let P=async()=>{if(Z())try{await A(null==u?void 0:u.address,(0,x.vz)(S),BigInt(I),n)}catch(e){console.error("Stake failed",e)}};return(0,s.useEffect)(()=>{E&&(p.Am.success("质押成功"),_(""),R(""),setTimeout(()=>{window.location.href="/gov?symbol=".concat(null==u?void 0:u.symbol)},2e3))},[E]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"w-full flex flex-col items-center p-6 mt-1",children:[(0,a.jsx)("div",{className:"w-full text-left mb-4",children:(0,a.jsx)(v.Z,{title:"质押增加治理收益"})}),(0,a.jsxs)("form",{className:"w-full max-w-md",onSubmit:e=>e.preventDefault(),children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("label",{className:"block text-left mb-1 text-sm text-greyscale-500",children:["质押数 (当前持有数量：",(0,a.jsxs)("span",{className:"text-secondary",children:[(0,x.LH)(t)," ",null==u?void 0:u.symbol]}),")"]}),(0,a.jsx)("input",{type:"number",placeholder:"输入 ".concat(null==u?void 0:u.symbol," 数量"),value:S,onChange:e=>{_(e.target.value)},className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-left mb-1 text-sm text-greyscale-500",children:"释放期"}),(0,a.jsx)("select",{value:I,onChange:e=>R(e.target.value),className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring",required:!0,children:Array.from({length:9},(e,t)=>(0,a.jsx)("option",{value:t+4,children:t+4},t+4))})]}),(0,a.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,a.jsx)(c.z,{className:"w-1/2",disabled:T||j||w,onClick:L,children:T?"1.授权中...":j?"1.确认中...":w?"1.已授权":"1.授权"}),(0,a.jsx)(c.z,{className:"w-1/2",disabled:!w||k||C||E,onClick:P,children:k?"2.质押中...":C?"2.确认中...":E?"2.已质押":"2.质押"})]})]}),M&&(0,a.jsx)("div",{className:"text-red-500",children:M.message}),N&&(0,a.jsx)("div",{className:"text-red-500",children:N.message}),(0,a.jsx)(b.Z,{isLoading:T||j||k||C,text:T||k?"提交交易...":"确认交易..."})]})})},h=()=>{let{token:e}=(0,s.useContext)(i.M)||{},{address:t}=(0,r.m)(),{balance:n}=(0,l.hS)(null==e?void 0:e.address,t),{balance:p}=(0,l.hS)(null==e?void 0:e.parentTokenAddress,t),{tokenAmount:c,parentTokenAmount:m,feeTokenAmount:y,feeParentTokenAmount:f,isPending:x}=(0,d.tT)(null==e?void 0:e.slTokenAddress);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Z,{title:"质押代币"}),(0,a.jsxs)("main",{className:"flex-grow",children:[x&&(0,a.jsx)(o.Z,{}),!x&&!c&&(0,a.jsx)("div",{className:"flex justify-center items-center mt-10",children:"需要先质押流动性LP，才可以质押代币"}),c&&(0,a.jsx)(g,{tokenBalance:n||0n}),(0,a.jsxs)("div",{className:"flex flex-col w-full p-6 mt-4",children:[(0,a.jsx)("div",{className:"text-base font-bold text-greyscale-700 pb-2",children:"规则说明："}),(0,a.jsx)("div",{className:"text-sm text-greyscale-500 mb-2",children:"1、单独质押代币可获得激励提升（最高不超过 2 倍的验证激励），同时获得 st类代币作为质押的凭证；"}),(0,a.jsx)("div",{className:"text-sm text-greyscale-500",children:"2、释放期指：申请解锁后，几轮之后可以领取。最小为4轮，最大为12轮；"})]})]})]})}},78543:function(e,t,n){"use strict";n.d(t,{S:function(){return s}});var a=n(86501);let s=e=>!!e||(a.Am.error("请先将钱包链接 ".concat("sepolia")),!1)}},function(e){e.O(0,[4637,5263,1065,2888,9774,179],function(){return e(e.s=51906)}),_N_E=e.O()}]);