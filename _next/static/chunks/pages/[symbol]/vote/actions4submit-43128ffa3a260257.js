(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9653],{10286:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[symbol]/vote/actions4submit",function(){return t(16599)}])},27245:function(e,n,t){"use strict";t.d(n,{z:function(){return o}});var r=t(85893),s=t(67294),i=t(88426),c=t(45139),a=t(98997);let l=(0,c.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,n)=>{let{className:t,variant:s,size:c,asChild:o=!1,...u}=e,d=o?i.g7:"button";return(0,r.jsx)(d,{className:(0,a.cn)(l({variant:s,size:c,className:t})),ref:n,...u})});o.displayName="Button"},98997:function(e,n,t){"use strict";t.d(n,{cn:function(){return i}});var r=t(90512),s=t(98388);function i(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,s.m6)((0,r.W)(n))}},74089:function(e,n,t){"use strict";var r=t(85893),s=t(67294),i=t(91529);n.Z=e=>{let{initialTimeLeft:n}=e,[t,c]=(0,s.useState)(n);(0,s.useEffect)(()=>{if(n<=0)return;c(n);let e=setInterval(()=>{c(n=>n<=1?(clearInterval(e),window.location.reload(),0):n-1)},1e3);return()=>{clearInterval(e)}},[n]);let a=(0,i.ZC)(t);return(0,r.jsx)(r.Fragment,{children:a})}},91318:function(e,n,t){"use strict";var r=t(85893);n.Z=()=>(0,r.jsx)("span",{className:"flex justify-center items-center",children:(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]})})},7191:function(e,n,t){"use strict";var r=t(85893);t(67294);var s=t(3125),i=t(74089);n.Z=e=>{let{currentRound:n,roundName:t}=e,{data:c}=(0,s.O)(),a=Number("100")||0,l=Number("12")||0,o=c?a-Number(c)%a:0;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h1",{className:"text-base text-center font-bold",children:[t,"（第 ",(0,r.jsx)("span",{className:"text-red-500",children:Number(null!=n?n:0n)})," 轮）"]}),(0,r.jsxs)("span",{className:"text-sm text-gray-400 mt-1 pt-0",children:["本轮剩余：",(0,r.jsx)(i.Z,{initialTimeLeft:o>0?o*l:0})]})]})}},16599:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return x}});var r=t(85893),s=t(35337),i=t(94782),c=t(67294),a=t(11163),l=t(27245),o=t(93778),u=t(41664),d=t.n(u),f=t(91318),m=e=>{let{currentRound:n}=e,{token:t}=(0,c.useContext)(o.M)||{},s=(0,a.useRouter)(),{actionInfos:u,isPending:m,error:h}=(0,i.s4)((null==t?void 0:t.address)||"",0n,100n,!1),{actionSubmits:x,isPending:g,error:b}=(0,i.WZ)((null==t?void 0:t.address)||"",n);return h?(console.error(h),(0,r.jsx)("div",{children:"加载出错，请稍后再试。"})):t?(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-sm font-bold text-gray-600",children:"所有行动"}),(0,r.jsx)(l.z,{onClick:()=>s.push("/".concat(t.symbol,"/action/new")),className:"bg-blue-600 hover:bg-blue-700",children:"发起新行动"})]}),m||g?(0,r.jsx)(f.Z,{}):(0,r.jsx)("div",{className:"space-y-4",children:null==u?void 0:u.map((e,n)=>{let s=null==x?void 0:x.some(n=>n.actionId===e.head.id);return(0,r.jsx)("div",{className:"bg-white p-4 rounded-lg mb-4",children:(0,r.jsxs)(d(),{href:"/".concat(t.symbol,"/action/").concat(e.head.id,"?type=submit&submitted=").concat(s),children:[(0,r.jsxs)("div",{className:"font-semibold mb-2",children:[(0,r.jsx)("span",{className:"text-gray-400 text-base mr-1",children:"No.".concat(e.head.id)}),(0,r.jsx)("span",{className:"text-gray-800 text-lg",children:"".concat(e.body.action)})]}),(0,r.jsx)("p",{className:"leading-tight",children:e.body.consensus}),(0,r.jsx)("div",{className:"flex justify-between mt-1",children:(0,r.jsx)("span",{className:"text-sm",children:s?(0,r.jsx)("span",{className:"text-green-500",children:"已推举"}):(0,r.jsx)("span",{className:"text-red-500",children:"未推举"})})})]},e.head.id)},e.head.id)})})]}):(0,r.jsx)(f.Z,{})},h=t(7191),x=()=>{let{currentRound:e,isPending:n,error:t}=(0,i.Bk)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z,{title:"推举"}),(0,r.jsxs)("main",{className:"flex-grow",children:[(0,r.jsx)("div",{className:"flex flex-col items-center space-y-4 p-6 bg-white",children:n?(0,r.jsx)(f.Z,{}):(0,r.jsx)(h.Z,{currentRound:e,roundName:"投票轮"})}),n?(0,r.jsx)(f.Z,{}):(0,r.jsx)(m,{currentRound:e})]})]})}},21803:function(e,n,t){"use strict";function r(e,n){let[t,r="0"]=e.split("."),s=t.startsWith("-");if(s&&(t=t.slice(1)),r=r.replace(/(0+)$/,""),0===n)1===Math.round(Number(`.${r}`))&&(t=`${BigInt(t)+1n}`),r="";else if(r.length>n){let[e,s,i]=[r.slice(0,n-1),r.slice(n-1,n),r.slice(n)],c=Math.round(Number(`${s}.${i}`));(r=c>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${c}`).length>n&&(r=r.slice(1),t=`${BigInt(t)+1n}`),r=r.slice(0,n)}else r=r.padEnd(n,"0");return BigInt(`${s?"-":""}${t}${r}`)}t.d(n,{v:function(){return r}})},3125:function(e,n,t){"use strict";t.d(n,{O:function(){return f}});var r=t(30202),s=t(97712),i=t(81946),c=t(36100),a=t(82451),l=t(82002),o=t(37122),u=t(65185),d=t(67294);function f(e={}){let{query:n={},watch:t}=e,f=(0,o.Z)(e),m=(0,r.NL)(),h=(0,l.x)({config:f}),x=e.chainId??h,g=function(e,n={}){return{gcTime:0,async queryFn({queryKey:n}){let{scopeKey:t,...r}=n[1];return await function(e,n={}){let{chainId:t,...r}=n,c=e.getClient({chainId:t});return(0,i.s)(c,s.z,"getBlockNumber")(r)}(e,r)??null},queryKey:function(e={}){return["blockNumber",(0,c.OP)(e)]}(n)}}(f,{...e,chainId:x});return!function(e={}){let{enabled:n=!0,onBlockNumber:t,config:r,...s}=e,c=(0,o.Z)(e),a=(0,l.x)({config:c}),f=e.chainId??a;(0,d.useEffect)(()=>{if(n&&t)return function(e,n){let t,r;let{syncConnectedChain:s=e._internal.syncConnectedChain,...c}=n,a=n=>{t&&t();let r=e.getClient({chainId:n});return t=(0,i.s)(r,u.q,"watchBlockNumber")(c)},l=a(n.chainId);return s&&!n.chainId&&(r=e.subscribe(({chainId:e})=>e,async e=>a(e))),()=>{l?.(),r?.()}}(c,{...s,chainId:f,onBlockNumber:t})},[f,c,n,t,s.onError,s.emitMissed,s.emitOnBegin,s.poll,s.pollingInterval,s.syncConnectedChain])}({...{config:e.config,chainId:e.chainId,..."object"==typeof t?t:{}},enabled:!!((n.enabled??!0)&&("object"==typeof t?t.enabled:t)),onBlockNumber(e){m.setQueryData(g.queryKey,e)}}),(0,a.aM)({...n,...g})}}},function(e){e.O(0,[9689,8424,7140,2888,9774,179],function(){return e(e.s=10286)}),_N_E=e.O()}]);