(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3464],{41081:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[symbol]/action/new",function(){return n(28918)}])},27245:function(e,t,n){"use strict";n.d(t,{z:function(){return d}});var r=n(85893),s=n(67294),i=n(88426),a=n(45139),o=n(98997);let l=(0,a.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:n,variant:s,size:a,asChild:d=!1,...c}=e,u=d?i.g7:"button";return(0,r.jsx)(u,{className:(0,o.cn)(l({variant:s,size:a,className:n})),ref:t,...c})});d.displayName="Button"},98997:function(e,t,n){"use strict";n.d(t,{cn:function(){return i}});var r=n(90512),s=n(98388);function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,r.W)(t))}},28918:function(e,t,n){"use strict";n.r(t);var r=n(85893),s=n(67294),i=n(11163),a=n(94782),o=n(93778),l=n(91529),d=n(35337),c=n(27245);t.default=()=>{let e=(0,i.useRouter)(),{submitNewAction:t,isWriting:n,isConfirming:u,isConfirmed:m,writeError:b,writeData:x}=(0,a.Xo)(),{token:f}=(0,s.useContext)(o.M)||{},[g,h]=(0,s.useState)({actionName:"",consensus:"",verificationRule:"",verificationInfoGuide:"",rewardAddressCount:"",maxStake:"",whiteList:""}),v=e=>{h({...g,[e.target.name]:e.target.value})},p=async()=>{let e={maxStake:g.maxStake?(0,l.vz)(g.maxStake):0n,maxRandomAccounts:g.rewardAddressCount?BigInt(g.rewardAddressCount):0n,whiteList:g.whiteList?g.whiteList.split(",").map(e=>e.trim()):[],action:g.actionName,consensus:g.consensus,verificationRule:g.verificationRule,verificationInfoGuide:g.verificationInfoGuide};await t(null==f?void 0:f.address,e)};return(0,s.useEffect)(()=>{m&&e.push("/".concat(null==f?void 0:f.symbol,"/vote/actions4submit"))},[m,x]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{title:"创建新行动"}),(0,r.jsxs)("div",{className:"max-w-xl mx-auto bg-white p-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"创建新行动"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-left mb-1 text-sm text-gray-500",children:"行动名称：一句话说明"}),(0,r.jsx)("input",{type:"text",name:"actionName",value:g.actionName,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md p-2 bg-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-left mb-1 text-sm text-gray-500",children:"行动共识"}),(0,r.jsx)("input",{type:"text",name:"consensus",value:g.consensus,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md p-2  bg-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-left mb-1 text-sm text-gray-500",children:"验证规则"}),(0,r.jsx)("textarea",{name:"verificationRule",value:g.verificationRule,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md p-2 bg-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-left mb-1 text-sm text-gray-500",children:"验证提示"}),(0,r.jsx)("input",{type:"text",name:"verificationInfoGuide",value:g.verificationInfoGuide,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md p-2 bg-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-left mb-1 text-sm text-gray-500",children:"奖励地址数"}),(0,r.jsx)("input",{type:"number",name:"rewardAddressCount",value:g.rewardAddressCount,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md p-2  bg-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-left mb-1 text-sm text-gray-500",children:"最大质押"}),(0,r.jsx)("input",{type:"number",name:"maxStake",value:g.maxStake,onChange:v,placeholder:"0 或不填表示不限",className:"mt-1 block w-full border border-gray-300 rounded-md p-2  bg-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-left mb-1 text-sm text-gray-500",children:"白名单"}),(0,r.jsx)("input",{type:"text",name:"whiteList",value:g.whiteList,onChange:v,placeholder:"不填为不限，或多个地址用逗号分隔",className:"mt-1 block w-full border border-gray-300 rounded-md p-2 bg-white"})]}),(0,r.jsx)(c.z,{onClick:p,disabled:n||u,className:"mt-4 w-full py-2 px-4 rounded-md ".concat(n||u?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"," text-white"),children:n||u?"提交中...":"提交"}),(0,r.jsx)("p",{className:"text-gray-500 text-sm",children:"发起后，会自动推举该行动到当前投票轮的行动列表 / 本轮已推举或提交过"})]}),b&&(0,r.jsx)("div",{className:"text-red-500 text-center",children:b.message})]})]})}},21803:function(e,t,n){"use strict";function r(e,t){let[n,r="0"]=e.split("."),s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${r}`))&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>t){let[e,s,i]=[r.slice(0,t-1),r.slice(t-1,t),r.slice(t)],a=Math.round(Number(`${s}.${i}`));(r=a>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${a}`).length>t&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,t)}else r=r.padEnd(t,"0");return BigInt(`${s?"-":""}${n}${r}`)}n.d(t,{v:function(){return r}})}},function(e){e.O(0,[9689,8424,7140,2888,9774,179],function(){return e(e.s=41081)}),_N_E=e.O()}]);