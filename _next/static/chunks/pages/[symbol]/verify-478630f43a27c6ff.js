(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2271],{97852:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[symbol]/verify",function(){return t(91084)}])},74089:function(e,n,t){"use strict";var s=t(85893),r=t(67294),l=t(91529);n.Z=e=>{let{initialTimeLeft:n}=e,[t,c]=(0,r.useState)(n);(0,r.useEffect)(()=>{if(n<=0)return;c(n);let e=setInterval(()=>{c(n=>n<=1?(clearInterval(e),window.location.reload(),0):n-1)},1e3);return()=>{clearInterval(e)}},[n]);let i=(0,l.ZC)(t);return(0,s.jsx)(s.Fragment,{children:i})}},91318:function(e,n,t){"use strict";var s=t(85893);n.Z=()=>(0,s.jsx)("span",{className:"flex justify-center items-center",children:(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]})})},7191:function(e,n,t){"use strict";var s=t(85893);t(67294);var r=t(3125),l=t(74089);n.Z=e=>{let{currentRound:n,roundName:t}=e,{data:c}=(0,r.O)(),i=Number("100")||0,a=Number("12")||0,o=c?i-Number(c)%i:0;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("h1",{className:"text-base text-center font-bold",children:[t,"（第 ",(0,s.jsx)("span",{className:"text-red-500",children:Number(null!=n?n:0n)})," 轮）"]}),(0,s.jsxs)("span",{className:"text-sm text-gray-400 mt-1 pt-0",children:["本轮剩余：",(0,s.jsx)(l.Z,{initialTimeLeft:o>0?o*a:0})]})]})}},18308:function(e,n,t){"use strict";var s=t(85893),r=t(67294),l=t(92321),c=t(27245),i=t(41664),a=t.n(i),o=t(7080),d=t(87250),u=t(93778),x=t(91529),m=t(91318),h=t(7191);n.Z=e=>{let{currentRound:n,showBtn:t=!0}=e,{token:i}=(0,r.useContext)(u.M)||{},{address:f}=(0,l.m)(),{votesNumByAccount:g,isPending:j,error:N}=(0,o.VI)(null==i?void 0:i.address,n,f||""),{scoreByVerifier:b,isPending:y,error:p}=(0,d.w3)(null==i?void 0:i.address,n,f||""),v=j||y?BigInt(0):g-b;return i?(0,s.jsxs)("div",{className:"flex flex-col items-center bg-white py-4",children:[(0,s.jsx)(h.Z,{currentRound:n,roundName:"验证轮"}),(0,s.jsxs)("div",{className:"flex w-full justify-center space-x-20 my-4",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"我的已投验证票"}),(0,s.jsx)("span",{className:"text-2xl font-bold text-orange-400",children:y?(0,s.jsx)(m.Z,{}):(0,x.LH)(b||BigInt(0))})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"我的剩余验证票"}),(0,s.jsx)("span",{className:"text-2xl font-bold text-orange-400",children:j||y?(0,s.jsx)(m.Z,{}):(0,x.LH)(v)})]})]}),t&&(j||y?(0,s.jsx)(m.Z,{}):g>b?(0,s.jsx)(a(),{href:"/".concat(i.symbol,"/verify"),className:"w-1/2",children:(0,s.jsx)(c.z,{className:"w-full bg-blue-600 hover:bg-blue-700",children:"去验证"})}):(0,s.jsx)("span",{className:"text-gray-500 text-sm",children:"无剩余验证票"}))]}):""}},91084:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return f}});var s=t(85893),r=t(35337),l=t(87250),c=t(18308),i=t(67294),a=t(41664),o=t.n(a),d=t(7080),u=t(94782),x=t(93778),m=t(91318),h=e=>{let{currentRound:n}=e,{token:t}=(0,i.useContext)(x.M)||{},{actionIds:r,votes:l,isPending:c,error:a}=(0,d.$S)((null==t?void 0:t.address)||"",n),{actionInfos:h,isPending:f,error:g}=(0,u.fT)((null==t?void 0:t.address)||"",r||[]);return c||r&&r.length>0&&f?(0,s.jsx)("div",{className:"p-4 flex justify-center items-center",children:(0,s.jsx)(m.Z,{})}):a||g?(console.log("errorVotesNums",a),console.log("errorActionInfosByIds",g),(0,s.jsx)("div",{children:"加载出错，请稍后再试。"})):t?(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h2",{className:"text-sm font-bold mb-4 text-gray-600",children:"待验证行动"}),(0,s.jsx)("div",{className:"space-y-4",children:null==h?void 0:h.map((e,n)=>(0,s.jsx)("div",{className:"bg-white p-4 rounded-lg mb-4",children:(0,s.jsxs)(o(),{href:"/".concat(t.symbol,"/verify/").concat(e.head.id),children:[(0,s.jsxs)("div",{className:"font-semibold mb-2",children:[(0,s.jsx)("span",{className:"text-gray-400 text-base mr-1",children:"No.".concat(e.head.id)}),(0,s.jsx)("span",{className:"text-gray-800 text-lg",children:"".concat(e.body.action)})]}),(0,s.jsx)("p",{className:"leading-tight",children:e.body.consensus})]},e.head.id)},e.head.id))})]}):(0,s.jsx)(m.Z,{})},f=()=>{let{currentRound:e}=(0,l.Bk)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,{title:"社区首页"}),(0,s.jsxs)("main",{className:"flex-grow",children:[(0,s.jsx)(c.Z,{currentRound:e,showBtn:!1}),(0,s.jsx)(h,{currentRound:e})]})]})}},21803:function(e,n,t){"use strict";function s(e,n){let[t,s="0"]=e.split("."),r=t.startsWith("-");if(r&&(t=t.slice(1)),s=s.replace(/(0+)$/,""),0===n)1===Math.round(Number(`.${s}`))&&(t=`${BigInt(t)+1n}`),s="";else if(s.length>n){let[e,r,l]=[s.slice(0,n-1),s.slice(n-1,n),s.slice(n)],c=Math.round(Number(`${r}.${l}`));(s=c>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${c}`).length>n&&(s=s.slice(1),t=`${BigInt(t)+1n}`),s=s.slice(0,n)}else s=s.padEnd(n,"0");return BigInt(`${r?"-":""}${t}${s}`)}t.d(n,{v:function(){return s}})},3125:function(e,n,t){"use strict";t.d(n,{O:function(){return x}});var s=t(30202),r=t(97712),l=t(81946),c=t(36100),i=t(82451),a=t(82002),o=t(37122),d=t(65185),u=t(67294);function x(e={}){let{query:n={},watch:t}=e,x=(0,o.Z)(e),m=(0,s.NL)(),h=(0,a.x)({config:x}),f=e.chainId??h,g=function(e,n={}){return{gcTime:0,async queryFn({queryKey:n}){let{scopeKey:t,...s}=n[1];return await function(e,n={}){let{chainId:t,...s}=n,c=e.getClient({chainId:t});return(0,l.s)(c,r.z,"getBlockNumber")(s)}(e,s)??null},queryKey:function(e={}){return["blockNumber",(0,c.OP)(e)]}(n)}}(x,{...e,chainId:f});return!function(e={}){let{enabled:n=!0,onBlockNumber:t,config:s,...r}=e,c=(0,o.Z)(e),i=(0,a.x)({config:c}),x=e.chainId??i;(0,u.useEffect)(()=>{if(n&&t)return function(e,n){let t,s;let{syncConnectedChain:r=e._internal.syncConnectedChain,...c}=n,i=n=>{t&&t();let s=e.getClient({chainId:n});return t=(0,l.s)(s,d.q,"watchBlockNumber")(c)},a=i(n.chainId);return r&&!n.chainId&&(s=e.subscribe(({chainId:e})=>e,async e=>i(e))),()=>{a?.(),s?.()}}(c,{...r,chainId:x,onBlockNumber:t})},[x,c,n,t,r.onError,r.emitMissed,r.emitOnBegin,r.poll,r.pollingInterval,r.syncConnectedChain])}({...{config:e.config,chainId:e.chainId,..."object"==typeof t?t:{}},enabled:!!((n.enabled??!0)&&("object"==typeof t?t.enabled:t)),onBlockNumber(e){m.setQueryData(g.queryKey,e)}}),(0,i.aM)({...n,...g})}}},function(e){e.O(0,[9689,8424,7140,5714,7250,2888,9774,179],function(){return e(e.s=97852)}),_N_E=e.O()}]);