(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{48312:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(67246)}])},27460:function(e,s,n){"use strict";var t=n(85893),l=n(86501),r=n(74855),a=n(45356),i=n(91529);s.Z=e=>{let{address:s,showCopyButton:n=!0}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:(0,i.Vu)(s)}),n&&(0,t.jsx)(r.CopyToClipboard,{text:s,onCopy:(e,s)=>{s?l.ZP.success("复制成功"):l.ZP.error("复制失败")},children:(0,t.jsx)("button",{className:"",onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,t.jsx)(a.Z,{className:"h-4 w-4 text-xs text-gray-500"})})})]})}},68789:function(e,s,n){"use strict";var t=n(85893),l=n(67294),r=n(41664),a=n.n(r),i=n(27460),c=n(93778);s.Z=e=>{let{showGovernanceLink:s=!1}=e,n=(0,l.useContext)(c.M);if(!n||!n.token)return(0,t.jsx)("div",{className:"text-center text-error",children:"Token information is not available."});let{token:r}=n;return(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(0,t.jsx)("div",{className:"mr-2",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"font-bold text-2xl text-yellow-500",children:"$"}),(0,t.jsx)("span",{className:"font-bold text-2xl mr-2",children:r.symbol}),(0,t.jsx)(i.Z,{address:r.address})]})}),s&&(0,t.jsx)(a(),{href:"/gov",className:"text-blue-400 text-sm hover:underline ml-auto",children:"参与治理>>"})]})}},68736:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return y}});var t=n(85893),l=n(35337),r=n(5028),a=n(67294),i=n(83888),c=n(69205),d=n(19638),x=n(68789),o=n(93778),m=n(91529),u=n(91318);function h(){let{token:e}=(0,a.useContext)(o.M)||{},{totalSupply:s,isPending:n,error:l}=(0,d.A5)((null==e?void 0:e.address)||""),[r,h]=(0,a.useState)(!1);return(null==e?void 0:e.address)?(0,t.jsxs)("div",{className:"p-6 bg-base-100 border-t border-gray-100 mb-4",children:[(0,t.jsx)(x.Z,{showGovernanceLink:!0}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("div",{className:"mr-2",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"已铸币量: "}),(0,t.jsx)("span",{className:"text-lg font-semibold text-orange-400",children:n?(0,t.jsx)(u.Z,{}):(0,m.LH)(s||0n)})]}),(0,t.jsx)(i.Z,{title:"铸币上限 ".concat(1e10.toLocaleString()),open:r,onClose:()=>{h(!1)},disableHoverListener:!0,disableFocusListener:!0,disableTouchListener:!0,children:(0,t.jsx)("button",{className:"btn btn-circle btn-ghost btn-xs text-gray-400",onClick:()=>{h(e=>!e)},children:(0,t.jsx)(c.Z,{})})})]})]}):(0,t.jsx)("div",{children:"Loading token information..."})}var j=n(7399),N=e=>{let{currentRound:s}=e,{token:n}=(0,a.useContext)(o.M)||{},{rewardAvailable:l,isPending:i,error:c}=(0,j.CY)((null==n?void 0:n.address)||""),{joinedAmount:d,isPending:x,error:h}=(0,r.fP)((null==n?void 0:n.address)||"",s);return(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-4 p-6 bg-base-100",children:[(0,t.jsxs)("h1",{className:"text-base text-center",children:["行动轮（第 ",(0,t.jsx)("span",{className:"text-red-500",children:Number(null!=s?s:0n)})," 轮）"]}),(0,t.jsxs)("div",{className:"flex w-full justify-center space-x-20",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"预计新增铸币"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-orange-400",children:i||void 0===l?(0,t.jsx)(u.Z,{}):(0,m.LH)(99n*l/10000n)})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"参与行动代币"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-orange-400",children:x?(0,t.jsx)(u.Z,{}):(0,m.LH)(d||BigInt(0))})]})]})]})},f=n(41664),v=n.n(f),b=n(45551),g=n(94782),p=e=>{let{currentRound:s}=e,{token:n}=(0,a.useContext)(o.M)||{},{actions:l,isPending:r,error:i}=(0,b.jA)((null==n?void 0:n.address)||"",s);null==l||l.sort((e,s)=>Number(e.actionId)-Number(s.actionId));let c=null==l?void 0:l.map(e=>e.actionId),d=(null==l?void 0:l.reduce((e,s)=>e+s.votesNum,0n))||0n,{actionInfos:x,isPending:h,error:j}=(0,g.fT)((null==n?void 0:n.address)||"",c||[]);return r||c&&c.length>0&&h?(0,t.jsx)("div",{className:"p-4 flex justify-center items-center",children:(0,t.jsx)(u.Z,{})}):i||j?(0,t.jsx)("div",{children:"加载出错，请稍后再试。"}):(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h2",{className:"text-sm font-bold mb-4 text-gray-600",children:"行动列表 (行动轮)"}),(null==c?void 0:c.length)?(0,t.jsx)("div",{className:"space-y-4",children:null==x?void 0:x.map((e,s)=>(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg mb-4",children:(0,t.jsxs)(v(),{href:"/action/".concat(e.head.id,"?type=join"),children:[(0,t.jsxs)("div",{className:"font-semibold mb-2",children:[(0,t.jsx)("span",{className:"text-gray-400 text-base mr-1",children:"No.".concat(e.head.id)}),(0,t.jsx)("span",{className:"text-gray-800 text-lg",children:"".concat(e.body.action)})]}),(0,t.jsx)("p",{className:"leading-tight",children:e.body.consensus}),(0,t.jsxs)("div",{className:"flex justify-between mt-1",children:[(0,t.jsxs)("span",{className:"text-sm",children:["投票占比 ",(100*Number((null==l?void 0:l[s].votesNum)||0n)/Number(d)).toFixed(1),"%"]}),(0,t.jsxs)("span",{className:"text-sm",children:["已参与行动代币 ",(0,m.LH)((null==l?void 0:l[s].joinedAmount)||0n)]})]})]},e.head.id)},e.head.id))}):(0,t.jsx)("div",{className:"text-sm text-gray-500 text-center",children:"没有行动"})]})},y=()=>{let{currentRound:e}=(0,r.Bk)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Z,{title:"社区首页"}),(0,t.jsxs)("main",{className:"flex-grow",children:[(0,t.jsx)(h,{}),(0,t.jsx)(N,{currentRound:e}),(0,t.jsx)(p,{currentRound:e})]})]})}},67246:function(e,s,n){"use strict";n.r(s);var t=n(85893),l=n(68736);s.default=()=>(0,t.jsx)(l.default,{})}},function(e){e.O(0,[9215,6185,6789,2432,3601,5551,7399,2888,9774,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);