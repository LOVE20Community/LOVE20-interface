(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6700],{54889:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gov",function(){return s(7263)}])},98082:function(e,t,s){"use strict";s.d(t,{Cd:function(){return c},X:function(){return o},bZ:function(){return d}});var n=s(85893),a=s(67294),r=s(12003),i=s(40108);let l=(0,r.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,...r}=e;return(0,n.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(l({variant:a}),s),...r})});d.displayName="Alert";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",s),...a})});c.displayName="AlertTitle";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",s),...a})});o.displayName="AlertDescription"},53696:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var n=s(85893),a=s(67294),r=s(23432);let i=(0,s(31134).Z)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var l=s(92321),d=s(32209),c=s(86501);function o(e){let{tokenAddress:t,tokenSymbol:s,tokenDecimals:o,tokenImage:u}=e,[p,m]=(0,a.useState)(!1),{isConnected:x}=(0,l.m)(),{data:y}=(0,d.p)(),v=async()=>{if(!x){alert("请先连接你的钱包");return}m(!0);try{if(!y){alert("无法获取钱包客户端");return}await y.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:t,symbol:s,decimals:o,image:u}}})?(console.log("代币已添加到 MetaMask 钱包"),c.ZP.success("代币已成功添加到 MetaMask 钱包")):(console.log("用户拒绝添加代币"),c.ZP.error("用户拒绝添加代币"))}catch(e){console.error("添加代币失败:",e),c.ZP.error("添加代币失败，请检查控制台以获取更多信息")}finally{m(!1)}};return(0,n.jsx)("button",{onClick:v,disabled:p,className:"flex items-center justify-center p-1 rounded hover:bg-gray-200 focus:outline-none",children:p?(0,n.jsx)(r.Z,{className:"h-4 w-4 animate-spin"}):(0,n.jsx)(i,{className:"h-4 w-4 text-greyscale-500"})})}},27460:function(e,t,s){"use strict";var n=s(85893),a=s(86501),r=s(74855),i=s(18289),l=s(91529);t.Z=e=>{let{address:t,showCopyButton:s=!0,showAddress:d=!0,colorClassName:c=""}=e;return(0,n.jsxs)("span",{className:"flex items-center space-x-2",children:[d&&(0,n.jsx)("span",{className:"text-xs ".concat(null!=c?c:"text-greyscale-500"),children:(0,l.Vu)(t)}),s&&(0,n.jsx)(r.CopyToClipboard,{text:t,onCopy:(e,t)=>{t?a.ZP.success("复制成功"):a.ZP.error("复制失败")},children:(0,n.jsx)("button",{className:"flex items-center justify-center p-1 rounded hover:bg-gray-200 focus:outline-none",onClick:e=>{e.preventDefault(),e.stopPropagation()},"aria-label":"复制地址",children:(0,n.jsx)(i.Z,{className:"h-4 w-4 ".concat(null!=c?c:"text-greyscale-500")})})})]})}},74089:function(e,t,s){"use strict";var n=s(85893),a=s(67294);t.Z=e=>{let{initialTimeLeft:t}=e,[s,r]=(0,a.useState)(t);(0,a.useEffect)(()=>{if(t<=0)return;r(t);let e=setInterval(()=>{r(t=>t<=1?(clearInterval(e),window.location.reload(),0):t-1)},1e3);return()=>{clearInterval(e)}},[t]);let i=Math.floor(s/86400);return(0,n.jsxs)("div",{className:"inline-flex gap-1  text-secondary",children:[i>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"countdown font-mono",children:(0,n.jsx)("span",{style:{"--value":i}})}),"天"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"countdown font-mono",children:(0,n.jsx)("span",{style:{"--value":Math.floor(s%86400/3600)}})}),"时"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"countdown font-mono",children:(0,n.jsx)("span",{style:{"--value":Math.floor(s%3600/60)}})}),"分"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"countdown font-mono",children:(0,n.jsx)("span",{style:{"--value":s%60}})}),"秒"]})]})}},7191:function(e,t,s){"use strict";var n=s(85893);s(67294);var a=s(42757),r=s(74089);t.Z=e=>{let{currentRound:t,roundName:s}=e,{data:i}=(0,a.O)(),l=Number("100")||0,d=Number("12")||0,c=i?l-Number(i)%l:0;return(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsxs)("h1",{className:"text-lg font-bold",children:[s," 第 ",(0,n.jsx)("span",{className:"text-secondary",children:Number(null!=t?t:0n)})," 轮"]}),(0,n.jsxs)("span",{className:"text-sm text-greyscale-400 mt-1 pt-0",children:["本轮剩余：",(0,n.jsx)(r.Z,{initialTimeLeft:c>0?c*d:0})]})]})}},58732:function(e,t,s){"use strict";var n=s(85893),a=s(9008),r=s.n(a);s(67294);var i=s(98082),l=s(68655),d=s(3294),c=s(78167),o=s(92321);t.Z=e=>{let{title:t}=e,{address:s,chain:a}=(0,o.m)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r(),{children:[(0,n.jsx)("title",{children:"".concat(t," - LIFE20")}),(0,n.jsx)("meta",{name:"".concat(t," - LIFE20"),content:"A Web3 DApp for Life20 token management"})]}),(0,n.jsxs)("header",{className:"flex justify-between items-center py-2 px-4",children:[(0,n.jsx)(c.vP,{className:"-ml-1"}),(0,n.jsx)(d.NL,{})]}),s&&!a&&(0,n.jsx)("div",{className:"p-6",children:(0,n.jsxs)(i.bZ,{variant:"destructive",children:[(0,n.jsx)(l.Z,{className:"h-4 w-4"}),(0,n.jsx)(i.Cd,{children:s?"钱包网络错误":"未连接钱包"}),(0,n.jsx)(i.X,{children:s?"请切换到 ".concat("sepolia"," 网络"):"请先连接钱包，再进行操作"})]})})]})}},37122:function(e,t,s){"use strict";var n=s(85893),a=s(67294),r=s(92321),i=s(27245),l=s(41664),d=s.n(l),c=s(91529),o=s(93778),u=s(7080),p=s(87250),m=s(42083),x=s(64777);t.Z=e=>{let{currentRound:t,showBtn:s=!0}=e,{token:l}=(0,a.useContext)(o.M)||{},{address:y}=(0,r.m)(),{votesNumByAccount:v,isPending:f,error:j}=(0,u.VI)(null==l?void 0:l.address,t,y||""),{scoreByVerifier:h,isPending:b,error:N}=(0,p.w3)(null==l?void 0:l.address,t,y||""),g=f||b?BigInt(0):v-h;return l?(0,n.jsxs)("div",{className:"flex-col items-center px-6 pt-6 pb-2",children:[(0,n.jsx)(x.Z,{title:"我的验证"}),(0,n.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"已验证票数"}),(0,n.jsx)("div",{className:"stat-value text-xl",children:f?(0,n.jsx)(m.Z,{}):(0,c.LH)(h||BigInt(0))})]}),(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"未验证票数"}),(0,n.jsx)("div",{className:"stat-value text-xl",children:f||b?(0,n.jsx)(m.Z,{}):(0,c.LH)(g)})]})]}),s&&(0,n.jsx)("div",{className:"flex justify-center",children:f||b?(0,n.jsx)(m.Z,{}):v>h?(0,n.jsx)(i.z,{className:"w-1/2",children:(0,n.jsx)(d(),{href:"/verify?symbol=".concat(l.symbol),children:"去验证"})}):(0,n.jsx)(i.z,{disabled:!0,className:"w-1/2",children:h>0?"已验证":"未投票，无需验证"})})]}):""}},66247:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var n=s(85893),a=s(67294),r=s(93778),i=s(19638),l=s(42083),d=s(27460),c=s(53696),o=e=>{let{}=e,{token:t}=(0,a.useContext)(r.M)||{};return t?(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)("div",{className:"mr-2",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"font-bold text-2xl mr-2",children:t.symbol}),(0,n.jsx)(d.Z,{address:t.address}),(0,n.jsx)(c.Z,{tokenAddress:t.address,tokenSymbol:t.symbol||"",tokenDecimals:t.decimals||0})]})})}):(0,n.jsx)(l.Z,{})};function u(){let{token:e}=(0,a.useContext)(r.M)||{},{totalSupply:t,isPending:s,error:d}=(0,i.A5)((null==e?void 0:e.address)||""),[c,u]=(0,a.useState)(!1);return(null==e?void 0:e.address)?(0,n.jsxs)("div",{className:"px-6 pt-2 pb-6",children:[(0,n.jsx)(o,{}),!1]}):(0,n.jsx)(l.Z,{})}},77156:function(e,t,s){"use strict";s.d(t,{A5:function(){return r}});var n=s(89810);let a=[{type:"constructor",inputs:[{name:"mintableAddress_",type:"address",internalType:"address"},{name:"tokenAddress_",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"function",name:"allowance",inputs:[{name:"owner",type:"address",internalType:"address"},{name:"spender",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"approve",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"burn",inputs:[{name:"to",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"decimals",inputs:[],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{type:"function",name:"mint",inputs:[{name:"to",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"mintableAddress",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"name",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"reserve",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"symbol",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"tokenAddress",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"transfer",inputs:[{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"event",name:"Approval",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"},{name:"spender",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"error",name:"ERC20InsufficientAllowance",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"allowance",type:"uint256",internalType:"uint256"},{name:"needed",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ERC20InsufficientBalance",inputs:[{name:"sender",type:"address",internalType:"address"},{name:"balance",type:"uint256",internalType:"uint256"},{name:"needed",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ERC20InvalidApprover",inputs:[{name:"approver",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidReceiver",inputs:[{name:"receiver",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidSender",inputs:[{name:"sender",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidSpender",inputs:[{name:"spender",type:"address",internalType:"address"}]}],r=e=>{let{data:t,isPending:s,error:r}=(0,n.u)({address:e,abi:a,functionName:"totalSupply",args:[]});return{totalSupply:t,isPending:s,error:r}}},7263:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var n=s(85893),a=s(58732),r=s(7080),i=s(67294),l=s(92180),d=s(77156),c=s(93778),o=s(91529),u=s(42083),p=s(7191),m=e=>{let{currentRound:t}=e,{token:s}=(0,i.useContext)(c.M)||{},{govVotesNum:a,isPending:r}=(0,l.kc)(null==s?void 0:s.address),{totalSupply:m,isPending:x}=(0,d.A5)(null==s?void 0:s.stTokenAddress);return(0,n.jsxs)("div",{className:"px-6 pb-6",children:[(0,n.jsx)(p.Z,{currentRound:t,roundName:"投票轮"}),(0,n.jsxs)("div",{className:"stats border w-full grid grid-cols-2 divide-x-0",children:[(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title",children:"总治理票"}),(0,n.jsx)("div",{className:"stat-value text-2xl",children:r?(0,n.jsx)(u.Z,{}):(0,o.LH)(a||BigInt(0))})]}),(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title",children:"代币质押量"}),(0,n.jsx)("div",{className:"stat-value text-2xl",children:x?(0,n.jsx)(u.Z,{}):(0,o.LH)(m||BigInt(0))})]})]})]})},x=s(92321),y=s(27245),v=s(41664),f=s.n(v),j=s(64777),h=()=>{let{token:e}=(0,i.useContext)(c.M)||{},{address:t}=(0,x.m)(),{govVotes:s,stAmount:a,isPending:r,error:d}=(0,l.L)((null==e?void 0:e.address)||"",t||"");return e?(d&&console.log("errorAccountStakeStatus",d),(0,n.jsxs)("div",{className:"flex-col items-center px-6 py-2",children:[(0,n.jsx)(j.Z,{title:"我的质押"}),(0,n.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"我的治理票数"}),(0,n.jsx)("div",{className:"stat-value text-xl",children:r?(0,n.jsx)(u.Z,{}):(0,o.LH)(s||BigInt(0))}),(0,n.jsx)("div",{className:"stat-actions",children:(0,n.jsx)(y.z,{variant:"outline",size:"sm",className:"text-secondary border-secondary",children:(0,n.jsx)(f(),{href:"/gov/stakelp?symbol=".concat(e.symbol),children:"去获取"})})})]}),(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"我的质押代币数"}),(0,n.jsx)("div",{className:"stat-value text-xl",children:r?(0,n.jsx)(u.Z,{}):(0,o.LH)(a||BigInt(0))}),(0,n.jsx)("div",{className:"stat-actions",children:(0,n.jsx)(y.z,{variant:"outline",size:"sm",className:"text-secondary border-secondary",children:(0,n.jsx)(f(),{href:"/gov/staketoken?symbol=".concat(e.symbol),children:"去质押"})})})]})]})]})):""},b=e=>{let{currentRound:t}=e,{token:s}=(0,i.useContext)(c.M)||{},{address:a}=(0,x.m)(),{validGovVotes:d,isPending:p,error:m}=(0,l.Ty)((null==s?void 0:s.address)||"",a||""),{votesNumByAccount:v,isPending:h,error:b}=(0,r.VI)((null==s?void 0:s.address)||"",t,a||"");return s?(m&&console.log("errorValidGovVotes",m),b&&console.log("errorVotesNumByAccount",b),(0,n.jsxs)("div",{className:"flex-col items-center px-6 py-2",children:[(0,n.jsx)(j.Z,{title:"我的投票"}),(0,n.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"我的已投票数"}),(0,n.jsx)("div",{className:"stat-value text-xl",children:h?(0,n.jsx)(u.Z,{}):(0,o.LH)(v||BigInt(0))})]}),(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"我的剩余票数"}),(0,n.jsx)("div",{className:"stat-value text-xl",children:p||h?(0,n.jsx)(u.Z,{}):(0,o.LH)(d-v||BigInt(0))})]})]}),(0,n.jsx)("div",{className:"flex justify-center",children:p||h?(0,n.jsx)(u.Z,{}):d>v?(0,n.jsx)(y.z,{className:"w-1/2",children:(0,n.jsx)(f(),{href:"/vote?symbol=".concat(s.symbol),children:"去投票"})}):(0,n.jsx)(y.z,{disabled:!0,className:"w-1/2",children:d>0?"已投票":"无治理票，不能投票"})})]})):""},N=s(37122),g=s(66247),w=()=>{let{currentRound:e}=(0,r.Bk)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Z,{title:"治理首页"}),(0,n.jsxs)("main",{className:"flex-grow",children:[(0,n.jsx)(g.Z,{}),(0,n.jsx)(m,{currentRound:e}),(0,n.jsx)(h,{}),(0,n.jsx)(b,{currentRound:e}),(0,n.jsx)(N.Z,{currentRound:e>2?e-2n:0n})]})]})}},42757:function(e,t,s){"use strict";s.d(t,{O:function(){return u}});var n=s(30202),a=s(97712),r=s(81946),i=s(36100),l=s(45631),d=s(82002),c=s(80666),o=s(97861);function u(e={}){let{query:t={},watch:s}=e,u=(0,c.Z)(e),p=(0,n.NL)(),m=(0,d.x)({config:u}),x=e.chainId??m,y=function(e,t={}){return{gcTime:0,async queryFn({queryKey:t}){let{scopeKey:s,...n}=t[1];return await function(e,t={}){let{chainId:s,...n}=t,i=e.getClient({chainId:s});return(0,r.s)(i,a.z,"getBlockNumber")(n)}(e,n)??null},queryKey:function(e={}){return["blockNumber",(0,i.OP)(e)]}(t)}}(u,{...e,chainId:x});return(0,o.x)({...{config:e.config,chainId:e.chainId,..."object"==typeof s?s:{}},enabled:!!((t.enabled??!0)&&("object"==typeof s?s.enabled:s)),onBlockNumber(e){p.setQueryData(y.queryKey,e)}}),(0,l.aM)({...t,...y})}},97861:function(e,t,s){"use strict";s.d(t,{x:function(){return d}});var n=s(65185),a=s(81946),r=s(67294),i=s(82002),l=s(80666);function d(e={}){let{enabled:t=!0,onBlockNumber:s,config:d,...c}=e,o=(0,l.Z)(e),u=(0,i.x)({config:o}),p=e.chainId??u;(0,r.useEffect)(()=>{if(t&&s)return function(e,t){let s,r;let{syncConnectedChain:i=e._internal.syncConnectedChain,...l}=t,d=t=>{s&&s();let r=e.getClient({chainId:t});return s=(0,a.s)(r,n.q,"watchBlockNumber")(l)},c=d(t.chainId);return i&&!t.chainId&&(r=e.subscribe(({chainId:e})=>e,async e=>d(e))),()=>{c?.(),r?.()}}(o,{...c,chainId:p,onBlockNumber:s})},[p,o,t,s,c.onError,c.emitMissed,c.emitOnBegin,c.poll,c.pollingInterval,c.syncConnectedChain])}}},function(e){e.O(0,[1664,530,2209,4637,2180,7295,7250,2888,9774,179],function(){return e(e.s=54889)}),_N_E=e.O()}]);