(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9236],{89245:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my",function(){return t(14260)}])},34680:function(e,s,t){"use strict";t.d(s,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return n},aY:function(){return o},eW:function(){return x},ll:function(){return d}});var l=t(85893),a=t(67294),r=t(40108);let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});n.displayName="Card";let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",t),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});d.displayName="CardTitle";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",t),...a})});c.displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",t),...a})});o.displayName="CardContent";let x=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",t),...a})});x.displayName="CardFooter"},34426:function(e,s,t){"use strict";t.d(s,{Z:function(){return o}});var l=t(85893),a=t(67294),r=t(23432),n=t(93461),i=t(92321),d=t(89469),c=t(86501);function o(e){let{tokenAddress:s,tokenSymbol:t,tokenDecimals:o,tokenImage:x}=e,[m,u]=(0,a.useState)(!1),{isConnected:j}=(0,i.m)(),{data:h}=(0,d.p)(),v=async()=>{if(!j){alert("请先连接你的钱包");return}u(!0);try{if(!h){alert("无法获取钱包客户端");return}await h.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:s,symbol:t,decimals:o,image:x}}})?(console.log("代币已添加到 MetaMask 钱包"),c.ZP.success("代币已成功添加到 MetaMask 钱包")):(console.log("用户拒绝添加代币"),c.ZP.error("用户拒绝添加代币"))}catch(e){console.error("添加代币失败:",e),c.ZP.error("添加代币失败，请检查控制台以获取更多信息")}finally{u(!1)}};return(0,l.jsx)("button",{onClick:v,disabled:m,className:"flex items-center justify-center p-1 rounded hover:bg-gray-200 focus:outline-none",children:m?(0,l.jsx)(r.Z,{className:"h-4 w-4 animate-spin"}):(0,l.jsx)(n.Z,{className:"h-4 w-4 text-greyscale-500"})})}},42083:function(e,s,t){"use strict";var l=t(85893);s.Z=()=>(0,l.jsx)("span",{className:"flex justify-center items-center",children:(0,l.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3 text-greyscale-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]})})},14260:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return k}});var l=t(85893),a=t(58732),r=t(92321),n=t(67294),i=t(27245),d=t(41664),c=t.n(d),o=t(93778),x=t(19638),m=t(5028),u=t(91529),j=t(42083),h=t(64777),v=()=>{let{token:e}=(0,n.useContext)(o.M)||{},{address:s}=(0,r.m)(),{balance:t,isPending:a,error:d}=(0,x.hS)(null==e?void 0:e.address,s),{stakedAmount:v,isPending:f,error:N}=(0,m.Mn)(null==e?void 0:e.address,s);return d?(console.log("errorBalance",d),(0,l.jsxs)("div",{children:["错误: ",d.message]})):N?(console.log("errorStakedAmount",N),(0,l.jsxs)("div",{children:["错误: ",N.message]})):e?(0,l.jsxs)("div",{className:"flex-col items-center px-6 py-2",children:[(0,l.jsx)(h.Z,{title:"我的代币"}),(0,l.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,l.jsxs)("div",{className:"stat place-items-center",children:[(0,l.jsxs)("div",{className:"stat-title text-sm",children:["所有 ",null==e?void 0:e.symbol]}),(0,l.jsx)("div",{className:"stat-value text-xl",children:a?(0,l.jsx)(j.Z,{}):(0,u.LH)(t||BigInt(0))})]}),(0,l.jsxs)("div",{className:"stat place-items-center",children:[(0,l.jsxs)("div",{className:"stat-title text-sm",children:["行动锁定 ",null==e?void 0:e.symbol]}),(0,l.jsx)("div",{className:"stat-value text-xl",children:f?(0,l.jsx)(j.Z,{}):(0,u.LH)(v||BigInt(0))})]})]}),(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)(i.z,{variant:"outline",size:"sm",className:"mt-2 w-1/2 text-secondary border-secondary",asChild:!0,children:(0,l.jsx)(c(),{href:"/dex/swap?symbol=".concat(e.symbol),children:"去交易"})})})]}):(0,l.jsx)(j.Z,{})},f=t(92180),N=t(34426),p=t(27460),y=()=>{let{token:e}=(0,n.useContext)(o.M)||{},{address:s}=(0,r.m)(),{slAmount:t,stAmount:a,promisedWaitingRounds:d,requestedUnstakeRound:x,govVotes:m,isPending:v,error:y}=(0,f.L)(null==e?void 0:e.address,s);return e?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex-col items-center px-6 pt-6 pb-2",children:[(0,l.jsx)(h.Z,{title:"参与治理的资产"}),(0,l.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,l.jsxs)("div",{className:"stat place-items-center",children:[(0,l.jsxs)("div",{className:"stat-title text-sm flex items-center",children:["流动性质押",(0,l.jsx)(p.Z,{address:e.slTokenAddress,showAddress:!1}),(0,l.jsx)(N.Z,{tokenAddress:e.slTokenAddress,tokenSymbol:"sl"+e.symbol,tokenDecimals:e.decimals})]}),(0,l.jsx)("div",{className:"stat-value text-xl",children:v?(0,l.jsx)(j.Z,{}):(0,u.LH)(t||BigInt(0))})]}),(0,l.jsxs)("div",{className:"stat place-items-center",children:[(0,l.jsxs)("div",{className:"stat-title text-sm flex items-center",children:["质押代币",(0,l.jsx)(p.Z,{address:e.stTokenAddress,showAddress:!1}),(0,l.jsx)(N.Z,{tokenAddress:e.stTokenAddress,tokenSymbol:"st"+e.symbol,tokenDecimals:e.decimals})]}),(0,l.jsx)("div",{className:"stat-value text-xl",children:v?(0,l.jsx)(j.Z,{}):(0,u.LH)(a||BigInt(0))})]})]}),(0,l.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,l.jsxs)("div",{className:"stat place-items-center",children:[(0,l.jsx)("div",{className:"stat-title text-sm",children:"承诺释放间隔轮次"}),(0,l.jsx)("div",{className:"stat-value text-xl",children:v?(0,l.jsx)(j.Z,{}):"".concat(d||BigInt(0))})]}),(0,l.jsxs)("div",{className:"stat place-items-center",children:[(0,l.jsx)("div",{className:"stat-title text-sm",children:"治理票数"}),(0,l.jsx)("div",{className:"stat-value text-xl",children:v?(0,l.jsx)(j.Z,{}):(0,u.LH)(m||BigInt(0))})]})]}),(0,l.jsx)("div",{className:"flex w-full justify-center mt-2",children:(0,l.jsx)(i.z,{variant:"outline",size:"sm",className:"w-1/2 text-secondary border-secondary",asChild:!0,children:(0,l.jsx)(c(),{href:"/my/govrewards?symbol=".concat(e.symbol),children:"查看治理奖励"})})})]})}):(0,l.jsx)(j.Z,{})},g=t(34680),w=t(94782),b=t(45551),Z=()=>{let{token:e}=(0,n.useContext)(o.M)||{},{address:s}=(0,r.m)(),{joinedActions:t,isPending:a,error:i}=(0,b.dB)((null==e?void 0:e.address)||"",s),{actionInfos:d,isPending:x,error:m}=(0,w.fT)((null==e?void 0:e.address)||"",(null==t?void 0:t.map(e=>e.actionId))||[]);return a||t&&t.length>0&&x?(0,l.jsx)(j.Z,{}):i?(0,l.jsx)("div",{children:"加载出错，请稍后再试。"}):(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsx)(h.Z,{title:"我参与的行动"}),(null==t?void 0:t.length)?(0,l.jsx)("div",{className:"mt-4 space-y-4",children:null==t?void 0:t.map((s,t)=>{var a,r;return(0,l.jsx)(g.Zb,{className:"shadow-none",children:(0,l.jsxs)(c(),{href:"/my/actrewards?id=".concat(s.actionId,"&symbol=").concat(null==e?void 0:e.symbol),children:[(0,l.jsxs)(g.Ol,{className:"px-3 pt-2 pb-1 flex-row justify-start items-baseline",children:[(0,l.jsx)("span",{className:"text-greyscale-400 text-sm mr-1",children:"No.".concat(s.actionId)}),(0,l.jsx)("span",{className:"font-bold text-greyscale-800",children:"".concat(null==d?void 0:null===(a=d[t])||void 0===a?void 0:a.body.action)})]}),(0,l.jsxs)(g.aY,{className:"px-3 pt-1 pb-2",children:[(0,l.jsx)("div",{className:"text-greyscale-500",children:null==d?void 0:null===(r=d[t])||void 0===r?void 0:r.body.consensus}),(0,l.jsxs)("div",{className:"flex justify-between mt-1 text-sm",children:[(0,l.jsxs)("span",{children:[(0,l.jsx)("span",{className:"text-greyscale-400 mr-1",children:"参与到第"}),(0,l.jsx)("span",{className:"text-secondary",children:s.lastJoinedRound.toString()}),(0,l.jsx)("span",{className:"text-greyscale-400 ml-1",children:"轮"})]}),(0,l.jsxs)("span",{children:[(0,l.jsx)("span",{className:"text-greyscale-400 mr-1",children:"参与代币数"}),(0,l.jsx)("span",{className:"text-secondary",children:(0,u.LH)(s.stakedAmount)})]})]})]})]},s.actionId)},s.actionId)})}):(0,l.jsx)("div",{className:"text-sm text-greyscale-500 text-center",children:"没有行动"}),i&&(0,l.jsx)("div",{children:i.message}),m&&(0,l.jsx)("div",{children:m.message})]})},k=()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.Z,{title:"我的"}),(0,l.jsxs)("main",{className:"flex-grow",children:[(0,l.jsx)(v,{}),(0,l.jsx)(y,{}),(0,l.jsx)(Z,{})]})]})}},function(e){e.O(0,[1664,7221,7548,1502,4637,2180,9871,2888,9774,179],function(){return e(e.s=89245)}),_N_E=e.O()}]);