(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6700],{54889:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gov",function(){return s(7263)}])},98082:function(e,t,s){"use strict";s.d(t,{Cd:function(){return c},X:function(){return u},bZ:function(){return d}});var n=s(85893),a=s(67294),i=s(12003),r=s(40108);let l=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,...i}=e;return(0,n.jsx)("div",{ref:t,role:"alert",className:(0,r.cn)(l({variant:a}),s),...i})});d.displayName="Alert";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("h5",{ref:t,className:(0,r.cn)("mb-1 font-medium leading-none tracking-tight",s),...a})});c.displayName="AlertTitle";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("text-sm [&_p]:leading-relaxed",s),...a})});u.displayName="AlertDescription"},27460:function(e,t,s){"use strict";var n=s(85893),a=s(86501),i=s(74855),r=s(18289),l=s(91529);t.Z=e=>{let{address:t,showCopyButton:s=!0,showAddress:d=!0,colorClassName:c=""}=e;return(0,n.jsxs)("span",{className:"flex items-center space-x-2",children:[d&&(0,n.jsx)("span",{className:"text-xs ".concat(null!=c?c:"text-greyscale-500"),children:(0,l.Vu)(t)}),s&&(0,n.jsx)(i.CopyToClipboard,{text:t,onCopy:(e,t)=>{t?a.ZP.success("复制成功"):a.ZP.error("复制失败")},children:(0,n.jsx)("button",{className:"flex items-center justify-center p-1 rounded hover:bg-gray-200 focus:outline-none",onClick:e=>{e.preventDefault(),e.stopPropagation()},"aria-label":"复制地址",children:(0,n.jsx)(r.Z,{className:"h-4 w-4 ".concat(null!=c?c:"text-greyscale-500")})})})]})}},7191:function(e,t,s){"use strict";var n=s(85893),a=s(67294),i=s(42757),r=s(93778),l=s(74089);t.Z=e=>{let{currentRound:t,roundName:s}=e,{data:d}=(0,i.O)(),{token:c}=(0,a.useContext)(r.M)||{},u=Number("100")||0,p=Number("12")||0,o=d?u-(Number(d)-Number(null==c?void 0:c.voteOriginBlocks))%u:0;return(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsxs)("h1",{className:"text-lg font-bold",children:[s," 第 ",(0,n.jsx)("span",{className:"text-secondary",children:Number(null!=t?t:0n)})," 轮"]}),(0,n.jsxs)("span",{className:"text-sm text-greyscale-400 mt-1 pt-0",children:["本轮剩余：",(0,n.jsx)(l.Z,{initialTimeLeft:o>0?o*p:0})]})]})}},58732:function(e,t,s){"use strict";var n=s(85893),a=s(9008),i=s.n(a);s(67294);var r=s(98082),l=s(68655),d=s(3294),c=s(91907),u=s(92321);t.Z=e=>{let{title:t}=e,{address:s,chain:a}=(0,u.m)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i(),{children:[(0,n.jsx)("title",{children:"".concat(t," - LIFE20")}),(0,n.jsx)("meta",{name:"".concat(t," - LIFE20"),content:"A Web3 DApp for Life20 token management"})]}),(0,n.jsxs)("header",{className:"flex justify-between items-center py-2 px-4",children:[(0,n.jsx)(c.vP,{className:"-ml-1"}),(0,n.jsx)(d.NL,{})]}),s&&!a&&(0,n.jsx)("div",{className:"p-6",children:(0,n.jsxs)(r.bZ,{variant:"destructive",children:[(0,n.jsx)(l.Z,{className:"h-4 w-4"}),(0,n.jsx)(r.Cd,{children:s?"钱包网络错误":"未连接钱包"}),(0,n.jsx)(r.X,{children:s?"请切换到 ".concat("sepolia"," 网络"):"请先连接钱包，再进行操作"})]})})]})}},37122:function(e,t,s){"use strict";var n=s(85893),a=s(67294),i=s(92321),r=s(27245),l=s(41664),d=s.n(l),c=s(91529),u=s(93778),p=s(7080),o=s(87250),m=s(42083),x=s(64777);t.Z=e=>{let{currentRound:t,showBtn:s=!0}=e,{token:l}=(0,a.useContext)(u.M)||{},{address:y}=(0,i.m)(),{votesNumByAccount:v,isPending:j,error:f}=(0,p.VI)(null==l?void 0:l.address,t,y||""),{scoreByVerifier:h,isPending:N,error:b}=(0,o.w3)(null==l?void 0:l.address,t,y||""),g=j||N?BigInt(0):v-h;return l?y?(0,n.jsxs)("div",{className:"flex-col items-center px-6 pt-6 pb-2",children:[(0,n.jsx)(x.Z,{title:"我的验证"}),(0,n.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"已验证票数"}),(0,n.jsx)("div",{className:"stat-value text-xl",children:j?(0,n.jsx)(m.Z,{}):(0,c.LH)(h||BigInt(0))})]}),(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"未验证票数"}),(0,n.jsx)("div",{className:"stat-value text-xl",children:j||N?(0,n.jsx)(m.Z,{}):(0,c.LH)(g)})]})]}),s&&(0,n.jsx)("div",{className:"flex justify-center",children:j||N?(0,n.jsx)(m.Z,{}):v>h?(0,n.jsx)(r.z,{className:"w-1/2",asChild:!0,children:(0,n.jsx)(d(),{href:"/verify?symbol=".concat(l.symbol),children:"去验证"})}):(0,n.jsx)(r.z,{disabled:!0,className:"w-1/2",children:h>0?"已验证":"未投票，无需验证"})})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex-col items-center px-6 pt-6 pb-2",children:[(0,n.jsx)(x.Z,{title:"我的验证"}),(0,n.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"请先连接钱包"})]})}):""}},77156:function(e,t,s){"use strict";s.d(t,{yA:function(){return d},A5:function(){return l}});var n=s(89810),a=s(71366),i=s(83540);let r=[{type:"constructor",inputs:[{name:"mintableAddress_",type:"address",internalType:"address"},{name:"tokenAddress_",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"function",name:"allowance",inputs:[{name:"owner",type:"address",internalType:"address"},{name:"spender",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"approve",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"burn",inputs:[{name:"to",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"decimals",inputs:[],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{type:"function",name:"mint",inputs:[{name:"to",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"mintableAddress",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"name",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"reserve",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"symbol",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"tokenAddress",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"transfer",inputs:[{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"event",name:"Approval",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"},{name:"spender",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"error",name:"ERC20InsufficientAllowance",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"allowance",type:"uint256",internalType:"uint256"},{name:"needed",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ERC20InsufficientBalance",inputs:[{name:"sender",type:"address",internalType:"address"},{name:"balance",type:"uint256",internalType:"uint256"},{name:"needed",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ERC20InvalidApprover",inputs:[{name:"approver",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidReceiver",inputs:[{name:"receiver",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidSender",inputs:[{name:"sender",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidSpender",inputs:[{name:"spender",type:"address",internalType:"address"}]}],l=e=>{let{data:t,isPending:s,error:a}=(0,n.u)({address:e,abi:r,functionName:"totalSupply",args:[]});return{totalSupply:t,isPending:s,error:a}},d=e=>{let{writeContract:t,data:s,isPending:n,error:l}=(0,a.S)(),d=async(s,n)=>{try{await t({address:e,abi:r,functionName:"approve",args:[s,n]})}catch(e){console.error("Approve failed:",e)}},{isLoading:c,isSuccess:u}=(0,i.A)({hash:s});return{approve:d,writeData:s,isPending:n,error:l,isConfirming:c,isConfirmed:u}}},7263:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return T}});var n=s(85893),a=s(58732),i=s(7080),r=s(27245),l=s(41664),d=s.n(l),c=s(67294),u=s(93778),p=s(91529),o=s(92180),m=s(77156),x=s(42083),y=s(7191),v=e=>{let{currentRound:t}=e,{token:s}=(0,c.useContext)(u.M)||{},{govVotesNum:a,isPending:i}=(0,o.kc)(null==s?void 0:s.address),{totalSupply:l,isPending:v}=(0,m.A5)(null==s?void 0:s.stTokenAddress);return(0,n.jsxs)("div",{className:"px-6 pb-2",children:[(0,n.jsx)(y.Z,{currentRound:t,roundName:"投票轮"}),(0,n.jsxs)("div",{className:"border rounded-lg p-0",children:[(0,n.jsxs)("div",{className:"stats  w-full grid grid-cols-2 divide-x-0",children:[(0,n.jsxs)("div",{className:"stat place-items-center pt-3 pb-0 mb-0",children:[(0,n.jsx)("div",{className:"stat-title",children:"总治理票数"}),(0,n.jsx)("div",{className:"stat-value text-2xl",children:i?(0,n.jsx)(x.Z,{}):(0,p.LH)(a||BigInt(0))})]}),(0,n.jsxs)("div",{className:"stat place-items-center pt-3 pb-0 mb-0",children:[(0,n.jsx)("div",{className:"stat-title",children:"质押代币数"}),(0,n.jsx)("div",{className:"stat-value text-2xl",children:v?(0,n.jsx)(x.Z,{}):(0,p.LH)(l||BigInt(0))})]})]}),(0,n.jsx)("div",{className:"w-full flex items-center py-0 mt-0 mb-0",children:(0,n.jsx)(r.z,{variant:"link",size:"sm",className:"w-full text-secondary",asChild:!0,children:(0,n.jsx)(d(),{href:"/gov/liquid?symbol=".concat(null==s?void 0:s.symbol),children:"流动性质押数据"})})})]})]})},j=s(92321),f=s(64777),h=()=>{let{token:e}=(0,c.useContext)(u.M)||{},{address:t}=(0,j.m)(),{govVotes:s,stAmount:a,isPending:i,error:l}=(0,o.L)((null==e?void 0:e.address)||"",t||"");return e?t?(l&&console.log("errorAccountStakeStatus",l),(0,n.jsxs)("div",{className:"flex-col items-center px-6 pt-2 pb-0",children:[(0,n.jsx)(f.Z,{title:"我的质押"}),(0,n.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"我的治理票数"}),(0,n.jsx)("div",{className:"stat-value text-xl",children:i?(0,n.jsx)(x.Z,{}):(0,p.LH)(s||BigInt(0))}),(0,n.jsx)("div",{className:"stat-actions w-full my-0",children:(0,n.jsx)(r.z,{variant:"link",size:"sm",className:"w-full text-secondary",asChild:!0,children:(0,n.jsx)(d(),{href:"/gov/stakelp?symbol=".concat(e.symbol),children:"去获取"})})})]}),(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"我的质押代币数"}),(0,n.jsx)("div",{className:"stat-value text-xl",children:i?(0,n.jsx)(x.Z,{}):(0,p.LH)(a||BigInt(0))}),(0,n.jsx)("div",{className:"stat-actions w-full my-0",children:(0,n.jsx)(r.z,{variant:"link",size:"sm",className:"w-full text-secondary",asChild:!0,children:(0,n.jsx)(d(),{href:"/gov/staketoken?symbol=".concat(e.symbol),children:"去质押"})})})]})]})]})):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex-col items-center px-6 py-2",children:[(0,n.jsx)(f.Z,{title:"我的质押"}),(0,n.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"请先连接钱包"})]})}):""},N=e=>{let{currentRound:t}=e,{token:s}=(0,c.useContext)(u.M)||{},{address:a}=(0,j.m)(),{validGovVotes:l,isPending:m,error:y}=(0,o.Ty)((null==s?void 0:s.address)||"",a||""),{votesNumByAccount:v,isPending:h,error:N}=(0,i.VI)((null==s?void 0:s.address)||"",t,a||"");return s?a?(y&&console.log("errorValidGovVotes",y),N&&console.log("errorVotesNumByAccount",N),(0,n.jsxs)("div",{className:"flex-col items-center px-6 py-0",children:[(0,n.jsx)(f.Z,{title:"我的投票"}),(0,n.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,n.jsxs)("div",{className:"stat place-items-center pb-2",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"我的已投票数"}),(0,n.jsx)("div",{className:"stat-value text-xl",children:h?(0,n.jsx)(x.Z,{}):(0,p.LH)(v||BigInt(0))})]}),(0,n.jsxs)("div",{className:"stat place-items-center pb-2",children:[(0,n.jsx)("div",{className:"stat-title text-sm",children:"我的剩余票数"}),(0,n.jsx)("div",{className:"stat-value text-xl",children:m||h?(0,n.jsx)(x.Z,{}):l?(0,p.LH)(l-v||BigInt(0)):"0"})]})]}),(0,n.jsx)("div",{className:"flex justify-center",children:m||h?(0,n.jsx)(x.Z,{}):l>v?(0,n.jsx)(r.z,{className:"w-1/2",asChild:!0,children:(0,n.jsx)(d(),{href:"/vote?symbol=".concat(s.symbol),children:"去投票"})}):(0,n.jsx)(r.z,{disabled:!0,className:"w-1/2",children:l>0?"已投票":"无治理票，不能投票"})})]})):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex-col items-center px-6 py-2",children:[(0,n.jsx)(f.Z,{title:"我的投票"}),(0,n.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"请先连接钱包"})]})}):""},b=s(37122),g=s(4062),T=()=>{let{currentRound:e}=(0,i.Bk)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Z,{title:"治理首页"}),(0,n.jsxs)("main",{className:"flex-grow",children:[(0,n.jsx)(g.Z,{}),(0,n.jsx)(v,{currentRound:e}),(0,n.jsx)(h,{}),(0,n.jsx)(N,{currentRound:e}),(0,n.jsx)(b.Z,{currentRound:e>2?e-2n:0n})]})]})}}},function(e){e.O(0,[1664,2209,8710,6242,4637,5263,7250,7807,2888,9774,179],function(){return e(e.s=54889)}),_N_E=e.O()}]);