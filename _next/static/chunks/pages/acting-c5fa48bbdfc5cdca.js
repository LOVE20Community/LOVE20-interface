(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9082],{87869:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/acting",function(){return t(75959)}])},34680:function(e,s,t){"use strict";t.d(s,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return a},aY:function(){return o},eW:function(){return u},ll:function(){return d}});var n=t(85893),r=t(67294),l=t(40108);let a=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,n.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});a.displayName="Card";let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,n.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...r})});i.displayName="CardHeader";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,n.jsx)("div",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});d.displayName="CardTitle";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,n.jsx)("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...r})});c.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,n.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",t),...r})});o.displayName="CardContent";let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,n.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t),...r})});u.displayName="CardFooter"},7191:function(e,s,t){"use strict";var n=t(85893),r=t(67294),l=t(42757),a=t(93778),i=t(74089);s.Z=e=>{let{currentRound:s,roundName:t}=e,{data:d}=(0,l.O)(),{token:c}=(0,r.useContext)(a.M)||{},o=Number("100")||0,u=Number("12")||0,x=d?o-(Number(d)-Number(null==c?void 0:c.voteOriginBlocks))%o:0;return(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsxs)("h1",{className:"text-lg font-bold",children:[t," 第 ",(0,n.jsx)("span",{className:"text-secondary",children:Number(null!=s?s:0n)})," 轮"]}),(0,n.jsxs)("span",{className:"text-sm text-greyscale-400 mt-1 pt-0",children:["本轮剩余：",(0,n.jsx)(i.Z,{initialTimeLeft:x>0?x*u:0})]})]})}},75959:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return y}});var n=t(85893),r=t(5028),l=t(67294),a=t(7399),i=t(93778),d=t(91529),c=t(42083),o=t(7191),u=e=>{let{currentRound:s}=e,{token:t}=(0,l.useContext)(i.M)||{},{rewardAvailable:u,isPending:x,error:m}=(0,a.CY)((null==t?void 0:t.address)||""),{joinedAmount:f,isPending:N,error:j}=(0,r.fP)((null==t?void 0:t.address)||"",s);return(0,n.jsxs)("div",{className:"px-6",children:[(0,n.jsx)(o.Z,{currentRound:s,roundName:"行动轮"}),(0,n.jsxs)("div",{className:"stats w-full border grid grid-cols-2 divide-x-0",children:[(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title",children:"预计新增铸币"}),(0,n.jsx)("div",{className:"stat-value text-2xl",children:x||void 0===u?(0,n.jsx)(c.Z,{}):(0,d.LH)(99n*u/10000n)})]}),(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title",children:"参与行动代币"}),(0,n.jsx)("div",{className:"stat-value text-2xl",children:N?(0,n.jsx)(c.Z,{}):(0,d.LH)(f||BigInt(0))})]})]})]})},x=t(58732),m=t(41664),f=t.n(m),N=t(92321),j=t(34680),h=t(45551),v=t(94782),p=t(64777),g=e=>{let{currentRound:s}=e,{token:t}=(0,l.useContext)(i.M)||{},{address:r}=(0,N.m)(),{actions:a,isPending:o,error:u}=(0,h.jA)((null==t?void 0:t.address)||"",s);null==a||a.sort((e,s)=>Number(e.actionId)-Number(s.actionId));let x=null==a?void 0:a.map(e=>e.actionId),m=(null==a?void 0:a.reduce((e,s)=>e+s.votesNum,0n))||0n,{actionInfos:g,isPending:b,error:y}=(0,v.fT)((null==t?void 0:t.address)||"",x||[]),{joinedActions:w,isPending:C,error:Z}=(0,h.dB)((null==t?void 0:t.address)||"",r);if(u||y||Z)return console.error("errorJoinableActions",u),console.error("errorActionInfosByIds",y),console.error("errorJoinedActions",Z),(0,n.jsx)("div",{children:"加载出错，请稍后再试。"});let _=o||a&&a.length>0&&b||C;return(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)(p.Z,{title:"进行中的行动"}),!r&&(0,n.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"请先连接钱包"}),r&&_&&(0,n.jsx)("div",{className:"p-4 flex justify-center items-center",children:(0,n.jsx)(c.Z,{})}),!_&&!(null==x?void 0:x.length)&&(0,n.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"本轮暂无行动"}),!_&&x&&x.length>0&&(0,n.jsx)("div",{className:"mt-4 space-y-4",children:null==g?void 0:g.map((e,s)=>{let r=(null==w?void 0:w.some(s=>s.actionId===BigInt(e.head.id)))?"/action/".concat(e.head.id,"?type=join&symbol=").concat(null==t?void 0:t.symbol):"/acting/join?id=".concat(e.head.id,"&symbol=").concat(null==t?void 0:t.symbol);return(0,n.jsx)(j.Zb,{className:"shadow-none",children:(0,n.jsxs)(f(),{href:r,children:[(0,n.jsxs)(j.Ol,{className:"px-3 pt-2 pb-1 flex-row justify-start items-baseline",children:[(0,n.jsx)("span",{className:"text-greyscale-400 text-sm mr-1",children:"No.".concat(e.head.id)}),(0,n.jsx)("span",{className:"font-bold text-greyscale-800",children:"".concat(e.body.action)})]}),(0,n.jsxs)(j.aY,{className:"px-3 pt-1 pb-2",children:[(0,n.jsx)("div",{className:"text-greyscale-500",children:e.body.consensus}),(0,n.jsxs)("div",{className:"flex justify-between mt-1 text-sm",children:[(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:"text-greyscale-400 mr-1",children:"投票占比"}),(0,n.jsxs)("span",{className:"text-secondary",children:[(100*Number((null==a?void 0:a[s].votesNum)||0n)/Number(m)).toFixed(1),"%"]})]}),(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:"text-greyscale-400 mr-1",children:"参与代币数"}),(0,n.jsx)("span",{className:"text-secondary",children:(0,d.LH)((null==a?void 0:a[s].joinedAmount)||0n)})]})]})]})]})},e.head.id)})})]})},b=t(4062),y=()=>{let{currentRound:e}=(0,r.Bk)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Z,{title:"社区首页"}),(0,n.jsxs)("main",{className:"flex-grow",children:[(0,n.jsx)(b.Z,{}),(0,n.jsx)(u,{currentRound:e}),(0,n.jsx)(g,{currentRound:e})]})]})}}},function(e){e.O(0,[1664,2209,8710,6242,1502,4637,9871,5112,7807,2888,9774,179],function(){return e(e.s=87869)}),_N_E=e.O()}]);