(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{48312:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(67246)}])},27460:function(e,s,t){"use strict";var n=t(85893),r=t(86501),l=t(74855),a=t(45356),i=t(91529);s.Z=e=>{let{address:s,showCopyButton:t=!0}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-xs text-gray-500",children:(0,i.Vu)(s)}),t&&(0,n.jsx)(l.CopyToClipboard,{text:s,onCopy:(e,s)=>{s?r.ZP.success("复制成功"):r.ZP.error("复制失败")},children:(0,n.jsx)("button",{className:"",onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,n.jsx)(a.Z,{className:"h-4 w-4 text-xs text-gray-500"})})})]})}},74089:function(e,s,t){"use strict";var n=t(85893),r=t(67294),l=t(91529);s.Z=e=>{let{initialTimeLeft:s}=e,[t,a]=(0,r.useState)(s),i=(0,r.useRef)(null),c=(0,r.useRef)(!1);(0,r.useEffect)(()=>(c.current=!0,s<=0)?void 0:(a(s),i.current&&clearInterval(i.current),i.current=setInterval(()=>{c.current&&a(e=>e<=1?(clearInterval(i.current),console.log("1.prevTime",e),0):(console.log("2.prevTime",e),e-1))},1e3),()=>{c.current=!1,i.current&&clearInterval(i.current)}),[s]);let d=(0,l.ZC)(t);return(0,n.jsx)(n.Fragment,{children:d})}},7191:function(e,s,t){"use strict";var n=t(85893);t(67294);var r=t(3125),l=t(74089);s.Z=e=>{let{currentRound:s,roundName:t}=e,{data:a}=(0,r.O)(),i=Number("100")||0,c=Number("12")||0,d=a?i-Number(a)%i:0;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("h1",{className:"text-base text-center font-bold",children:[t,"（第 ",(0,n.jsx)("span",{className:"text-red-500",children:Number(null!=s?s:0n)})," 轮）"]}),(0,n.jsxs)("span",{className:"text-sm text-gray-400 mt-1 pt-0",children:["本轮剩余：",(0,n.jsx)(l.Z,{initialTimeLeft:d>0?d*c:0})]})]})}},68789:function(e,s,t){"use strict";var n=t(85893),r=t(67294),l=t(41664),a=t.n(l),i=t(27460),c=t(93778);s.Z=e=>{let{showGovernanceLink:s=!1}=e,t=(0,r.useContext)(c.M);if(!t||!t.token)return(0,n.jsx)("div",{className:"text-center text-error",children:"Token information is not available."});let{token:l}=t;return(0,n.jsxs)("div",{className:"flex items-center mb-4",children:[(0,n.jsx)("div",{className:"mr-2",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"font-bold text-2xl text-yellow-500",children:"$"}),(0,n.jsx)("span",{className:"font-bold text-2xl mr-2",children:l.symbol}),(0,n.jsx)(i.Z,{address:l.address})]})}),s&&(0,n.jsx)(a(),{href:"/gov",className:"text-blue-400 text-sm hover:underline ml-auto",children:"参与治理>>"})]})}},68736:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Z}});var n=t(85893),r=t(35337),l=t(5028),a=t(67294),i=t(83888),c=t(69205),d=t(19638),o=t(68789),x=t(93778),u=t(91529),m=t(91318);function h(){let{token:e}=(0,a.useContext)(x.M)||{},{totalSupply:s,isPending:t,error:r}=(0,d.A5)((null==e?void 0:e.address)||""),[l,h]=(0,a.useState)(!1);return(null==e?void 0:e.address)?(0,n.jsxs)("div",{className:"p-6 bg-white mb-4",children:[(0,n.jsx)(o.Z,{showGovernanceLink:!0}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsxs)("div",{className:"mr-2",children:[(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"已铸币量: "}),(0,n.jsx)("span",{className:"text-lg font-semibold text-orange-400",children:t?(0,n.jsx)(m.Z,{}):(0,u.LH)(s||0n)})]}),(0,n.jsx)(i.Z,{title:"铸币上限 ".concat(1e10.toLocaleString()),open:l,onClose:()=>{h(!1)},disableHoverListener:!0,disableFocusListener:!0,disableTouchListener:!0,children:(0,n.jsx)("button",{className:"btn btn-circle btn-ghost btn-xs text-gray-400",onClick:()=>{h(e=>!e)},children:(0,n.jsx)(c.Z,{})})})]})]}):(0,n.jsx)("div",{children:"Loading token information..."})}var j=t(7399),N=t(7191),v=e=>{let{currentRound:s}=e,{token:t}=(0,a.useContext)(x.M)||{},{rewardAvailable:r,isPending:i,error:c}=(0,j.CY)((null==t?void 0:t.address)||""),{joinedAmount:d,isPending:o,error:h}=(0,l.fP)((null==t?void 0:t.address)||"",s);return(0,n.jsxs)("div",{className:"flex flex-col items-center p-6 bg-white",children:[(0,n.jsx)(N.Z,{currentRound:s,roundName:"行动轮"}),(0,n.jsxs)("div",{className:"flex w-full justify-center space-x-20 mt-4",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"预计新增铸币"}),(0,n.jsx)("span",{className:"text-2xl font-bold text-orange-400",children:i||void 0===r?(0,n.jsx)(m.Z,{}):(0,u.LH)(99n*r/10000n)})]}),(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"参与行动代币"}),(0,n.jsx)("span",{className:"text-2xl font-bold text-orange-400",children:o?(0,n.jsx)(m.Z,{}):(0,u.LH)(d||BigInt(0))})]})]})]})},f=t(41664),b=t.n(f),g=t(45551),p=t(94782),y=e=>{let{currentRound:s}=e,{token:t}=(0,a.useContext)(x.M)||{},{actions:r,isPending:l,error:i}=(0,g.jA)((null==t?void 0:t.address)||"",s);null==r||r.sort((e,s)=>Number(e.actionId)-Number(s.actionId));let c=null==r?void 0:r.map(e=>e.actionId),d=(null==r?void 0:r.reduce((e,s)=>e+s.votesNum,0n))||0n,{actionInfos:o,isPending:h,error:j}=(0,p.fT)((null==t?void 0:t.address)||"",c||[]);return l||c&&c.length>0&&h?(0,n.jsx)("div",{className:"p-4 flex justify-center items-center",children:(0,n.jsx)(m.Z,{})}):i||j?(0,n.jsx)("div",{children:"加载出错，请稍后再试。"}):(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("h2",{className:"text-sm font-bold mb-4 text-gray-600",children:"行动列表 (行动轮)"}),(null==c?void 0:c.length)?(0,n.jsx)("div",{className:"space-y-4",children:null==o?void 0:o.map((e,s)=>(0,n.jsx)("div",{className:"bg-white p-4 rounded-lg mb-4",children:(0,n.jsxs)(b(),{href:"/action/".concat(e.head.id,"?type=join"),children:[(0,n.jsxs)("div",{className:"font-semibold mb-2",children:[(0,n.jsx)("span",{className:"text-gray-400 text-base mr-1",children:"No.".concat(e.head.id)}),(0,n.jsx)("span",{className:"text-gray-800 text-lg",children:"".concat(e.body.action)})]}),(0,n.jsx)("p",{className:"leading-tight",children:e.body.consensus}),(0,n.jsxs)("div",{className:"flex justify-between mt-1",children:[(0,n.jsxs)("span",{className:"text-sm",children:["投票占比 ",(100*Number((null==r?void 0:r[s].votesNum)||0n)/Number(d)).toFixed(1),"%"]}),(0,n.jsxs)("span",{className:"text-sm",children:["已参与行动代币 ",(0,u.LH)((null==r?void 0:r[s].joinedAmount)||0n)]})]})]},e.head.id)},e.head.id))}):(0,n.jsx)("div",{className:"text-sm text-gray-500 text-center",children:"没有行动"})]})},Z=()=>{let{currentRound:e}=(0,l.Bk)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.Z,{title:"社区首页"}),(0,n.jsxs)("main",{className:"flex-grow",children:[(0,n.jsx)(h,{}),(0,n.jsx)(v,{currentRound:e}),(0,n.jsx)(y,{currentRound:e})]})]})}},67246:function(e,s,t){"use strict";t.r(s);var n=t(85893),r=t(68736);s.default=()=>(0,n.jsx)(r.default,{})}},function(e){e.O(0,[4784,5608,3686,7140,9638,3601,5551,7399,2888,9774,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);