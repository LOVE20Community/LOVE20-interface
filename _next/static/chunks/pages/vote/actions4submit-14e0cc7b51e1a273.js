(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1533],{67980:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vote/actions4submit",function(){return n(76422)}])},27245:function(e,r,n){"use strict";n.d(r,{z:function(){return d}});var t=n(85893),s=n(67294),i=n(88426),a=n(45139),c=n(98997);let o=(0,a.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,r)=>{let{className:n,variant:s,size:a,asChild:d=!1,...l}=e,u=d?i.g7:"button";return(0,t.jsx)(u,{className:(0,c.cn)(o({variant:s,size:a,className:n})),ref:r,...l})});d.displayName="Button"},98997:function(e,r,n){"use strict";n.d(r,{cn:function(){return i}});var t=n(90512),s=n(98388);function i(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return(0,s.m6)((0,t.W)(r))}},91318:function(e,r,n){"use strict";var t=n(85893);r.Z=()=>(0,t.jsx)("span",{className:"flex justify-center items-center",children:(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]})})},76422:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return x}});var t=n(85893),s=n(35337),i=n(94782),a=n(67294),c=n(11163),o=n(27245),d=n(93778),l=n(41664),u=n.n(l),f=n(91318),h=e=>{let{currentRound:r}=e,{token:n}=(0,a.useContext)(d.M)||{},s=(0,c.useRouter)(),{actionInfos:l,isPending:h,error:x}=(0,i.s4)((null==n?void 0:n.address)||"",0n,100n,!1),{actionSubmits:m,isPending:g,error:v}=(0,i.WZ)((null==n?void 0:n.address)||"",r);return x?(console.error(x),(0,t.jsx)("div",{children:"加载出错，请稍后再试。"})):(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h2",{className:"text-sm font-bold text-gray-600",children:"所有行动"}),(0,t.jsx)(o.z,{onClick:()=>s.push("/action/new"),className:"bg-blue-600 hover:bg-blue-700",children:"发起新行动"})]}),h||g?(0,t.jsx)(f.Z,{}):(0,t.jsx)("div",{className:"space-y-4",children:null==l?void 0:l.map((e,r)=>{let n=null==m?void 0:m.some(r=>r.actionId===e.head.id);return(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg mb-4",children:(0,t.jsxs)(u(),{href:"/action/".concat(e.head.id,"?type=submit&submitted=").concat(n),children:[(0,t.jsxs)("div",{className:"font-semibold mb-2",children:[(0,t.jsx)("span",{className:"text-gray-400 text-base mr-1",children:"No.".concat(e.head.id)}),(0,t.jsx)("span",{className:"text-gray-800 text-lg",children:"".concat(e.body.action)})]}),(0,t.jsx)("p",{className:"leading-tight",children:e.body.consensus}),(0,t.jsx)("div",{className:"flex justify-between mt-1",children:(0,t.jsx)("span",{className:"text-sm",children:n?(0,t.jsx)("span",{className:"text-green-500",children:"已推举"}):(0,t.jsx)("span",{className:"text-red-500",children:"未推举"})})})]},e.head.id)},e.head.id)})})]})},x=()=>{let{currentRound:e,isPending:r,error:n}=(0,i.Bk)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Z,{title:"推举"}),(0,t.jsxs)("main",{className:"flex-grow",children:[(0,t.jsx)("div",{className:"flex flex-col items-center space-y-4 p-6 bg-white",children:(0,t.jsxs)("h1",{className:"text-base text-center",children:["投票轮（第 ",r?(0,t.jsx)(f.Z,{}):(0,t.jsx)("span",{className:"text-red-500",children:Number(e)})," 轮）"]})}),r?(0,t.jsx)(f.Z,{}):(0,t.jsx)(h,{currentRound:e})]})]})}},11163:function(e,r,n){e.exports=n(43079)},89810:function(e,r,n){"use strict";n.d(r,{u:function(){return o}});var t=n(37003),s=n(36100),i=n(82451),a=n(82002),c=n(37122);function o(e={}){let{abi:r,address:n,functionName:o,query:d={}}=e,l=e.code,u=(0,c.Z)(e),f=(0,a.x)({config:u}),h=function(e,r={}){return{async queryFn({queryKey:n}){let s=r.abi;if(!s)throw Error("abi is required");let{functionName:i,scopeKey:a,...c}=n[1],o=(()=>{let e=n[1];if(e.address)return{address:e.address};if(e.code)return{code:e.code};throw Error("address or code is required")})();if(!i)throw Error("functionName is required");return(0,t.L)(e,{abi:s,functionName:i,args:c.args,...o,...c})},queryKey:function(e={}){let{abi:r,...n}=e;return["readContract",(0,s.OP)(n)]}(r)}}(u,{...e,chainId:e.chainId??f}),x=!!((n||l)&&r&&o&&(d.enabled??!0));return(0,i.aM)({...d,...h,enabled:x,structuralSharing:d.structuralSharing??s.if})}}},function(e){e.O(0,[9215,8424,6789,2888,9774,179],function(){return e(e.s=67980)}),_N_E=e.O()}]);