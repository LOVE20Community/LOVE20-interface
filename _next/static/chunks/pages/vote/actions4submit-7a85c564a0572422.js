(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1533],{67980:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vote/actions4submit",function(){return n(76422)}])},91318:function(e,s,n){"use strict";var t=n(85893);s.Z=()=>(0,t.jsx)("span",{className:"flex justify-center items-center",children:(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]})})},76422:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return h}});var t=n(85893),a=n(35337),c=n(94782),i=n(67294),r=n(11163),l=n(93778),d=n(41664),o=n.n(d),x=n(91318),u=e=>{let{currentRound:s}=e,{token:n}=(0,i.useContext)(l.M)||{},a=(0,r.useRouter)(),{actionInfos:d,isPending:u,error:h}=(0,c.s4)((null==n?void 0:n.address)||"",0n,100n,!1),{actionSubmits:m,isPending:j,error:N}=(0,c.WZ)((null==n?void 0:n.address)||"",s);return h?(console.error(h),(0,t.jsx)("div",{children:"加载出错，请稍后再试。"})):(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h2",{className:"text-sm font-bold text-gray-600",children:"所有行动"}),(0,t.jsx)("button",{onClick:()=>a.push("/action/new"),className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"发起新行动"})]}),u||j?(0,t.jsx)(x.Z,{}):(0,t.jsx)("div",{className:"space-y-4",children:null==d?void 0:d.map((e,s)=>{let n=null==m?void 0:m.some(s=>s.actionId===e.head.id);return(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg mb-4",children:(0,t.jsxs)(o(),{href:"/action/".concat(e.head.id,"?type=submit&submitted=").concat(n),children:[(0,t.jsxs)("div",{className:"font-semibold mb-2",children:[(0,t.jsx)("span",{className:"text-gray-400 text-base mr-1",children:"No.".concat(e.head.id)}),(0,t.jsx)("span",{className:"text-gray-800 text-lg",children:"".concat(e.body.action)})]}),(0,t.jsx)("p",{className:"leading-tight",children:e.body.consensus}),(0,t.jsx)("div",{className:"flex justify-between mt-1",children:(0,t.jsx)("span",{className:"text-sm",children:n?(0,t.jsx)("span",{className:"text-green-500",children:"已推举"}):(0,t.jsx)("span",{className:"text-red-500",children:"未推举"})})})]},e.head.id)},e.head.id)})})]})},h=()=>{let{currentRound:e,isPending:s,error:n}=(0,c.Bk)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Z,{title:"推举"}),(0,t.jsxs)("main",{className:"flex-grow",children:[(0,t.jsx)("div",{className:"flex flex-col items-center space-y-4 p-6 bg-base-100",children:(0,t.jsxs)("h1",{className:"text-base text-center",children:["投票轮（第 ",s?(0,t.jsx)(x.Z,{}):(0,t.jsx)("span",{className:"text-red-500",children:Number(e)})," 轮）"]})}),s?(0,t.jsx)(x.Z,{}):(0,t.jsx)(u,{currentRound:e})]})]})}},11163:function(e,s,n){e.exports=n(43079)}},function(e){e.O(0,[8554,6789,2888,9774,179],function(){return e(e.s=67980)}),_N_E=e.O()}]);