(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1533],{67980:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vote/actions4submit",function(){return r(76422)}])},91318:function(e,s,r){"use strict";var t=r(85893);s.Z=()=>(0,t.jsx)("span",{className:"flex justify-center items-center",children:(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]})})},76422:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return h}});var t=r(85893),n=r(35337),a=r(94782),i=r(67294),c=r(11163),d=r(93778),l=r(41664),o=r.n(l),u=r(91318),x=e=>{let{currentRound:s}=e,{token:r}=(0,i.useContext)(d.M)||{},n=(0,c.useRouter)(),{actionInfos:l,isPending:x,error:h}=(0,a.s4)((null==r?void 0:r.address)||"",0n,100n,!1),{actionSubmits:m,isPending:f,error:j}=(0,a.WZ)((null==r?void 0:r.address)||"",s);return h?(console.error(h),(0,t.jsx)("div",{children:"加载出错，请稍后再试。"})):(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h2",{className:"text-sm font-bold text-gray-600",children:"所有行动"}),(0,t.jsx)("button",{onClick:()=>n.push("/action/new"),className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"发起新行动"})]}),x||f?(0,t.jsx)(u.Z,{}):(0,t.jsx)("div",{className:"space-y-4",children:null==l?void 0:l.map((e,s)=>{let r=null==m?void 0:m.some(s=>s.actionId===e.head.id);return(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg mb-4",children:(0,t.jsxs)(o(),{href:"/action/".concat(e.head.id,"?type=submit&submitted=").concat(r),children:[(0,t.jsxs)("div",{className:"font-semibold mb-2",children:[(0,t.jsx)("span",{className:"text-gray-400 text-base mr-1",children:"No.".concat(e.head.id)}),(0,t.jsx)("span",{className:"text-gray-800 text-lg",children:"".concat(e.body.action)})]}),(0,t.jsx)("p",{className:"leading-tight",children:e.body.consensus}),(0,t.jsx)("div",{className:"flex justify-between mt-1",children:(0,t.jsx)("span",{className:"text-sm",children:r?(0,t.jsx)("span",{className:"text-green-500",children:"已推举"}):(0,t.jsx)("span",{className:"text-red-500",children:"未推举"})})})]},e.head.id)},e.head.id)})})]})},h=()=>{let{currentRound:e,isPending:s,error:r}=(0,a.Bk)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Z,{title:"推举"}),(0,t.jsxs)("main",{className:"flex-grow",children:[(0,t.jsx)("div",{className:"flex flex-col items-center space-y-4 p-6 bg-base-100",children:(0,t.jsxs)("h1",{className:"text-base text-center",children:["投票轮（第 ",s?(0,t.jsx)(u.Z,{}):(0,t.jsx)("span",{className:"text-red-500",children:Number(e)})," 轮）"]})}),s?(0,t.jsx)(u.Z,{}):(0,t.jsx)(x,{currentRound:e})]})]})}},11163:function(e,s,r){e.exports=r(43079)},89810:function(e,s,r){"use strict";r.d(s,{u:function(){return d}});var t=r(37003),n=r(36100),a=r(82451),i=r(82002),c=r(37122);function d(e={}){let{abi:s,address:r,functionName:d,query:l={}}=e,o=e.code,u=(0,c.Z)(e),x=(0,i.x)({config:u}),h=function(e,s={}){return{async queryFn({queryKey:r}){let n=s.abi;if(!n)throw Error("abi is required");let{functionName:a,scopeKey:i,...c}=r[1],d=(()=>{let e=r[1];if(e.address)return{address:e.address};if(e.code)return{code:e.code};throw Error("address or code is required")})();if(!a)throw Error("functionName is required");return(0,t.L)(e,{abi:n,functionName:a,args:c.args,...d,...c})},queryKey:function(e={}){let{abi:s,...r}=e;return["readContract",(0,n.OP)(r)]}(s)}}(u,{...e,chainId:e.chainId??x}),m=!!((r||o)&&s&&d&&(l.enabled??!0));return(0,a.aM)({...l,...h,enabled:m,structuralSharing:l.structuralSharing??n.if})}}},function(e){e.O(0,[9215,6789,2888,9774,179],function(){return e(e.s=67980)}),_N_E=e.O()}]);