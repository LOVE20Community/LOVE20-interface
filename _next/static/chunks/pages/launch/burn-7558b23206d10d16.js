(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5781],{65160:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/launch/burn",function(){return t(72587)}])},68655:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(31134).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},23432:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(31134).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},44576:function(e,s,t){"use strict";var n=t(85893);t(67294);var r=t(23432);s.Z=e=>{let{isLoading:s,text:t="Loading"}=e;return s?(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(r.Z,{className:"mx-auto h-8 w-8 animate-spin text-white"}),(0,n.jsx)("p",{className:"mt-2 text-sm font-medium text-white",children:t})]})}):null}},72587:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return b}});var n=t(85893),r=t(67294),l=t(5152),a=t.n(l),i=t(93778),c=t(70019),d=t(92321),o=t(27245),m=t(21774),u=t(86501),x=t(11163),h=t(91529),f=t(19638),y=t(64777),j=t(42083),p=t(44576),v=t(78543),N=e=>{let{token:s,launchInfo:t}=e,[l,a]=(0,r.useState)(""),[i,c]=(0,r.useState)(0n),{address:N,chain:g}=(0,d.m)(),b=(0,x.useRouter)(),{balance:k,isPending:w,error:C}=(0,f.hS)(null==s?void 0:s.address,N),{balance:S,isPending:$,error:_}=(0,f.hS)(null==s?void 0:s.parentTokenAddress,null==s?void 0:s.address),{totalSupply:z,isPending:E,error:Z}=(0,f.A5)(null==s?void 0:s.address);(0,r.useEffect)(()=>{z&&S&&c((0,h.vz)(l)*S/z)},[l,z,S]);let T=()=>!!(0,v.S)(g)&&(!(0n>=(0,h.vz)(l))||(u.Am.error("销毁数量不能为0"),!1)),{approve:A,isWriting:P,isConfirming:I,isConfirmed:L,writeError:B}=(0,f.yA)(null==s?void 0:s.address),M=async()=>{if(T())try{await A("0x5978945B0C36a5442FD4cc5483091c08202DF044",(0,h.vz)(l))}catch(e){console.error(e)}};(0,r.useEffect)(()=>{L&&u.Am.success("授权成功")},[L]);let{burnForParentToken:F,isPending:H,isConfirming:D,isConfirmed:O,writeError:W}=(0,f.l3)(null==s?void 0:s.address),X=async()=>{if(T())try{await F((0,h.vz)(l))}catch(e){console.error(e)}};(0,r.useEffect)(()=>{O&&(u.Am.success("销毁成功"),setTimeout(()=>{b.push("/launch?symbol=".concat(null==s?void 0:s.symbol))},2e3))},[O]);let q=P||I||L;return!s||w?(0,n.jsx)(j.Z,{}):C||_||Z?(console.error(C),console.error(_),console.error(Z),(0,n.jsx)("div",{className:"text-red-500",children:"加载数据失败"})):(W&&console.error(W),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)(y.Z,{title:"底池销毁"}),(0,n.jsx)("div",{className:"stats w-full",children:(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title text-sm mr-6",children:"底池总量"}),(0,n.jsxs)("div",{className:"stat-value text-secondary mt-2",children:[(0,h.LH)(S||0n),(0,n.jsx)("span",{className:"text-greyscale-500 font-normal text-sm ml-2",children:s.parentTokenSymbol})]}),(0,n.jsxs)("div",{className:"stat-desc text-sm mt-2",children:["销毁 ",s.symbol,"，可从底池取回 ",s.parentTokenSymbol]})]})}),(0,n.jsxs)("div",{className:"mt-6",children:[(0,n.jsxs)("div",{className:"flex items-center text-sm",children:[(0,n.jsxs)("span",{className:"text-greyscale-400",children:["我的",s.symbol,": ",(0,n.jsx)("span",{className:"text-secondary",children:(0,h.LH)(k||0n)})]}),(0,n.jsx)(o.z,{variant:"link",size:"sm",onClick:()=>{a((0,h.bM)(k||0n))},disabled:q||0n>=(k||0n),className:"text-secondary",children:"全选"})]}),(0,n.jsx)("div",{className:"flex justify-between",children:(0,n.jsx)(m.I,{type:"number",placeholder:"请输入销毁 ".concat(s.symbol," 的数量"),value:l,onChange:e=>a(e.target.value),className:"my-auto",disabled:q||0n>=(k||0n)})}),(0,n.jsx)("div",{className:"flex items-center justify-end text-sm my-2",children:(0,n.jsxs)("span",{className:"text-greyscale-400",children:["预计可取回 ",(0,n.jsx)("span",{className:"text-secondary",children:(0,h.LH)(i)})," ",s.parentTokenSymbol]})}),(0,n.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,n.jsx)(o.z,{className:"w-1/2",onClick:M,disabled:q,children:P?"1.授权中...":I?"1.确认中...":L?"1.已授权":"1.授权"}),(0,n.jsx)(o.z,{className:"w-1/2 text-white py-2 rounded-lg",onClick:X,disabled:!L||H||D||O,children:H?"2.销毁中...":D?"2.确认中...":O?"2.销毁成功":"2.销毁"})]})]}),(0,n.jsxs)("div",{className:"bg-gray-100 text-greyscale-500 rounded-lg p-4 text-sm mt-4",children:[(0,n.jsx)("p",{className:"mb-1",children:"计算公式："}),(0,n.jsxs)("p",{children:["所得",s.parentTokenSymbol,"数量 = 底池",s.parentTokenSymbol,"总量 * (销毁",s.symbol,"数量 /"," ",s.symbol,"总发行量)"]})]}),B&&(0,n.jsx)("div",{className:"text-red-500",children:B.message}),W&&(0,n.jsx)("div",{className:"text-red-500",children:W.message})]}),(0,n.jsx)(p.Z,{isLoading:P||I||H||D,text:P||H?"提交交易...":"确认交易..."})]}))},g=t(58732);function b(){let{token:e}=(0,r.useContext)(i.M)||{},{launchInfo:s,isPending:t,error:l}=(0,c.zL)(e?e.address:"0x0");return t?(0,n.jsx)(j.Z,{}):l?(0,n.jsx)("div",{className:"text-red-500",children:"加载发射信息失败"}):s?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.Z,{title:"底池销毁"}),(0,n.jsx)("main",{className:"flex-grow",children:(0,n.jsx)(N,{token:e,launchInfo:s})})]}):(0,n.jsx)("div",{className:"text-red-500",children:"找不到发射信息"})}a()(()=>Promise.all([t.e(1664),t.e(7082)]).then(t.bind(t,27082)),{loadableGenerated:{webpack:()=>[27082]},ssr:!1})},78543:function(e,s,t){"use strict";t.d(s,{S:function(){return r}});var n=t(86501);let r=e=>!!e||(n.Am.error("请先将钱包链接 ".concat("sepolia")),!1)},9008:function(e,s,t){e.exports=t(23867)},21803:function(e,s,t){"use strict";function n(e,s){let[t,n="0"]=e.split("."),r=t.startsWith("-");if(r&&(t=t.slice(1)),n=n.replace(/(0+)$/,""),0===s)1===Math.round(Number(`.${n}`))&&(t=`${BigInt(t)+1n}`),n="";else if(n.length>s){let[e,r,l]=[n.slice(0,s-1),n.slice(s-1,s),n.slice(s)],a=Math.round(Number(`${r}.${l}`));(n=a>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${a}`).length>s&&(n=n.slice(1),t=`${BigInt(t)+1n}`),n=n.slice(0,s)}else n=n.padEnd(s,"0");return BigInt(`${r?"-":""}${t}${n}`)}t.d(s,{v:function(){return n}})}},function(e){e.O(0,[4637,4335,2888,9774,179],function(){return e(e.s=65160)}),_N_E=e.O()}]);