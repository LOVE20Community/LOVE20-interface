(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9082],{87869:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/acting",function(){return t(75959)}])},34680:function(e,s,t){"use strict";t.d(s,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return l},aY:function(){return o},eW:function(){return u},ll:function(){return d}});var n=t(85893),a=t(67294),r=t(40108);let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});l.displayName="Card";let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",t),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});d.displayName="CardTitle";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",t),...a})});c.displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",t),...a})});o.displayName="CardContent";let u=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",t),...a})});u.displayName="CardFooter"},4307:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(31134).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},7191:function(e,s,t){"use strict";var n=t(85893),a=t(67294),r=t(42757),l=t(93778),i=t(74089);s.Z=e=>{let{currentRound:s,roundType:t}=e,{data:d}=(0,r.O)(),{token:c}=(0,a.useContext)(l.M)||{},[o,u]=(0,a.useState)(0n),m=Number("100")||0,x=Number("12")||0,f=d?m-(Number(d)-Number(null==c?void 0:c.voteOriginBlocks))%m:0;return(0,a.useEffect)(()=>{s>0n&&(null==c?void 0:c.initialStakeRound)&&u(s-BigInt(null==c?void 0:c.initialStakeRound)+1n)},[s,null==c?void 0:c.initialStakeRound]),(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsxs)("h1",{className:"text-lg font-bold",children:["vote"===t?"投票轮":"行动轮"," 第 ",(0,n.jsx)("span",{className:"text-secondary",children:Number(o)})," 轮"]}),(0,n.jsxs)("span",{className:"text-sm text-greyscale-400 mt-1 pt-0",children:["本轮剩余：",(0,n.jsx)(i.Z,{initialTimeLeft:f>0?f*x:0})]})]})}},75959:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return C}});var n=t(85893),a=t(67294),r=t(11163),l=t(93778),i=t(67068),d=t(5028),c=t(7399),o=t(91529),u=t(42083),m=t(7191),x=e=>{let{currentRound:s}=e,{token:t}=(0,a.useContext)(l.M)||{},{rewardAvailable:r,isPending:x,error:f}=(0,c.CY)((null==t?void 0:t.address)||""),{joinedAmount:h,isPending:N,error:j}=(0,d.fP)((null==t?void 0:t.address)||"",s),{handleContractError:v}=(0,i.S)();return(0,a.useEffect)(()=>{j&&v(j,"join"),f&&v(f,"mint")},[j,f]),(0,n.jsxs)("div",{className:"px-4",children:[(0,n.jsx)(m.Z,{currentRound:s,roundType:"act"}),(0,n.jsxs)("div",{className:"stats w-full border grid grid-cols-2 divide-x-0",children:[(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title",children:"预计新增铸币"}),(0,n.jsx)("div",{className:"stat-value text-2xl",children:x||void 0===r?(0,n.jsx)(u.Z,{}):(0,o.LH)(99n*r/10000n)})]}),(0,n.jsxs)("div",{className:"stat place-items-center",children:[(0,n.jsx)("div",{className:"stat-title",children:"参与行动代币"}),(0,n.jsx)("div",{className:"stat-value text-2xl",children:N?(0,n.jsx)(u.Z,{}):(0,o.LH)(h||BigInt(0))})]})]})]})},f=t(37436),h=t(41664),N=t.n(h),j=t(92321),v=t(4307),p=t(34680),b=t(94782),g=t(45551),y=t(64777),w=e=>{let{currentRound:s}=e,{token:t}=(0,a.useContext)(l.M)||{},{address:r}=(0,j.m)(),{actions:d,isPending:c,error:m}=(0,g.jA)((null==t?void 0:t.address)||"",s);null==d||d.sort((e,s)=>Number(e.actionId)-Number(s.actionId));let x=null==d?void 0:d.map(e=>e.actionId),f=(null==d?void 0:d.reduce((e,s)=>e+s.votesNum,0n))||0n,{actionInfos:h,isPending:w,error:k}=(0,b.fT)((null==t?void 0:t.address)||"",x||[]),{joinedActions:C,isPending:R,error:Z}=(0,g.dB)((null==t?void 0:t.address)||"",r),{handleContractError:_}=(0,i.S)();(0,a.useEffect)(()=>{k&&_(k,"submit"),m&&_(m,"dataViewer"),Z&&_(Z,"dataViewer")},[m,k,Z]);let E=c||d&&d.length>0&&w||R;return(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)(y.Z,{title:"进行中的行动"}),!r&&(0,n.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"请先连接钱包"}),r&&E&&(0,n.jsx)("div",{className:"p-4 flex justify-center items-center",children:(0,n.jsx)(u.Z,{})}),!E&&!(null==x?void 0:x.length)&&(0,n.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"本轮暂无行动"}),!E&&x&&x.length>0&&(0,n.jsx)("div",{className:"mt-4 space-y-4",children:null==h?void 0:h.map((e,s)=>{let a=(null==C?void 0:C.some(s=>s.actionId===BigInt(e.head.id)))?"/action/".concat(e.head.id,"?type=join&symbol=").concat(null==t?void 0:t.symbol):"/acting/join?id=".concat(e.head.id,"&symbol=").concat(null==t?void 0:t.symbol);return(0,n.jsx)(p.Zb,{className:"shadow-none",children:(0,n.jsxs)(N(),{href:a,className:"relative block",children:[(0,n.jsxs)(p.Ol,{className:"px-3 pt-2 pb-1 flex-row items-baseline",children:[(0,n.jsx)("span",{className:"text-greyscale-400 text-sm mr-1",children:"No.".concat(e.head.id)}),(0,n.jsx)("span",{className:"font-bold text-greyscale-800",children:"".concat(e.body.action)})]}),(0,n.jsxs)(p.aY,{className:"px-3 pt-1 pb-2",children:[(0,n.jsx)("div",{className:"text-greyscale-500",children:e.body.consensus}),(0,n.jsxs)("div",{className:"flex justify-between mt-1 text-sm",children:[(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:"text-greyscale-400 mr-1",children:"投票占比"}),(0,n.jsxs)("span",{className:"text-secondary",children:[(100*Number((null==d?void 0:d[s].votesNum)||0n)/Number(f)).toFixed(1),"%"]})]}),(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:"text-greyscale-400 mr-1",children:"参与代币数"}),(0,n.jsx)("span",{className:"text-secondary",children:(0,o.LH)((null==d?void 0:d[s].joinedAmount)||0n)})]})]})]}),(0,n.jsx)(v.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-greyscale-400 pointer-events-none"})]})},e.head.id)})})]})},k=t(4062),C=()=>{let e=(0,r.useRouter)(),{currentRound:s,error:t}=(0,d.Bk)(),{token:c}=(0,a.useContext)(l.M)||{},{handleContractError:o}=(0,i.S)();return(0,a.useEffect)(()=>{t&&o(t,"join")},[t]),(0,a.useEffect)(()=>{c&&!c.hasEnded?e.push("/launch?symbol=".concat(c.symbol)):c&&!c.initialStakeRound&&e.push("/gov/stakelp?symbol=".concat(c.symbol,"&first=true"))},[c]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.Z,{title:"社区首页"}),(0,n.jsxs)("main",{className:"flex-grow",children:[(0,n.jsx)(k.Z,{}),(0,n.jsx)(x,{currentRound:s}),(0,n.jsx)(w,{currentRound:s})]})]})}}},function(e){e.O(0,[1664,2209,8710,6242,6714,4637,9871,5112,7807,2888,9774,179],function(){return e(e.s=87869)}),_N_E=e.O()}]);