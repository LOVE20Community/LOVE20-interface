(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4143],{85719:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify",function(){return r(48585)}])},91318:function(e,n,r){"use strict";var s=r(85893);n.Z=()=>(0,s.jsx)("span",{className:"flex justify-center items-center",children:(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]})})},7191:function(e,n,r){"use strict";var s=r(85893);r(67294);var t=r(3125),c=r(91529),i=r(34155);n.Z=e=>{let{currentRound:n,roundName:r}=e,{data:a}=(0,t.O)(),l=a?Number("100")-Number(a)%Number("100"):0,d=l>0?Number(l)*Number(i.env.NEXT_PUBLIC_BLOCK_TIME):0,o=(0,c.ZC)(d);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("h1",{className:"text-base text-center font-bold",children:[r,"（第 ",(0,s.jsx)("span",{className:"text-red-500",children:Number(null!=n?n:0n)})," 轮）"]}),(0,s.jsxs)("span",{className:"text-sm text-gray-400 mt-1 pt-0",children:["本轮剩余：",o]})]})}},18308:function(e,n,r){"use strict";var s=r(85893),t=r(67294),c=r(92321),i=r(41664),a=r.n(i),l=r(7080),d=r(87250),o=r(93778),u=r(91529),x=r(91318),m=r(7191);n.Z=e=>{let{currentRound:n,showBtn:r=!0}=e,{token:i}=(0,t.useContext)(o.M)||{},{address:f}=(0,c.m)(),{votesNumByAccount:h,isPending:N,error:g}=(0,l.VI)(null==i?void 0:i.address,n,f||""),{scoreByVerifier:j,isPending:y,error:b}=(0,d.w3)(null==i?void 0:i.address,n,f||""),p=N||y?BigInt(0):h-j;return(0,s.jsxs)("div",{className:"flex flex-col items-center bg-white py-4",children:[(0,s.jsx)(m.Z,{currentRound:n,roundName:"验证轮"}),(0,s.jsxs)("div",{className:"flex w-full justify-center space-x-20 my-4",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"我的已投验证票"}),(0,s.jsx)("span",{className:"text-2xl font-bold text-orange-400",children:y?(0,s.jsx)(x.Z,{}):(0,u.LH)(j||BigInt(0))})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"我的剩余验证票"}),(0,s.jsx)("span",{className:"text-2xl font-bold text-orange-400",children:N||y?(0,s.jsx)(x.Z,{}):(0,u.LH)(p)})]})]}),r&&(N||y?(0,s.jsx)(x.Z,{}):h>j?(0,s.jsx)(a(),{href:"/verify",className:"btn-primary btn w-1/2",children:"去验证"}):(0,s.jsx)("span",{className:"text-gray-500 text-sm",children:"无剩余验证票"}))]})}},48585:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return h}});var s=r(85893),t=r(35337),c=r(87250),i=r(18308),a=r(67294),l=r(41664),d=r.n(l),o=r(7080),u=r(94782),x=r(93778),m=r(91318),f=e=>{let{currentRound:n}=e,{token:r}=(0,a.useContext)(x.M)||{},{actionIds:t,votes:c,isPending:i,error:l}=(0,o.$S)((null==r?void 0:r.address)||"",n),{actionInfos:f,isPending:h,error:N}=(0,u.fT)((null==r?void 0:r.address)||"",t||[]);return i||t&&t.length>0&&h?(0,s.jsx)("div",{className:"p-4 flex justify-center items-center",children:(0,s.jsx)(m.Z,{})}):l||N?(console.log("errorVotesNums",l),console.log("errorActionInfosByIds",N),(0,s.jsx)("div",{children:"加载出错，请稍后再试。"})):(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h2",{className:"text-sm font-bold mb-4 text-gray-600",children:"待验证行动"}),(0,s.jsx)("div",{className:"space-y-4",children:null==f?void 0:f.map((e,n)=>(0,s.jsx)("div",{className:"bg-white p-4 rounded-lg mb-4",children:(0,s.jsxs)(d(),{href:"/verify/".concat(e.head.id),children:[(0,s.jsxs)("div",{className:"font-semibold mb-2",children:[(0,s.jsx)("span",{className:"text-gray-400 text-base mr-1",children:"No.".concat(e.head.id)}),(0,s.jsx)("span",{className:"text-gray-800 text-lg",children:"".concat(e.body.action)})]}),(0,s.jsx)("p",{className:"leading-tight",children:e.body.consensus})]},e.head.id)},e.head.id))})]})},h=()=>{let{currentRound:e}=(0,c.Bk)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.Z,{title:"社区首页"}),(0,s.jsxs)("main",{className:"flex-grow",children:[(0,s.jsx)(i.Z,{currentRound:e,showBtn:!1}),(0,s.jsx)(f,{currentRound:e})]})]})}},3125:function(e,n,r){"use strict";r.d(n,{O:function(){return x}});var s=r(30202),t=r(97712),c=r(81946),i=r(36100),a=r(82451),l=r(82002),d=r(37122),o=r(65185),u=r(67294);function x(e={}){let{query:n={},watch:r}=e,x=(0,d.Z)(e),m=(0,s.NL)(),f=(0,l.x)({config:x}),h=e.chainId??f,N=function(e,n={}){return{gcTime:0,async queryFn({queryKey:n}){let{scopeKey:r,...s}=n[1];return await function(e,n={}){let{chainId:r,...s}=n,i=e.getClient({chainId:r});return(0,c.s)(i,t.z,"getBlockNumber")(s)}(e,s)??null},queryKey:function(e={}){return["blockNumber",(0,i.OP)(e)]}(n)}}(x,{...e,chainId:h});return!function(e={}){let{enabled:n=!0,onBlockNumber:r,config:s,...t}=e,i=(0,d.Z)(e),a=(0,l.x)({config:i}),x=e.chainId??a;(0,u.useEffect)(()=>{if(n&&r)return function(e,n){let r,s;let{syncConnectedChain:t=e._internal.syncConnectedChain,...i}=n,a=n=>{r&&r();let s=e.getClient({chainId:n});return r=(0,c.s)(s,o.q,"watchBlockNumber")(i)},l=a(n.chainId);return t&&!n.chainId&&(s=e.subscribe(({chainId:e})=>e,async e=>a(e))),()=>{l?.(),s?.()}}(i,{...t,chainId:x,onBlockNumber:r})},[x,i,n,r,t.onError,t.emitMissed,t.emitOnBegin,t.poll,t.pollingInterval,t.syncConnectedChain])}({...{config:e.config,chainId:e.chainId,..."object"==typeof r?r:{}},enabled:!!((n.enabled??!0)&&("object"==typeof r?r.enabled:r)),onBlockNumber(e){m.setQueryData(N.queryKey,e)}}),(0,a.aM)({...n,...N})}},89810:function(e,n,r){"use strict";r.d(n,{u:function(){return l}});var s=r(37003),t=r(36100),c=r(82451),i=r(82002),a=r(37122);function l(e={}){let{abi:n,address:r,functionName:l,query:d={}}=e,o=e.code,u=(0,a.Z)(e),x=(0,i.x)({config:u}),m=function(e,n={}){return{async queryFn({queryKey:r}){let t=n.abi;if(!t)throw Error("abi is required");let{functionName:c,scopeKey:i,...a}=r[1],l=(()=>{let e=r[1];if(e.address)return{address:e.address};if(e.code)return{code:e.code};throw Error("address or code is required")})();if(!c)throw Error("functionName is required");return(0,s.L)(e,{abi:t,functionName:c,args:a.args,...l,...a})},queryKey:function(e={}){let{abi:n,...r}=e;return["readContract",(0,t.OP)(r)]}(n)}}(u,{...e,chainId:e.chainId??x}),f=!!((r||o)&&n&&l&&(d.enabled??!0));return(0,c.aM)({...d,...m,enabled:f,structuralSharing:d.structuralSharing??t.if})}}},function(e){e.O(0,[4784,7140,7080,7250,2888,9774,179],function(){return e(e.s=85719)}),_N_E=e.O()}]);