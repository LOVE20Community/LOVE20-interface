(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3594],{84455:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/action/new",function(){return a(5854)}])},5854:function(e,t,a){"use strict";a.r(t);var s=a(85893),n=a(67294),r=a(11163),l=a(94782),i=a(93778),o=a(35337);t.default=()=>{let e=(0,r.useRouter)(),{submitNewAction:t,isWriting:a,isConfirming:d,isConfirmed:c,writeError:m,writeData:u}=(0,l.Xo)(),{token:x}=(0,n.useContext)(i.M)||{},[b,f]=(0,n.useState)({actionName:"",consensus:"",verificationRule:"",verificationInfoGuide:"",rewardAddressCount:"",maxStake:"",whiteList:""}),h=e=>{f({...b,[e.target.name]:e.target.value})},g=async()=>{let e={maxStake:b.maxStake?BigInt(b.maxStake)*10n**BigInt("18"):0n,maxRandomAccounts:b.rewardAddressCount?BigInt(b.rewardAddressCount):0n,whiteList:b.whiteList?b.whiteList.split(",").map(e=>e.trim()):[],action:b.actionName,consensus:b.consensus,verificationRule:b.verificationRule,verificationInfoGuide:b.verificationInfoGuide};await t(null==x?void 0:x.address,e)};return(0,n.useEffect)(()=>{c&&e.push("/vote/actions4submit")},[c,u]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{title:"创建新行动"}),(0,s.jsxs)("div",{className:"max-w-xl mx-auto bg-base-100 p-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"创建新行动"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-left mb-1 text-sm text-gray-500",children:"行动名称：一句话说明"}),(0,s.jsx)("input",{type:"text",name:"actionName",value:b.actionName,onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-left mb-1 text-sm text-gray-500",children:"行动共识"}),(0,s.jsx)("input",{type:"text",name:"consensus",value:b.consensus,onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-left mb-1 text-sm text-gray-500",children:"验证规则"}),(0,s.jsx)("textarea",{name:"verificationRule",value:b.verificationRule,onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-left mb-1 text-sm text-gray-500",children:"验证提示"}),(0,s.jsx)("input",{type:"text",name:"verificationInfoGuide",value:b.verificationInfoGuide,onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-left mb-1 text-sm text-gray-500",children:"奖励地址数"}),(0,s.jsx)("input",{type:"number",name:"rewardAddressCount",value:b.rewardAddressCount,onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-left mb-1 text-sm text-gray-500",children:"最大质押"}),(0,s.jsx)("input",{type:"number",name:"maxStake",value:b.maxStake,onChange:h,placeholder:"0 或不填表示不限",className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-left mb-1 text-sm text-gray-500",children:"白名单"}),(0,s.jsx)("input",{type:"text",name:"whiteList",value:b.whiteList,onChange:h,placeholder:"不填为不限，或多个地址用逗号分隔",className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),(0,s.jsx)("button",{onClick:g,disabled:a||d,className:"mt-4 w-full py-2 px-4 rounded-md ".concat(a||d?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"," text-white"),children:a||d?"提交中...":"提交"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"发起后，会自动推举该行动到当前投票轮的行动列表 / 本轮已推举或提交过"})]}),m&&(0,s.jsx)("div",{className:"text-red-500 text-center",children:m.message})]})]})}},11163:function(e,t,a){e.exports=a(43079)}},function(e){e.O(0,[8554,6789,2888,9774,179],function(){return e(e.s=84455)}),_N_E=e.O()}]);