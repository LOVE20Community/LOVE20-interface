(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3594],{84455:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/action/new",function(){return n(5854)}])},68655:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(31134).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},23432:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(31134).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},64777:function(e,t,n){"use strict";var s=n(85893);t.Z=e=>{let{title:t}=e;return(0,s.jsx)("div",{className:"flex justify-between items-center",children:(0,s.jsx)("h1",{className:"text-lg font-bold",children:t})})}},44576:function(e,t,n){"use strict";var s=n(85893);n(67294);var r=n(23432);t.Z=e=>{let{isLoading:t,text:n="Loading"}=e;return t?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(r.Z,{className:"mx-auto h-8 w-8 animate-spin text-white"}),(0,s.jsx)("p",{className:"mt-2 text-sm font-medium text-white",children:n})]})}):null}},91529:function(e,t,n){"use strict";n.d(t,{LH:function(){return i},Vu:function(){return a},bM:function(){return c},vz:function(){return l}});var s=n(21803),r=n(15229);let a=e=>e?"".concat(e.substring(0,6),"...").concat(e.substring(e.length-4)):"",i=e=>{let t=c(e);return new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(Number(t))},l=e=>{let t=parseInt("18",10);return(0,s.v)(e,t)},c=e=>{let t=parseInt("18",10);return(0,r.b)(e,t)}},5854:function(e,t,n){"use strict";n.r(t);var s=n(85893),r=n(92321),a=n(67294),i=n(11163),l=n(27245),c=n(94782),o=n(93778),d=n(91529),u=n(58732),m=n(64777),x=n(44576),f=n(78543);t.default=()=>{let{chain:e}=(0,r.m)(),t=(0,i.useRouter)(),{submitNewAction:n,isWriting:h,isConfirming:b,isConfirmed:p,writeError:g,writeData:v}=(0,c.Xo)(),{token:y}=(0,a.useContext)(o.M)||{},[j,N]=(0,a.useState)({actionName:"",consensus:"",verificationRule:"",verificationInfoGuide:"",rewardAddressCount:"",maxStake:"",whiteList:""}),w=e=>{N({...j,[e.target.name]:e.target.value})},k=async()=>{if(!(0,f.S)(e))return;let t={maxStake:j.maxStake?(0,d.vz)(j.maxStake):0n,maxRandomAccounts:j.rewardAddressCount?BigInt(j.rewardAddressCount):0n,whiteList:j.whiteList?j.whiteList.split(",").map(e=>e.trim()):[],action:j.actionName,consensus:j.consensus,verificationRule:j.verificationRule,verificationInfoGuide:j.verificationInfoGuide};await n(null==y?void 0:y.address,t)};return(0,a.useEffect)(()=>{p&&t.push("/vote/actions4submit?symbol=".concat(null==y?void 0:y.symbol))},[p,v]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Z,{title:"创建新行动"}),(0,s.jsxs)("div",{className:"max-w-xl mx-auto p-4",children:[(0,s.jsx)(m.Z,{title:"创建新行动"}),(0,s.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-left mb-1 text-sm text-greyscale-500",children:"行动名称"}),(0,s.jsx)("input",{type:"text",name:"actionName",value:j.actionName,placeholder:"一句话说明行动",onChange:w,className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-left mb-1 text-sm text-greyscale-500",children:"行动共识"}),(0,s.jsx)("input",{type:"text",name:"consensus",value:j.consensus,placeholder:"描述行动所基于的共识",onChange:w,className:"mt-1 block w-full border border-gray-300 rounded-md p-2 "})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-left mb-1 text-sm text-greyscale-500",children:"验证规则"}),(0,s.jsx)("textarea",{name:"verificationRule",value:j.verificationRule,placeholder:"验证者验证的规则",onChange:w,className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-left mb-1 text-sm text-greyscale-500",children:"验证提示"}),(0,s.jsx)("input",{type:"text",name:"verificationInfoGuide",value:j.verificationInfoGuide,placeholder:"提示给行动参与者，辅助参与者填写信息",onChange:w,className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-left mb-1 text-sm text-greyscale-500",children:"奖励地址数"}),(0,s.jsx)("input",{type:"number",name:"rewardAddressCount",value:j.rewardAddressCount,placeholder:"地址数必须大于0",onChange:w,className:"mt-1 block w-full border border-gray-300 rounded-md p-2 "})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-left mb-1 text-sm text-greyscale-500",children:"最大质押"}),(0,s.jsx)("input",{type:"number",name:"maxStake",value:j.maxStake,onChange:w,placeholder:"最大质押数必须大于0",className:"mt-1 block w-full border border-gray-300 rounded-md p-2 "})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-left mb-1 text-sm text-greyscale-500",children:"白名单"}),(0,s.jsx)("input",{type:"text",name:"whiteList",value:j.whiteList,onChange:w,placeholder:"不填为不限，或多个地址用逗号分隔",className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),(0,s.jsx)(l.z,{onClick:k,disabled:h||b||p,className:"mt-4 w-full",children:h?"提交中...":b?"确认中...":p?"已提交":"提交"}),(0,s.jsx)("p",{className:"text-greyscale-500 text-sm",children:"发起后，会自动推举该行动到当前投票轮的行动列表 / 本轮已推举或提交过"})]}),g&&(0,s.jsx)("div",{className:"text-red-500 text-center",children:g.message})]}),(0,s.jsx)(x.Z,{isLoading:h||b,text:h?"提交交易...":"确认交易..."})]})}},78543:function(e,t,n){"use strict";n.d(t,{S:function(){return r}});var s=n(86501);let r=e=>!!e||(s.Am.error("请先将钱包链接 ".concat("sepolia")),!1)},9008:function(e,t,n){e.exports=n(23867)},21803:function(e,t,n){"use strict";function s(e,t){let[n,s="0"]=e.split("."),r=n.startsWith("-");if(r&&(n=n.slice(1)),s=s.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${s}`))&&(n=`${BigInt(n)+1n}`),s="";else if(s.length>t){let[e,r,a]=[s.slice(0,t-1),s.slice(t-1,t),s.slice(t)],i=Math.round(Number(`${r}.${a}`));(s=i>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${i}`).length>t&&(s=s.slice(1),n=`${BigInt(n)+1n}`),s=s.slice(0,t)}else s=s.padEnd(t,"0");return BigInt(`${r?"-":""}${n}${s}`)}n.d(t,{v:function(){return s}})}},function(e){e.O(0,[1502,2888,9774,179],function(){return e(e.s=84455)}),_N_E=e.O()}]);