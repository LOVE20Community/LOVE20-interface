(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9280],{37162:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my/govrewards",function(){return n(27029)}])},23432:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});let r=(0,n(31134).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},64777:function(t,e,n){"use strict";var r=n(85893);e.Z=t=>{let{title:e}=t;return(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsx)("h1",{className:"text-lg font-bold",children:e})})}},44576:function(t,e,n){"use strict";var r=n(85893);n(67294);var a=n(23432);e.Z=t=>{let{isLoading:e}=t;return e?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(a.Z,{className:"mx-auto h-8 w-8 animate-spin text-white"}),(0,r.jsx)("p",{className:"mt-2 text-sm font-medium text-white",children:"Loading"})]})}):null}},58732:function(t,e,n){"use strict";var r=n(85893),a=n(9008),s=n.n(a);n(67294);var i=n(54705),c=n(78167);e.Z=t=>{let{title:e}=t;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s(),{children:[(0,r.jsx)("title",{children:"".concat(e," - LIFE20")}),(0,r.jsx)("meta",{name:"".concat(e," - LIFE20"),content:"A Web3 DApp for Life20 token management"})]}),(0,r.jsxs)("header",{className:"flex justify-between items-center py-2 px-4",children:[(0,r.jsx)(c.vP,{className:"-ml-1"}),(0,r.jsx)(i.NL,{})]})]})}},91529:function(t,e,n){"use strict";n.d(e,{LH:function(){return i},Vu:function(){return s},bM:function(){return o},vz:function(){return c}});var r=n(21803),a=n(15229);let s=t=>t?"".concat(t.substring(0,6),"...").concat(t.substring(t.length-4)):"",i=t=>{let e=o(t);return new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(Number(e))},c=t=>{let e=parseInt("18",10);return(0,r.v)(t,e)},o=t=>{let e=parseInt("18",10);return(0,a.b)(t,e)}},27029:function(t,e,n){"use strict";n.r(e);var r=n(85893),a=n(67294),s=n(92321),i=n(27245),c=n(93778),o=n(45551),l=n(7399),u=n(91529),d=n(58732),f=n(64777),m=n(42083),h=n(44576);e.default=()=>{let{token:t}=(0,a.useContext)(c.M)||{},{address:e}=(0,s.m)(),{currentRound:n}=(0,l.Bk)(),x=n?n-1n:0n,{rewards:p,isPending:w,error:g}=(0,o.Ci)(null==t?void 0:t.address,e,x,x>20n?x-20n:0n),[j,y]=(0,a.useState)([]);(0,a.useEffect)(()=>{p&&y([...p].sort((t,e)=>t.round>e.round?-1:1))},[p]);let{mintGovReward:v,isWriting:b,isConfirming:N,isConfirmed:C,writeError:I}=(0,l.xg)(),[F,$]=(0,a.useState)(null);(0,a.useEffect)(()=>{C&&y(t=>t.map(t=>t.round===F?{...t,unminted:0n,minted:t.unminted}:t))},[C]);let _=async n=>{(null==t?void 0:t.address)&&e&&($(n),await v(t.address,n))};return w?(0,r.jsx)(m.Z,{}):g?(0,r.jsxs)("div",{className:"text-red-500",children:["发生错误: ",g.message]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{title:"行动详情"}),(0,r.jsxs)("main",{className:"flex-grow",children:[(0,r.jsxs)("div",{className:"flex flex-col space-y-6 p-6",children:[(0,r.jsx)(f.Z,{title:"铸造治理奖励"}),(0,r.jsxs)("table",{className:"table w-full table-auto",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,r.jsx)("th",{children:"轮次"}),(0,r.jsx)("th",{className:"text-center",children:"待领取奖励"}),(0,r.jsx)("th",{})]})}),(0,r.jsx)("tbody",{children:j.map(t=>(0,r.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,r.jsx)("td",{children:t.round.toString()}),(0,r.jsx)("td",{className:"text-center",children:(0,u.LH)(t.unminted)}),(0,r.jsx)("td",{className:"text-center",children:t.unminted>0n?(0,r.jsx)(i.z,{variant:"outline",size:"sm",className:"text-secondary border-secondary",onClick:()=>_(t.round),disabled:b||N,children:"领取"}):t.minted>0n?(0,r.jsx)("span",{className:"text-secondary",children:"已领取"}):(0,r.jsx)("span",{className:"text-greyscale-500",children:"无奖励"})})]},t.round.toString()))})]}),I&&(0,r.jsxs)("div",{className:"text-red-500 mt-2",children:["领取失败: ",I.message]})]}),(0,r.jsx)(h.Z,{isLoading:b||N})]})]})}},9008:function(t,e,n){t.exports=n(23867)},96128:function(t,e,n){"use strict";n.d(e,{T:function(){return p}});var r=n(14503),a=n(8998),s=n(33840),i=n(26445),c=n(33639),o=n(87469),l=n(61163),u=n(74688),d=n(93714),f=n(47531),m=n(79524),h=n(76404),x=n(99238);async function p(t,e){let{account:n=t.account,chain:p=t.chain,accessList:w,blobs:g,data:j,gas:y,gasPrice:v,maxFeePerBlobGas:b,maxFeePerGas:N,maxPriorityFeePerGas:C,nonce:I,to:F,value:$,..._}=e;if(!n)throw new a.o({docsPath:"/docs/actions/wallet/sendTransaction"});let P=(0,r.T)(n);try{let n;if((0,f.F)(e),null!==p&&(n=await (0,d.s)(t,m.L,"getChainId")({}),(0,s.q)({currentChainId:n,chain:p})),"local"===P.type){let e=await (0,d.s)(t,h.Z,"prepareTransactionRequest")({account:P,accessList:w,blobs:g,chain:p,chainId:n,data:j,gas:y,gasPrice:v,maxFeePerBlobGas:b,maxFeePerGas:N,maxPriorityFeePerGas:C,nonce:I,parameters:[...h.Q,"sidecars"],to:F,value:$,..._}),r=p?.serializers?.transaction,a=await P.signTransaction(e,{serializer:r});return await (0,d.s)(t,x.p,"sendRawTransaction")({serializedTransaction:a})}let r=t.chain?.formatters?.transactionRequest?.format,a=(r||u.tG)({...(0,l.K)(_,{format:r}),accessList:w,blobs:g,chainId:n,data:j,from:P.address,gas:y,gasPrice:v,maxFeePerBlobGas:b,maxFeePerGas:N,maxPriorityFeePerGas:C,nonce:I,to:F,value:$});return await t.request({method:"eth_sendTransaction",params:[a]},{retryCount:0})}catch(t){throw function(t,{docsPath:e,...n}){let r=(()=>{let e=(0,o.k)(t,n);return e instanceof i.cj?t:e})();return new c.mk(r,{docsPath:e,...n})}(t,{...e,account:P,chain:e.chain||void 0})}}},61877:function(t,e,n){"use strict";n.d(e,{n:function(){return i}});var r=n(55629),a=n(93714),s=n(96128);async function i(t,e){let{abi:n,address:i,args:c,dataSuffix:o,functionName:l,...u}=e,d=(0,r.R)({abi:n,args:c,functionName:l});return(0,a.s)(t,s.T,"sendTransaction")({data:`${d}${o?o.replace("0x",""):""}`,to:i,...u})}},33840:function(t,e,n){"use strict";n.d(e,{q:function(){return a}});var r=n(80377);function a({chain:t,currentChainId:e}){if(!t)throw new r.Bk;if(e!==t.id)throw new r.Yl({chain:t,currentChainId:e})}},21803:function(t,e,n){"use strict";function r(t,e){let[n,r="0"]=t.split("."),a=n.startsWith("-");if(a&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),0===e)1===Math.round(Number(`.${r}`))&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){let[t,a,s]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],i=Math.round(Number(`${a}.${s}`));(r=i>9?`${BigInt(t)+BigInt(1)}0`.padStart(t.length+1,"0"):`${t}${i}`).length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${a?"-":""}${n}${r}`)}n.d(e,{v:function(){return r}})},83540:function(t,e,n){"use strict";n.d(e,{A:function(){return m}});var r=n(95946),a=n(51973),s=n(23147),i=n(36083),c=n(81946);async function o(t,e){let{chainId:n,timeout:o=0,...l}=e,u=t.getClient({chainId:n}),d=(0,c.s)(u,a.e,"waitForTransactionReceipt"),f=await d({...l,timeout:o});if("reverted"===f.status){let t=(0,c.s)(u,s.f,"getTransaction"),e=await t({hash:f.transactionHash}),n=(0,c.s)(u,i.R,"call"),a=await n({...e,data:e.input,gasPrice:"eip1559"!==e.type?e.gasPrice:void 0,maxFeePerGas:"eip1559"===e.type?e.maxFeePerGas:void 0,maxPriorityFeePerGas:"eip1559"===e.type?e.maxPriorityFeePerGas:void 0});throw Error(a?.data?(0,r.rR)(`0x${a.data.substring(138)}`):"unknown reason")}return{...f,chainId:u.chain.id}}var l=n(36100),u=n(82451),d=n(82002),f=n(37122);function m(t={}){let{hash:e,query:n={}}=t,r=(0,f.Z)(t),a=(0,d.x)({config:r}),s=function(t,e={}){return{async queryFn({queryKey:n}){let{hash:r,...a}=n[1];if(!r)throw Error("hash is required");return o(t,{...a,onReplaced:e.onReplaced,hash:r})},queryKey:function(t={}){let{onReplaced:e,...n}=t;return["waitForTransactionReceipt",(0,l.OP)(n)]}(e)}}(r,{...t,chainId:t.chainId??a}),i=!!(e&&(n.enabled??!0));return(0,u.aM)({...n,...s,enabled:i})}},75593:function(t,e,n){"use strict";n.d(e,{S:function(){return f}});var r=n(98029),a=n(61877),s=n(81946),i=n(52425),c=n(75230),o=n(66432);async function l(t,e){let n;let{abi:r,chainId:a,connector:i,...l}=e;n=e.account?e.account:(await (0,c.e)(t,{chainId:a,connector:i})).account;let u=t.getClient({chainId:a}),d=(0,s.s)(u,o.a,"simulateContract"),{result:f,request:m}=await d({...l,abi:r,account:n});return{chainId:u.chain.id,result:f,request:{__mode:"prepared",...m,chainId:a}}}async function u(t,e){let n,r;let{account:o,chainId:u,connector:d,__mode:f,...m}=e;n="object"==typeof o&&o?.type==="local"?t.getClient({chainId:u}):await (0,c.e)(t,{account:o??void 0,chainId:u,connector:d});let{connector:h}=(0,i.D)(t);if("prepared"===f||h?.supportsSimulation)r=m;else{let{request:e}=await l(t,{...m,account:o,chainId:u});r=e}let x=(0,s.s)(n,a.n,"writeContract");return await x({...r,...o?{account:o}:{},chain:u?{id:u}:null})}var d=n(37122);function f(t={}){var e;let{mutation:n}=t,a=(e=(0,d.Z)(t),{mutationFn:t=>u(e,t),mutationKey:["writeContract"]}),{mutate:s,mutateAsync:i,...c}=(0,r.D)({...n,...a});return{...c,writeContract:s,writeContractAsync:i}}}},function(t){t.O(0,[5112,2888,9774,179],function(){return t(t.s=37162)}),_N_E=t.O()}]);