(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9280],{37162:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my/govrewards",function(){return n(27029)}])},98082:function(e,t,n){"use strict";n.d(t,{Cd:function(){return u},X:function(){return o},bZ:function(){return l}});var r=n(85893),a=n(67294),s=n(12003),i=n(40108);let c=(0,s.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=a.forwardRef((e,t)=>{let{className:n,variant:a,...s}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(c({variant:a}),n),...s})});l.displayName="Alert";let u=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",n),...a})});u.displayName="AlertTitle";let o=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",n),...a})});o.displayName="AlertDescription"},68655:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},23432:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},64777:function(e,t,n){"use strict";var r=n(85893);t.Z=e=>{let{title:t}=e;return(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsx)("h1",{className:"text-lg font-bold",children:t})})}},44576:function(e,t,n){"use strict";var r=n(85893);n(67294);var a=n(23432);t.Z=e=>{let{isLoading:t}=e;return t?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(a.Z,{className:"mx-auto h-8 w-8 animate-spin text-white"}),(0,r.jsx)("p",{className:"mt-2 text-sm font-medium text-white",children:"Loading"})]})}):null}},58732:function(e,t,n){"use strict";var r=n(85893),a=n(9008),s=n.n(a);n(67294);var i=n(98082),c=n(68655),l=n(3294),u=n(78167),o=n(92321);t.Z=e=>{let{title:t}=e,{address:n,chain:a}=(0,o.m)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s(),{children:[(0,r.jsx)("title",{children:"".concat(t," - LIFE20")}),(0,r.jsx)("meta",{name:"".concat(t," - LIFE20"),content:"A Web3 DApp for Life20 token management"})]}),(0,r.jsxs)("header",{className:"flex justify-between items-center py-2 px-4",children:[(0,r.jsx)(u.vP,{className:"-ml-1"}),(0,r.jsx)(l.NL,{})]}),n&&!a&&(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)(i.bZ,{variant:"destructive",children:[(0,r.jsx)(c.Z,{className:"h-4 w-4"}),(0,r.jsx)(i.Cd,{children:n?"钱包网络错误":"未连接钱包"}),(0,r.jsx)(i.X,{children:n?"请切换到 ".concat("sepolia"," 网络"):"请先连接钱包，再进行操作"})]})})]})}},91529:function(e,t,n){"use strict";n.d(t,{LH:function(){return i},Vu:function(){return s},bM:function(){return l},vz:function(){return c}});var r=n(21803),a=n(15229);let s=e=>e?"".concat(e.substring(0,6),"...").concat(e.substring(e.length-4)):"",i=e=>{let t=l(e);return new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(Number(t))},c=e=>{let t=parseInt("18",10);return(0,r.v)(e,t)},l=e=>{let t=parseInt("18",10);return(0,a.b)(e,t)}},27029:function(e,t,n){"use strict";n.r(t);var r=n(85893),a=n(67294),s=n(92321),i=n(27245),c=n(78543),l=n(93778),u=n(45551),o=n(7399),d=n(91529),f=n(58732),m=n(64777),x=n(42083),h=n(44576);t.default=()=>{let{token:e}=(0,a.useContext)(l.M)||{},{address:t,chain:n}=(0,s.m)(),{currentRound:p}=(0,o.Bk)(),v=p?p-1n:0n,{rewards:g,isPending:w,error:y}=(0,u.Ci)(null==e?void 0:e.address,t,v,v>20n?v-20n:0n),[j,b]=(0,a.useState)([]);(0,a.useEffect)(()=>{g&&b([...g].sort((e,t)=>e.round>t.round?-1:1))},[g]);let{mintGovReward:N,isWriting:C,isConfirming:k,isConfirmed:Z,writeError:I}=(0,o.xg)(),[_,F]=(0,a.useState)(null);(0,a.useEffect)(()=>{Z&&b(e=>e.map(e=>e.round===_?{...e,unminted:0n,minted:e.unminted}:e))},[Z]);let T=async r=>{(0,c.S)(n)&&(null==e?void 0:e.address)&&t&&(F(r),await N(e.address,r))};return w?(0,r.jsx)(x.Z,{}):y?(0,r.jsxs)("div",{className:"text-red-500",children:["发生错误: ",y.message]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.Z,{title:"行动详情"}),(0,r.jsxs)("main",{className:"flex-grow",children:[(0,r.jsxs)("div",{className:"flex flex-col space-y-6 p-6",children:[(0,r.jsx)(m.Z,{title:"铸造治理奖励"}),(0,r.jsxs)("table",{className:"table w-full table-auto",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,r.jsx)("th",{children:"轮次"}),(0,r.jsx)("th",{className:"text-center",children:"待领取奖励"}),(0,r.jsx)("th",{})]})}),(0,r.jsx)("tbody",{children:j.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,r.jsx)("td",{children:e.round.toString()}),(0,r.jsx)("td",{className:"text-center",children:(0,d.LH)(e.unminted)}),(0,r.jsx)("td",{className:"text-center",children:e.unminted>0n?(0,r.jsx)(i.z,{variant:"outline",size:"sm",className:"text-secondary border-secondary",onClick:()=>T(e.round),disabled:C||k,children:"领取"}):e.minted>0n?(0,r.jsx)("span",{className:"text-secondary",children:"已领取"}):(0,r.jsx)("span",{className:"text-greyscale-500",children:"无奖励"})})]},e.round.toString()))})]}),I&&(0,r.jsxs)("div",{className:"text-red-500 mt-2",children:["领取失败: ",I.message]})]}),(0,r.jsx)(h.Z,{isLoading:C||k})]})]})}},78543:function(e,t,n){"use strict";n.d(t,{S:function(){return a}});var r=n(86501);let a=e=>!!e||(r.Am.error("请先将钱包链接 ".concat("sepolia")),!1)},9008:function(e,t,n){e.exports=n(23867)},13876:function(e,t,n){"use strict";n.d(t,{a:function(){return i}});var r=n(66432),a=n(81946),s=n(87831);async function i(e,t){let n;let{abi:i,chainId:c,connector:l,...u}=t;n=t.account?t.account:(await (0,s.e)(e,{chainId:c,connector:l})).account;let o=e.getClient({chainId:c}),d=(0,a.s)(o,r.a,"simulateContract"),{result:f,request:m}=await d({...u,abi:i,account:n});return{chainId:o.chain.id,result:f,request:{__mode:"prepared",...m,chainId:c}}}},96128:function(e,t,n){"use strict";n.d(t,{T:function(){return p}});var r=n(14503),a=n(8998),s=n(33840),i=n(26445),c=n(33639),l=n(87469),u=n(61163),o=n(74688),d=n(93714),f=n(47531),m=n(79524),x=n(76404),h=n(99238);async function p(e,t){let{account:n=e.account,chain:p=e.chain,accessList:v,blobs:g,data:w,gas:y,gasPrice:j,maxFeePerBlobGas:b,maxFeePerGas:N,maxPriorityFeePerGas:C,nonce:k,to:Z,value:I,..._}=t;if(!n)throw new a.o({docsPath:"/docs/actions/wallet/sendTransaction"});let F=(0,r.T)(n);try{let n;if((0,f.F)(t),null!==p&&(n=await (0,d.s)(e,m.L,"getChainId")({}),(0,s.q)({currentChainId:n,chain:p})),"local"===F.type){let t=await (0,d.s)(e,x.Z,"prepareTransactionRequest")({account:F,accessList:v,blobs:g,chain:p,chainId:n,data:w,gas:y,gasPrice:j,maxFeePerBlobGas:b,maxFeePerGas:N,maxPriorityFeePerGas:C,nonce:k,parameters:[...x.Q,"sidecars"],to:Z,value:I,..._}),r=p?.serializers?.transaction,a=await F.signTransaction(t,{serializer:r});return await (0,d.s)(e,h.p,"sendRawTransaction")({serializedTransaction:a})}let r=e.chain?.formatters?.transactionRequest?.format,a=(r||o.tG)({...(0,u.K)(_,{format:r}),accessList:v,blobs:g,chainId:n,data:w,from:F.address,gas:y,gasPrice:j,maxFeePerBlobGas:b,maxFeePerGas:N,maxPriorityFeePerGas:C,nonce:k,to:Z,value:I});return await e.request({method:"eth_sendTransaction",params:[a]},{retryCount:0})}catch(e){throw function(e,{docsPath:t,...n}){let r=(()=>{let t=(0,l.k)(e,n);return t instanceof i.cj?e:t})();return new c.mk(r,{docsPath:t,...n})}(e,{...t,account:F,chain:t.chain||void 0})}}},61877:function(e,t,n){"use strict";n.d(t,{n:function(){return i}});var r=n(55629),a=n(93714),s=n(96128);async function i(e,t){let{abi:n,address:i,args:c,dataSuffix:l,functionName:u,...o}=t,d=(0,r.R)({abi:n,args:c,functionName:u});return(0,a.s)(e,s.T,"sendTransaction")({data:`${d}${l?l.replace("0x",""):""}`,to:i,...o})}},33840:function(e,t,n){"use strict";n.d(t,{q:function(){return a}});var r=n(80377);function a({chain:e,currentChainId:t}){if(!e)throw new r.Bk;if(t!==e.id)throw new r.Yl({chain:e,currentChainId:t})}},21803:function(e,t,n){"use strict";function r(e,t){let[n,r="0"]=e.split("."),a=n.startsWith("-");if(a&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${r}`))&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>t){let[e,a,s]=[r.slice(0,t-1),r.slice(t-1,t),r.slice(t)],i=Math.round(Number(`${a}.${s}`));(r=i>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${i}`).length>t&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,t)}else r=r.padEnd(t,"0");return BigInt(`${a?"-":""}${n}${r}`)}n.d(t,{v:function(){return r}})},83540:function(e,t,n){"use strict";n.d(t,{A:function(){return m}});var r=n(95946),a=n(51973),s=n(23147),i=n(36083),c=n(81946);async function l(e,t){let{chainId:n,timeout:l=0,...u}=t,o=e.getClient({chainId:n}),d=(0,c.s)(o,a.e,"waitForTransactionReceipt"),f=await d({...u,timeout:l});if("reverted"===f.status){let e=(0,c.s)(o,s.f,"getTransaction"),t=await e({hash:f.transactionHash}),n=(0,c.s)(o,i.R,"call"),a=await n({...t,data:t.input,gasPrice:"eip1559"!==t.type?t.gasPrice:void 0,maxFeePerGas:"eip1559"===t.type?t.maxFeePerGas:void 0,maxPriorityFeePerGas:"eip1559"===t.type?t.maxPriorityFeePerGas:void 0});throw Error(a?.data?(0,r.rR)(`0x${a.data.substring(138)}`):"unknown reason")}return{...f,chainId:o.chain.id}}var u=n(36100),o=n(45631),d=n(82002),f=n(80666);function m(e={}){let{hash:t,query:n={}}=e,r=(0,f.Z)(e),a=(0,d.x)({config:r}),s=function(e,t={}){return{async queryFn({queryKey:n}){let{hash:r,...a}=n[1];if(!r)throw Error("hash is required");return l(e,{...a,onReplaced:t.onReplaced,hash:r})},queryKey:function(e={}){let{onReplaced:t,...n}=e;return["waitForTransactionReceipt",(0,u.OP)(n)]}(t)}}(r,{...e,chainId:e.chainId??a}),i=!!(t&&(n.enabled??!0));return(0,o.aM)({...n,...s,enabled:i})}},71366:function(e,t,n){"use strict";n.d(t,{S:function(){return d}});var r=n(98029),a=n(61877),s=n(81946),i=n(52425),c=n(87831),l=n(13876);async function u(e,t){let n,r;let{account:u,chainId:o,connector:d,__mode:f,...m}=t;n="object"==typeof u&&u?.type==="local"?e.getClient({chainId:o}):await (0,c.e)(e,{account:u??void 0,chainId:o,connector:d});let{connector:x}=(0,i.D)(e);if("prepared"===f||x?.supportsSimulation)r=m;else{let{request:t}=await (0,l.a)(e,{...m,account:u,chainId:o});r=t}let h=(0,s.s)(n,a.n,"writeContract");return await h({...r,...u?{account:u}:{},chain:o?{id:o}:null})}var o=n(80666);function d(e={}){var t;let{mutation:n}=e,a=(t=(0,o.Z)(e),{mutationFn:e=>u(t,e),mutationKey:["writeContract"]}),{mutate:s,mutateAsync:i,...c}=(0,r.D)({...n,...a});return{...c,writeContract:s,writeContractAsync:i}}}},function(e){e.O(0,[5112,2888,9774,179],function(){return e(e.s=37162)}),_N_E=e.O()}]);