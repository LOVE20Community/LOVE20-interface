(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9280],{37162:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my/govrewards",function(){return n(27029)}])},91318:function(e,s,n){"use strict";var t=n(85893);s.Z=()=>(0,t.jsx)("span",{className:"flex justify-center items-center",children:(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]})})},35337:function(e,s,n){"use strict";n.d(s,{Z:function(){return x}});var t=n(85893),r=n(9008),a=n.n(r),l=n(67294),i=n(99287),c=n(41664),d=n.n(c),o=()=>{let[e,s]=(0,l.useState)(!1);return(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{className:"ml-4 mt-2 focus:outline-none",onClick:()=>{s(!e)},children:[(0,t.jsx)("div",{className:"w-6 h-1 bg-black mb-1"}),(0,t.jsx)("div",{className:"w-6 h-1 bg-black mb-1"}),(0,t.jsx)("div",{className:"w-6 h-1 bg-black"})]}),e&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>{s(!1)}}),(0,t.jsx)("div",{className:"fixed top-0 left-0 z-50 h-full w-64 bg-gray-800 text-white transform ".concat(e?"translate-x-0":"-translate-x-full"," transition-transform duration-300 ease-in-out"),children:(0,t.jsxs)("ul",{className:"mt-8",children:[(0,t.jsx)("li",{className:"p-4 hover:bg-gray-700",children:(0,t.jsx)(d(),{href:"/",children:(0,t.jsx)("span",{children:"社区首页"})})}),(0,t.jsx)("li",{className:"p-4 hover:bg-gray-700",children:(0,t.jsx)(d(),{href:"/gov",children:(0,t.jsx)("span",{children:"治理首页"})})}),(0,t.jsx)("li",{className:"p-4 hover:bg-gray-700",children:(0,t.jsx)(d(),{href:"/my",children:(0,t.jsx)("span",{children:"我的首页"})})})]})})]})},x=e=>{let{title:s}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a(),{children:[(0,t.jsx)("title",{children:"".concat(s," - LIFE20")}),(0,t.jsx)("meta",{name:"".concat(s," - LIFE20"),content:"A Web3 DApp for Life20 token management"})]}),(0,t.jsxs)("header",{className:"flex justify-between items-center p-4 bg-white",children:[(0,t.jsx)(o,{}),(0,t.jsx)(i.NL,{})]})]})}},27029:function(e,s,n){"use strict";n.r(s);var t=n(85893),r=n(67294),a=n(92321),l=n(93778),i=n(45551),c=n(7399),d=n(22877),o=n(35337),x=n(91318);s.default=()=>{let{token:e}=(0,r.useContext)(l.M)||{},{address:s}=(0,a.m)(),{currentRound:n}=(0,c.Bk)(),m=n?n-1n:0n,{rewards:u,isPending:h,error:b}=(0,i.Ci)(null==e?void 0:e.address,s,m,m>20n?m-20n:0n),[j,f]=(0,r.useState)([]);(0,r.useEffect)(()=>{u&&f([...u].sort((e,s)=>e.round>s.round?-1:1))},[u]);let{mintGovReward:g,isWriting:N,isConfirming:p,isConfirmed:w,writeError:v}=(0,c.xg)();(0,r.useEffect)(()=>{w&&f(e=>e.map(e=>e.unminted>0n?{...e,unminted:0n}:e))},[w]);let y=async n=>{(null==e?void 0:e.address)&&s&&await g(e.address,n)};return h?(0,t.jsx)(x.Z,{}):b?(0,t.jsxs)("div",{className:"text-red-500",children:["发生错误: ",b.message]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Z,{title:"行动详情"}),(0,t.jsx)("main",{className:"flex-grow",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-6 p-4 bg-base-100 border-t border-gray-100",children:[(0,t.jsx)("h2",{className:"relative pl-4 text-gray-700 text-base font-medium before:content-[''] before:absolute before:left-0 before:top-0 before:bottom-0 before:w-1 before:bg-red-500",children:"铸造治理奖励"}),(0,t.jsxs)("table",{className:"table w-full table-auto",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"轮次"}),(0,t.jsx)("th",{children:"奖励"}),(0,t.jsx)("th",{})]})}),(0,t.jsx)("tbody",{children:j.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.round.toString()}),(0,t.jsx)("td",{children:(0,d.L)(e.unminted)}),(0,t.jsx)("td",{children:e.unminted>0n?(0,t.jsx)("button",{className:"btn btn-sm ".concat(N||p?"btn-disabled":"btn-primary"),onClick:()=>y(e.round),disabled:N||p,children:N||p?"领取中...":"领取"}):e.minted>0n?(0,t.jsx)("span",{className:"text-green-500",children:"已领取"}):(0,t.jsx)("span",{className:"text-gray-500",children:"无奖励"})})]},e.round.toString()))})]}),v&&(0,t.jsxs)("div",{className:"text-red-500 mt-2",children:["领取失败: ",v.message]})]})})]})}},22877:function(e,s,n){"use strict";n.d(s,{L:function(){return r},V:function(){return t}});let t=e=>e?"".concat(e.substring(0,6),"...").concat(e.substring(e.length-4)):"",r=e=>{let s=10n**BigInt(Number("18")),n=Number(e)/Number(s);return new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(n)}}},function(e){e.O(0,[8554,5551,7399,2888,9774,179],function(){return e(e.s=37162)}),_N_E=e.O()}]);