(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9280],{37162:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my/govrewards",function(){return n(27029)}])},98082:function(e,t,n){"use strict";n.d(t,{Cd:function(){return d},X:function(){return u},bZ:function(){return c}});var r=n(85893),s=n(67294),i=n(12003),a=n(40108);let l=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=s.forwardRef((e,t)=>{let{className:n,variant:s,...i}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,a.cn)(l({variant:s}),n),...i})});c.displayName="Alert";let d=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("h5",{ref:t,className:(0,a.cn)("mb-1 font-medium leading-none tracking-tight",n),...s})});d.displayName="AlertTitle";let u=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("text-sm [&_p]:leading-relaxed",n),...s})});u.displayName="AlertDescription"},68655:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},23432:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},64777:function(e,t,n){"use strict";var r=n(85893);t.Z=e=>{let{title:t}=e;return(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsx)("h1",{className:"text-lg font-bold",children:t})})}},44576:function(e,t,n){"use strict";var r=n(85893);n(67294);var s=n(23432);t.Z=e=>{let{isLoading:t}=e;return t?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(s.Z,{className:"mx-auto h-8 w-8 animate-spin text-white"}),(0,r.jsx)("p",{className:"mt-2 text-sm font-medium text-white",children:"Loading"})]})}):null}},58732:function(e,t,n){"use strict";var r=n(85893),s=n(9008),i=n.n(s);n(67294);var a=n(98082),l=n(68655),c=n(3294),d=n(78167),u=n(92321);t.Z=e=>{let{title:t}=e,{address:n,chain:s}=(0,u.m)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i(),{children:[(0,r.jsx)("title",{children:"".concat(t," - LIFE20")}),(0,r.jsx)("meta",{name:"".concat(t," - LIFE20"),content:"A Web3 DApp for Life20 token management"})]}),(0,r.jsxs)("header",{className:"flex justify-between items-center py-2 px-4",children:[(0,r.jsx)(d.vP,{className:"-ml-1"}),(0,r.jsx)(c.NL,{})]}),n&&!s&&(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)(a.bZ,{variant:"destructive",children:[(0,r.jsx)(l.Z,{className:"h-4 w-4"}),(0,r.jsx)(a.Cd,{children:n?"钱包网络错误":"未连接钱包"}),(0,r.jsx)(a.X,{children:n?"请切换到 ".concat("sepolia"," 网络"):"请先连接钱包，再进行操作"})]})})]})}},91529:function(e,t,n){"use strict";n.d(t,{LH:function(){return a},Vu:function(){return i},bM:function(){return c},vz:function(){return l}});var r=n(21803),s=n(15229);let i=e=>e?"".concat(e.substring(0,6),"...").concat(e.substring(e.length-4)):"",a=e=>{let t=c(e);return new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(Number(t))},l=e=>{let t=parseInt("18",10);return(0,r.v)(e,t)},c=e=>{let t=parseInt("18",10);return(0,s.b)(e,t)}},27029:function(e,t,n){"use strict";n.r(t);var r=n(85893),s=n(67294),i=n(92321),a=n(27245),l=n(78543),c=n(93778),d=n(45551),u=n(7399),o=n(91529),x=n(58732),m=n(64777),f=n(42083),h=n(44576);t.default=()=>{let{token:e}=(0,s.useContext)(c.M)||{},{address:t,chain:n}=(0,i.m)(),{currentRound:g}=(0,u.Bk)(),j=g?g-1n:0n,{rewards:v,isPending:N,error:p}=(0,d.Ci)(null==e?void 0:e.address,t,j,j>20n?j-20n:0n),[b,y]=(0,s.useState)([]);(0,s.useEffect)(()=>{v&&y([...v].sort((e,t)=>e.round>t.round?-1:1))},[v]);let{mintGovReward:w,isWriting:k,isConfirming:Z,isConfirmed:_,writeError:$}=(0,u.xg)(),[E,I]=(0,s.useState)(null);(0,s.useEffect)(()=>{_&&y(e=>e.map(e=>e.round===E?{...e,unminted:0n,minted:e.unminted}:e))},[_]);let C=async r=>{(0,l.S)(n)&&(null==e?void 0:e.address)&&t&&(I(r),await w(e.address,r))};return N?(0,r.jsx)(f.Z,{}):p?(0,r.jsxs)("div",{className:"text-red-500",children:["发生错误: ",p.message]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.Z,{title:"治理激励"}),(0,r.jsxs)("main",{className:"flex-grow",children:[(0,r.jsxs)("div",{className:"flex flex-col space-y-6 p-6",children:[(0,r.jsx)(m.Z,{title:"铸造治理奖励"}),(0,r.jsxs)("table",{className:"table w-full table-auto",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,r.jsx)("th",{children:"轮次"}),(0,r.jsx)("th",{className:"text-center",children:"待领取奖励"}),(0,r.jsx)("th",{})]})}),(0,r.jsx)("tbody",{children:b.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,r.jsx)("td",{children:e.round.toString()}),(0,r.jsx)("td",{className:"text-center",children:(0,o.LH)(e.unminted)}),(0,r.jsx)("td",{className:"text-center",children:e.unminted>0n?(0,r.jsx)(a.z,{variant:"outline",size:"sm",className:"text-secondary border-secondary",onClick:()=>C(e.round),disabled:k||Z,children:"领取"}):e.minted>0n?(0,r.jsx)("span",{className:"text-secondary",children:"已领取"}):(0,r.jsx)("span",{className:"text-greyscale-500",children:"无奖励"})})]},e.round.toString()))})]}),$&&(0,r.jsxs)("div",{className:"text-red-500 mt-2",children:["领取失败: ",$.message]})]}),(0,r.jsx)(h.Z,{isLoading:k||Z})]})]})}},78543:function(e,t,n){"use strict";n.d(t,{S:function(){return s}});var r=n(86501);let s=e=>!!e||(r.Am.error("请先将钱包链接 ".concat("sepolia")),!1)},9008:function(e,t,n){e.exports=n(23867)},21803:function(e,t,n){"use strict";function r(e,t){let[n,r="0"]=e.split("."),s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${r}`))&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>t){let[e,s,i]=[r.slice(0,t-1),r.slice(t-1,t),r.slice(t)],a=Math.round(Number(`${s}.${i}`));(r=a>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${a}`).length>t&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,t)}else r=r.padEnd(t,"0");return BigInt(`${s?"-":""}${n}${r}`)}n.d(t,{v:function(){return r}})}},function(e){e.O(0,[5112,2888,9774,179],function(){return e(e.s=37162)}),_N_E=e.O()}]);