(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9280],{37162:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my/govrewards",function(){return n(27029)}])},91318:function(e,r,n){"use strict";var s=n(85893);r.Z=()=>(0,s.jsx)("span",{className:"flex justify-center items-center",children:(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]})})},35337:function(e,r,n){"use strict";n.d(r,{Z:function(){return u}});var s=n(85893),t=n(9008),a=n.n(t),c=n(67294),i=n(91428),l=n(41664),o=n.n(l),d=()=>{let[e,r]=(0,c.useState)(!1);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("button",{className:"ml-4 mt-2 focus:outline-none",onClick:()=>{r(!e)},children:[(0,s.jsx)("div",{className:"w-6 h-1 bg-black mb-1"}),(0,s.jsx)("div",{className:"w-6 h-1 bg-black mb-1"}),(0,s.jsx)("div",{className:"w-6 h-1 bg-black"})]}),e&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>{r(!1)}}),(0,s.jsx)("div",{className:"fixed top-0 left-0 z-50 h-full w-64 bg-gray-800 text-white transform ".concat(e?"translate-x-0":"-translate-x-full"," transition-transform duration-300 ease-in-out"),children:(0,s.jsxs)("ul",{className:"mt-8",children:[(0,s.jsx)("li",{className:"p-4 hover:bg-gray-700",children:(0,s.jsx)(o(),{href:"/",children:(0,s.jsx)("span",{children:"社区首页"})})}),(0,s.jsx)("li",{className:"p-4 hover:bg-gray-700",children:(0,s.jsx)(o(),{href:"/gov",children:(0,s.jsx)("span",{children:"治理首页"})})}),(0,s.jsx)("li",{className:"p-4 hover:bg-gray-700",children:(0,s.jsx)(o(),{href:"/my",children:(0,s.jsx)("span",{children:"我的首页"})})}),(0,s.jsx)("li",{className:"p-4 hover:bg-gray-700",children:(0,s.jsx)(o(),{href:"/launch",children:(0,s.jsx)("span",{children:"发射平台"})})}),(0,s.jsx)("li",{className:"p-4 hover:bg-gray-700",children:(0,s.jsx)(o(),{href:"/dex/swap",children:(0,s.jsx)("span",{children:"交易代币"})})}),(0,s.jsx)("li",{className:"p-4 hover:bg-gray-700",children:(0,s.jsx)(o(),{href:"/launch/deposit",children:(0,s.jsxs)("span",{children:["兑换","ETH20"]})})})]})})]})},u=e=>{let{title:r}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a(),{children:[(0,s.jsx)("title",{children:"".concat(r," - LIFE20")}),(0,s.jsx)("meta",{name:"".concat(r," - LIFE20"),content:"A Web3 DApp for Life20 token management"})]}),(0,s.jsxs)("header",{className:"flex justify-between items-center p-4 bg-white border-b border-gray-100",children:[(0,s.jsx)(d,{}),(0,s.jsx)(i.NL,{})]})]})}},91529:function(e,r,n){"use strict";n.d(r,{LH:function(){return c},Vu:function(){return a},ZC:function(){return o},bM:function(){return l},vz:function(){return i}});var s=n(21803),t=n(15229);let a=e=>e?"".concat(e.substring(0,6),"...").concat(e.substring(e.length-4)):"",c=e=>{let r=l(e);return new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(Number(r))},i=e=>{let r=parseInt("18",10);return(0,s.v)(e,r)},l=e=>{let r=parseInt("18",10);return(0,t.b)(e,r)},o=e=>e>86400?"".concat(Math.floor(e/86400),"天").concat(Math.floor(e%86400/3600),"小时").concat(Math.floor(e%3600/60),"分"):e>3600?"".concat(Math.floor(e/3600),"小时").concat(Math.floor(e%3600/60),"分"):"".concat(Math.floor(e/60),"分").concat(e%60,"秒")},27029:function(e,r,n){"use strict";n.r(r);var s=n(85893),t=n(67294),a=n(92321),c=n(93778),i=n(45551),l=n(7399),o=n(91529),d=n(35337),u=n(91318);r.default=()=>{let{token:e}=(0,t.useContext)(c.M)||{},{address:r}=(0,a.m)(),{currentRound:n}=(0,l.Bk)(),h=n?n-1n:0n,{rewards:x,isPending:f,error:m}=(0,i.Ci)(null==e?void 0:e.address,r,h,h>20n?h-20n:0n),[b,j]=(0,t.useState)([]);(0,t.useEffect)(()=>{x&&j([...x].sort((e,r)=>e.round>r.round?-1:1))},[x]);let{mintGovReward:g,isWriting:p,isConfirming:N,isConfirmed:v,writeError:w}=(0,l.xg)();(0,t.useEffect)(()=>{v&&j(e=>e.map(e=>e.unminted>0n?{...e,unminted:0n}:e))},[v]);let y=async n=>{(null==e?void 0:e.address)&&r&&await g(e.address,n)};return f?(0,s.jsx)(u.Z,{}):m?(0,s.jsxs)("div",{className:"text-red-500",children:["发生错误: ",m.message]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{title:"行动详情"}),(0,s.jsx)("main",{className:"flex-grow",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-6 p-4 bg-white ",children:[(0,s.jsx)("h2",{className:"relative pl-4 text-gray-700 text-base font-medium before:content-[''] before:absolute before:left-0 before:top-0 before:bottom-0 before:w-1 before:bg-red-500",children:"铸造治理奖励"}),(0,s.jsxs)("table",{className:"table w-full table-auto",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,s.jsx)("th",{children:"轮次"}),(0,s.jsx)("th",{children:"奖励"}),(0,s.jsx)("th",{})]})}),(0,s.jsx)("tbody",{children:b.map(e=>(0,s.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,s.jsx)("td",{children:e.round.toString()}),(0,s.jsx)("td",{children:(0,o.LH)(e.unminted)}),(0,s.jsx)("td",{children:e.unminted>0n?(0,s.jsx)("button",{className:"btn btn-sm ".concat(p||N?"btn-disabled":"btn-primary"),onClick:()=>y(e.round),disabled:p||N,children:p||N?"领取中...":"领取"}):e.minted>0n?(0,s.jsx)("span",{className:"text-green-500",children:"已领取"}):(0,s.jsx)("span",{className:"text-gray-500",children:"无奖励"})})]},e.round.toString()))})]}),w&&(0,s.jsxs)("div",{className:"text-red-500 mt-2",children:["领取失败: ",w.message]})]})})]})}},89810:function(e,r,n){"use strict";n.d(r,{u:function(){return l}});var s=n(37003),t=n(36100),a=n(82451),c=n(82002),i=n(37122);function l(e={}){let{abi:r,address:n,functionName:l,query:o={}}=e,d=e.code,u=(0,i.Z)(e),h=(0,c.x)({config:u}),x=function(e,r={}){return{async queryFn({queryKey:n}){let t=r.abi;if(!t)throw Error("abi is required");let{functionName:a,scopeKey:c,...i}=n[1],l=(()=>{let e=n[1];if(e.address)return{address:e.address};if(e.code)return{code:e.code};throw Error("address or code is required")})();if(!a)throw Error("functionName is required");return(0,s.L)(e,{abi:t,functionName:a,args:i.args,...l,...i})},queryKey:function(e={}){let{abi:r,...n}=e;return["readContract",(0,t.OP)(n)]}(r)}}(u,{...e,chainId:e.chainId??h}),f=!!((n||d)&&r&&l&&(o.enabled??!0));return(0,a.aM)({...o,...x,enabled:f,structuralSharing:o.structuralSharing??t.if})}}},function(e){e.O(0,[4784,5551,7399,2888,9774,179],function(){return e(e.s=37162)}),_N_E=e.O()}]);