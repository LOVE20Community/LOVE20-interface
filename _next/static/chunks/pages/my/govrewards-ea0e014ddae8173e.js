(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9280],{37162:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my/govrewards",function(){return r(27029)}])},91318:function(e,n,r){"use strict";var s=r(85893);n.Z=()=>(0,s.jsx)("span",{className:"flex justify-center items-center",children:(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]})})},35337:function(e,n,r){"use strict";r.d(n,{Z:function(){return u}});var s=r(85893),t=r(9008),i=r.n(t),a=r(67294),l=r(91428),c=r(41664),d=r.n(c),o=()=>{let[e,n]=(0,a.useState)(!1);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("button",{className:"ml-4 mt-2 focus:outline-none",onClick:()=>{n(!e)},children:[(0,s.jsx)("div",{className:"w-6 h-1 bg-black mb-1"}),(0,s.jsx)("div",{className:"w-6 h-1 bg-black mb-1"}),(0,s.jsx)("div",{className:"w-6 h-1 bg-black"})]}),e&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>{n(!1)}}),(0,s.jsx)("div",{className:"fixed top-0 left-0 z-50 h-full w-64 bg-gray-800 text-white transform ".concat(e?"translate-x-0":"-translate-x-full"," transition-transform duration-300 ease-in-out"),children:(0,s.jsxs)("ul",{className:"mt-8",children:[(0,s.jsx)("li",{className:"p-4 hover:bg-gray-700",children:(0,s.jsx)(d(),{href:"/",children:(0,s.jsx)("span",{children:"社区首页"})})}),(0,s.jsx)("li",{className:"p-4 hover:bg-gray-700",children:(0,s.jsx)(d(),{href:"/gov",children:(0,s.jsx)("span",{children:"治理首页"})})}),(0,s.jsx)("li",{className:"p-4 hover:bg-gray-700",children:(0,s.jsx)(d(),{href:"/my",children:(0,s.jsx)("span",{children:"我的首页"})})}),(0,s.jsx)("li",{className:"p-4 hover:bg-gray-700",children:(0,s.jsx)(d(),{href:"/launch",children:(0,s.jsx)("span",{children:"发射平台"})})}),(0,s.jsx)("li",{className:"p-4 hover:bg-gray-700",children:(0,s.jsx)(d(),{href:"/dex/swap",children:(0,s.jsx)("span",{children:"交易代币"})})}),(0,s.jsx)("li",{className:"p-4 hover:bg-gray-700",children:(0,s.jsx)(d(),{href:"/launch/deposit",children:(0,s.jsxs)("span",{children:["兑换","ETH20"]})})})]})})]})},u=e=>{let{title:n}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i(),{children:[(0,s.jsx)("title",{children:"".concat(n," - LIFE20")}),(0,s.jsx)("meta",{name:"".concat(n," - LIFE20"),content:"A Web3 DApp for Life20 token management"})]}),(0,s.jsxs)("header",{className:"flex justify-between items-center p-4 bg-white",children:[(0,s.jsx)(o,{}),(0,s.jsx)(l.NL,{})]})]})}},91529:function(e,n,r){"use strict";r.d(n,{LH:function(){return a},Vu:function(){return i},bM:function(){return c},vz:function(){return l}});var s=r(21803),t=r(15229);let i=e=>e?"".concat(e.substring(0,6),"...").concat(e.substring(e.length-4)):"",a=e=>{let n=c(e);return new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(Number(n))},l=e=>{let n=parseInt("18",10);return(0,s.v)(e,n)},c=e=>{let n=parseInt("18",10);return(0,t.b)(e,n)}},27029:function(e,n,r){"use strict";r.r(n);var s=r(85893),t=r(67294),i=r(92321),a=r(93778),l=r(45551),c=r(7399),d=r(91529),o=r(35337),u=r(91318);n.default=()=>{let{token:e}=(0,t.useContext)(a.M)||{},{address:n}=(0,i.m)(),{currentRound:r}=(0,c.Bk)(),h=r?r-1n:0n,{rewards:x,isPending:m,error:f}=(0,l.Ci)(null==e?void 0:e.address,n,h,h>20n?h-20n:0n),[b,j]=(0,t.useState)([]);(0,t.useEffect)(()=>{x&&j([...x].sort((e,n)=>e.round>n.round?-1:1))},[x]);let{mintGovReward:g,isWriting:p,isConfirming:N,isConfirmed:v,writeError:w}=(0,c.xg)();(0,t.useEffect)(()=>{v&&j(e=>e.map(e=>e.unminted>0n?{...e,unminted:0n}:e))},[v]);let y=async r=>{(null==e?void 0:e.address)&&n&&await g(e.address,r)};return m?(0,s.jsx)(u.Z,{}):f?(0,s.jsxs)("div",{className:"text-red-500",children:["发生错误: ",f.message]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{title:"行动详情"}),(0,s.jsx)("main",{className:"flex-grow",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-6 p-4 bg-base-100 border-t border-gray-100",children:[(0,s.jsx)("h2",{className:"relative pl-4 text-gray-700 text-base font-medium before:content-[''] before:absolute before:left-0 before:top-0 before:bottom-0 before:w-1 before:bg-red-500",children:"铸造治理奖励"}),(0,s.jsxs)("table",{className:"table w-full table-auto",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"轮次"}),(0,s.jsx)("th",{children:"奖励"}),(0,s.jsx)("th",{})]})}),(0,s.jsx)("tbody",{children:b.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.round.toString()}),(0,s.jsx)("td",{children:(0,d.LH)(e.unminted)}),(0,s.jsx)("td",{children:e.unminted>0n?(0,s.jsx)("button",{className:"btn btn-sm ".concat(p||N?"btn-disabled":"btn-primary"),onClick:()=>y(e.round),disabled:p||N,children:p||N?"领取中...":"领取"}):e.minted>0n?(0,s.jsx)("span",{className:"text-green-500",children:"已领取"}):(0,s.jsx)("span",{className:"text-gray-500",children:"无奖励"})})]},e.round.toString()))})]}),w&&(0,s.jsxs)("div",{className:"text-red-500 mt-2",children:["领取失败: ",w.message]})]})})]})}},21803:function(e,n,r){"use strict";function s(e,n){let[r,s="0"]=e.split("."),t=r.startsWith("-");if(t&&(r=r.slice(1)),s=s.replace(/(0+)$/,""),0===n)1===Math.round(Number(`.${s}`))&&(r=`${BigInt(r)+1n}`),s="";else if(s.length>n){let[e,t,i]=[s.slice(0,n-1),s.slice(n-1,n),s.slice(n)],a=Math.round(Number(`${t}.${i}`));(s=a>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${a}`).length>n&&(s=s.slice(1),r=`${BigInt(r)+1n}`),s=s.slice(0,n)}else s=s.padEnd(n,"0");return BigInt(`${t?"-":""}${r}${s}`)}r.d(n,{v:function(){return s}})},89810:function(e,n,r){"use strict";r.d(n,{u:function(){return c}});var s=r(37003),t=r(36100),i=r(82451),a=r(82002),l=r(37122);function c(e={}){let{abi:n,address:r,functionName:c,query:d={}}=e,o=e.code,u=(0,l.Z)(e),h=(0,a.x)({config:u}),x=function(e,n={}){return{async queryFn({queryKey:r}){let t=n.abi;if(!t)throw Error("abi is required");let{functionName:i,scopeKey:a,...l}=r[1],c=(()=>{let e=r[1];if(e.address)return{address:e.address};if(e.code)return{code:e.code};throw Error("address or code is required")})();if(!i)throw Error("functionName is required");return(0,s.L)(e,{abi:t,functionName:i,args:l.args,...c,...l})},queryKey:function(e={}){let{abi:n,...r}=e;return["readContract",(0,t.OP)(r)]}(n)}}(u,{...e,chainId:e.chainId??h}),m=!!((r||o)&&n&&c&&(d.enabled??!0));return(0,i.aM)({...d,...x,enabled:m,structuralSharing:d.structuralSharing??t.if})}}},function(e){e.O(0,[9215,5551,7399,2888,9774,179],function(){return e(e.s=37162)}),_N_E=e.O()}]);