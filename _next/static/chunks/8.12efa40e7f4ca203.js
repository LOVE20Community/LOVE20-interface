"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8],{23432:function(e,t,n){n.d(t,{Z:function(){return a}});let a=(0,n(31134).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},42083:function(e,t,n){var a=n(85893),s=n(23432);t.Z=()=>(0,a.jsx)(s.Z,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})},44576:function(e,t,n){var a=n(85893);n(67294);var s=n(23432);t.Z=e=>{let{isLoading:t}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(s.Z,{className:"mx-auto h-8 w-8 animate-spin text-white"}),(0,a.jsx)("p",{className:"mt-2 text-sm font-medium text-white",children:"Loading"})]})}):null}},98216:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var a=n(85893),s=n(67294),i=n(92321),l=n(53438),d=n(27245),r=n(21774),u=n(11163),p=n(86501),c=n(71366),y=n(83540);let m=[{type:"fallback",stateMutability:"payable"},{type:"function",name:"allowance",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"approve",inputs:[{name:"guy",type:"address",internalType:"address"},{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"decimals",inputs:[],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{type:"function",name:"deposit",inputs:[],outputs:[],stateMutability:"payable"},{type:"function",name:"name",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"symbol",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"transfer",inputs:[{name:"dst",type:"address",internalType:"address"},{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFrom",inputs:[{name:"src",type:"address",internalType:"address"},{name:"dst",type:"address",internalType:"address"},{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"withdraw",inputs:[{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"Approval",inputs:[{name:"src",type:"address",indexed:!0,internalType:"address"},{name:"guy",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Deposit",inputs:[{name:"dst",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"src",type:"address",indexed:!0,internalType:"address"},{name:"dst",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Withdrawal",inputs:[{name:"src",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],o=()=>{let{writeContract:e,data:t,isPending:n,error:a}=(0,c.S)(),s=async t=>{try{await e({address:"0xc2F9D4CAd67124e86d7a5E7Bcd9DF26259B8c588",abi:m,functionName:"deposit",args:[],value:t})}catch(e){console.error("Deposit failed:",e)}},{isLoading:i,isSuccess:l}=(0,y.A)({hash:t});return{deposit:s,writeData:t,isPending:n,error:a,isConfirming:i,isConfirmed:l}};var x=n(91529),f=n(42083),b=n(44576),v=n(78543),h=n(64777),T=n(19638),g=()=>{let[e,t]=(0,s.useState)(""),{address:n,chain:c}=(0,i.m)(),y=(0,u.useRouter)(),{data:m,error:g,isLoading:w,refetch:j}=(0,l.K)({address:n}),{balance:N,isPending:M,error:$}=(0,T.hS)("0xc2F9D4CAd67124e86d7a5E7Bcd9DF26259B8c588",n),k=()=>!!(0,v.S)(c)&&(!(0n>=(0,x.vz)(e))||(p.Am.error("兑换数量不能为0"),!1)),{deposit:C,isPending:E,isConfirming:B,isConfirmed:Z,error:A}=o(),S=async()=>{if(k())try{await C((0,x.vz)(e))}catch(e){console.error(e)}};return(0,s.useEffect)(()=>{Z&&(p.Am.success("兑换成功"),setTimeout(()=>{y.back()},2e3))},[Z]),(0,s.useEffect)(()=>{g&&p.Am.error(g.message)},[g]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"p-6 shadow-sm",children:[(0,a.jsx)(h.Z,{title:"换得 ".concat("ETH20")}),(0,a.jsx)("div",{className:"stats w-full",children:(0,a.jsxs)("div",{className:"stat place-items-center",children:[(0,a.jsxs)("div",{className:"stat-title text-sm",children:["我的","ETH20"]}),(0,a.jsx)("div",{className:"stat-value text-secondary mt-2",children:(0,x.LH)(N||0n)}),(0,a.jsx)("div",{className:"stat-desc text-sm mt-2"})]})}),(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsxs)("span",{className:"text-sm",children:["用 ",null==m?void 0:m.symbol," 兑换"]}),(0,a.jsxs)("span",{className:"text-secondary text-sm ml-2",children:["(1",null==m?void 0:m.symbol," = 1","ETH20",")"]})]}),(0,a.jsx)("div",{className:"flex justify-between",children:(0,a.jsx)(r.I,{type:"number",placeholder:"填写 ".concat(null==m?void 0:m.symbol," 数量"),value:e,onChange:e=>t(e.target.value),className:"my-auto",disabled:E||B})}),(0,a.jsxs)("div",{className:"flex items-center text-sm mb-4",children:[(0,a.jsxs)("span",{className:"text-greyscale-400",children:[w?(0,a.jsx)(f.Z,{}):(0,x.LH)((null==m?void 0:m.value)||0n)," ",null==m?void 0:m.symbol]}),(0,a.jsx)(d.z,{variant:"link",size:"sm",onClick:()=>{t((0,x.bM)((null==m?void 0:m.value)||0n))},className:"text-secondary",disabled:w||E||B,children:"最高"})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(d.z,{className:"w-1/2 text-white py-2 rounded-lg",onClick:S,disabled:E||B||Z,children:E?"兑换中...":B?"确认中...":Z?"兑换成功":"兑换"})}),g&&(0,a.jsx)("div",{className:"text-red-500",children:g.message}),A&&(0,a.jsx)("div",{className:"text-red-500",children:A.message})]}),(0,a.jsx)(b.Z,{isLoading:E||B})]})}},78543:function(e,t,n){n.d(t,{S:function(){return s}});var a=n(86501);let s=e=>!!e||(a.Am.error("请先将钱包链接 ".concat("sepolia")),!1)},21803:function(e,t,n){n.d(t,{v:function(){return a}});function a(e,t){let[n,a="0"]=e.split("."),s=n.startsWith("-");if(s&&(n=n.slice(1)),a=a.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${a}`))&&(n=`${BigInt(n)+1n}`),a="";else if(a.length>t){let[e,s,i]=[a.slice(0,t-1),a.slice(t-1,t),a.slice(t)],l=Math.round(Number(`${s}.${i}`));(a=l>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${l}`).length>t&&(a=a.slice(1),n=`${BigInt(n)+1n}`),a=a.slice(0,t)}else a=a.padEnd(t,"0");return BigInt(`${s?"-":""}${n}${a}`)}}}]);