"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[381],{21774:function(e,s,n){n.d(s,{I:function(){return r}});var l=n(85893),a=n(67294),t=n(98997);let r=a.forwardRef((e,s)=>{let{className:n,type:a,...r}=e;return(0,l.jsx)("input",{type:a,className:(0,t.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:s,...r})});r.displayName="Input"},34426:function(e,s,n){n.d(s,{Z:function(){return o}});var l=n(85893),a=n(67294),t=n(23432),r=n(93461),i=n(92321),d=n(89469),c=n(86501);function o(e){let{tokenAddress:s,tokenSymbol:n,tokenDecimals:o,tokenImage:x}=e,[m,u]=(0,a.useState)(!1),{isConnected:h}=(0,i.m)(),{data:b}=(0,d.p)(),j=async()=>{if(!h){alert("请先连接你的钱包");return}u(!0);try{if(!b){alert("无法获取钱包客户端");return}await b.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:s,symbol:n,decimals:o,image:x}}})?(console.log("代币已添加到 MetaMask 钱包"),c.ZP.success("代币已成功添加到 MetaMask 钱包")):(console.log("用户拒绝添加代币"),c.ZP.error("用户拒绝添加代币"))}catch(e){console.error("添加代币失败:",e),c.ZP.error("添加代币失败，请检查控制台以获取更多信息")}finally{u(!1)}};return(0,l.jsx)("button",{onClick:j,disabled:m,className:"flex items-center justify-center p-1 rounded hover:bg-gray-200 focus:outline-none",children:m?(0,l.jsx)(t.Z,{className:"h-4 w-4 animate-spin"}):(0,l.jsx)(r.Z,{className:"h-4 w-4 text-gray-500"})})}},74089:function(e,s,n){var l=n(85893),a=n(67294),t=n(91529);s.Z=e=>{let{initialTimeLeft:s}=e,[n,r]=(0,a.useState)(s);(0,a.useEffect)(()=>{if(s<=0)return;r(s);let e=setInterval(()=>{r(s=>s<=1?(clearInterval(e),window.location.reload(),0):s-1)},1e3);return()=>{clearInterval(e)}},[s]);let i=(0,t.ZC)(n);return(0,l.jsx)(l.Fragment,{children:i})}},68789:function(e,s,n){var l=n(85893),a=n(67294);n(41664);var t=n(93778),r=n(27460),i=n(34426),d=n(91318);s.Z=e=>{let{showGovernanceLink:s=!1}=e,{token:n}=(0,a.useContext)(t.M)||{};return n?(0,l.jsxs)("div",{className:"flex items-center mb-4",children:[(0,l.jsx)("div",{className:"mr-2",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("span",{className:"font-bold text-2xl text-yellow-500",children:"$"}),(0,l.jsx)("span",{className:"font-bold text-2xl mr-2",children:n.symbol}),(0,l.jsx)(r.Z,{address:n.address}),(0,l.jsx)(i.Z,{tokenAddress:null==n?void 0:n.address,tokenSymbol:(null==n?void 0:n.symbol)||"",tokenDecimals:(null==n?void 0:n.decimals)||0})]})}),!1]}):(0,l.jsx)(d.Z,{})}},10381:function(e,s,n){n.r(s),n.d(s,{default:function(){return Z}});var l=n(85893),a=n(67294),t=n(93778),r=n(70019),i=n(35337),d=n(91318),c=n(68789),o=n(91529),x=n(3125);let m={totalSupply:1e28,fairLaunch:1e27,govRewards:45e26,actionRewards:45e26};var u=n(74089),h=e=>{let{token:s,launchInfo:n}=e,{data:a}=(0,x.O)(),t=a?n.secondHalfMinBlocks-(a-n.secondHalfStartBlock):0,r=t>0?Number(t)*Number("12"):0;return((0,o.ZC)(r),n)?(0,l.jsxs)("div",{className:"bg-white px-6 pb-6 mb-4 shadow-sm",children:[(0,l.jsx)("div",{className:"flex items-center justify-between mb-2",children:(null==n?void 0:n.hasEnded)?(0,l.jsx)("div",{className:"flex justify-between items-center",children:(0,l.jsx)("h2",{className:"text-xl font-medium text-red-600",children:"发射已结束"})}):(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-xl font-medium text-blue-400 mr-2",children:"公平发射中"}),Number(n.totalContributed)>=Number(n.parentTokenFundraisingGoal)&&(0,l.jsxs)("span",{className:"text-sm text-gray-600",children:["剩余结束时间: ",(0,l.jsx)(u.Z,{initialTimeLeft:r})]})]})}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,l.jsx)("div",{className:"bg-blue-600 h-3 rounded-full",style:{width:"".concat(Number(n.totalContributed)<Number(n.parentTokenFundraisingGoal)?Number(n.totalContributed)/Number(n.parentTokenFundraisingGoal)*100:100,"%")}})}),(0,l.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["已筹 ",(0,o.LH)(n.totalContributed)," ",null==s?void 0:s.parentTokenSymbol," /"," ",(0,o.LH)(n.parentTokenFundraisingGoal)," ",null==s?void 0:s.parentTokenSymbol,"(",(Number(n.totalContributed)/Number(n.parentTokenFundraisingGoal)*100).toFixed(2),"%)"]})]}),(0,l.jsx)("div",{className:"flex justify-center mb-6",children:(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"text-gray-500 mr-2",children:"共发射"}),(0,l.jsx)("span",{className:"text-orange-500 text-2xl font-bold",children:"".concat((0,o.LH)(BigInt(m.fairLaunch)))}),(0,l.jsx)("span",{className:"text-gray-500 ml-2",children:null==s?void 0:s.symbol})]})}),(0,l.jsxs)("div",{className:"bg-gray-100 text-gray-500 rounded-lg p-4 text-sm",children:[(0,l.jsx)("p",{className:"mb-1",children:"经济模型："}),(0,l.jsxs)("p",{children:["1、代币总量：",(0,o.LH)(BigInt(m.totalSupply))]}),(0,l.jsxs)("p",{children:["2、发射数量：",(0,o.LH)(BigInt(m.fairLaunch))," (10%)"]}),(0,l.jsxs)("p",{children:["3、治理激励：",(0,o.LH)(BigInt(m.govRewards))," (45%)"]}),(0,l.jsxs)("p",{className:"mb-4",children:["4、行动激励：",(0,o.LH)(BigInt(m.actionRewards))," (45%)"]}),(0,l.jsx)("p",{className:"mb-1",children:"发射规则："}),(0,l.jsx)("p",{children:"1、代币发放：按申购数量占比比例发放；"}),(0,l.jsx)("p",{children:"2、超过募集目标的父币，将按申购比例返还；"})]})]})]}):(0,l.jsx)("div",{className:"text-red-500",children:"找不到发射信息"})},b=n(92321),j=n(27245),g=n(21774),f=n(19638),p=n(86501),v=n(41664),N=n.n(v),y=e=>{let{token:s,launchInfo:n}=e,[t,i]=(0,a.useState)(""),{address:d}=(0,b.m)(),{balance:c,isPending:x,error:m}=(0,f.hS)(null==s?void 0:s.parentTokenAddress,d),{contributed:u,isPending:h,error:v}=(0,r.ap)(null==s?void 0:s.address,d),{approve:y,isWriting:w,isConfirming:k,isConfirmed:C,writeError:Z}=(0,f.yA)(null==s?void 0:s.parentTokenAddress),L=async()=>{try{await y("0x5978945B0C36a5442FD4cc5483091c08202DF044",(0,o.vz)(t))}catch(e){console.error(e)}};(0,a.useEffect)(()=>{C&&p.Am.success("授权成功")},[C]),console.log("parseUnits(contributeAmount)",(0,o.vz)(t));let{contribute:T,isPending:I,isConfirming:z,isConfirmed:E,writeError:S}=(0,r.OY)(),H=async()=>{try{await T(null==s?void 0:s.address,(0,o.vz)(t))}catch(e){console.error(e)}};(0,a.useEffect)(()=>{E&&(p.Am.success("申购成功"),setTimeout(()=>{window.location.reload()},2e3))},[E]);let P=w||k||C;return s?(0,l.jsxs)("div",{className:"bg-white p-6 shadow-sm space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-base font-medium mb-2",children:"我的申购"}),(0,l.jsx)("div",{className:"flex justify-center mb-6",children:(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"text-2xl font-bold text-orange-400 mr-1",children:(0,o.LH)(u||0n)}),(0,l.jsx)("span",{className:"text-sm text-gray-500",children:s.parentTokenSymbol})]})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"flex justify-between",children:(0,l.jsx)(g.I,{type:"number",placeholder:"增加申购数量(".concat(s.parentTokenSymbol,")"),value:t,onChange:e=>i(e.target.value),className:"my-auto",disabled:P||0n>=(c||0n)})}),(0,l.jsxs)("div",{className:"flex items-center text-sm mb-4",children:[(0,l.jsxs)("span",{className:"text-gray-400",children:[(0,o.LH)(c||0n)," ",s.parentTokenSymbol]}),(0,l.jsx)(j.z,{variant:"link",size:"sm",onClick:()=>{i((0,o.bM)(c||0n))},className:"".concat(P||0n>=(c||0n)?"text-gray-400 cursor-not-allowed":"text-blue-600"),disabled:P||0n>=(c||0n),children:"最高"}),(0,l.jsx)(N(),{href:"/".concat(s.symbol,"/launch/deposit"),children:(0,l.jsxs)(j.z,{variant:"link",size:"sm",className:"".concat((c||0n)>0n?"text-gray-400":"text-blue-600"),children:["获取",s.parentTokenSymbol]})})]}),(0,l.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,l.jsx)(j.z,{className:"w-1/2 text-white ".concat(P?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),onClick:L,disabled:P,children:P?"1.已授权":w||k?"授权中...":"1.授权"}),(0,l.jsx)(j.z,{className:"w-1/2 text-white py-2 rounded-lg ".concat(C?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"),onClick:H,disabled:!C||I||z||E,children:I||z?"申购中...":E?"2.申购成功":"2.申购"})]})]}),Z&&(0,l.jsx)("div",{className:"text-red-500",children:Z.message}),S&&(0,l.jsx)("div",{className:"text-red-500",children:S.message})]}):""},w=e=>{let{token:s,launchInfo:n}=e,{address:i}=(0,b.m)(),{setToken:c}=(0,a.useContext)(t.M)||{},{contributed:x,isPending:u,error:h}=(0,r.ap)(null==s?void 0:s.address,i),{claimed:g,isPending:f,error:v}=(0,r.ur)(null==s?void 0:s.address,i),{extraRefunded:N,isPending:y,error:w}=(0,r.Vh)(null==s?void 0:s.address,i),k=n.totalContributed?BigInt(m.fairLaunch)*(x||0n)/BigInt(n.totalContributed):0n,{claim:C,isWriting:Z,writeError:L,isConfirming:T,isConfirmed:I}=(0,r.z7)(),z=async()=>{try{await C(null==s?void 0:s.address)}catch(e){console.error("领取失败:",e)}};return((0,a.useEffect)(()=>{I?(p.ZP.success("领取成功"),null==c||c({...s,hasEnded:!0}),setTimeout(()=>{window.location.reload()},2e3)):L&&p.ZP.error("领取失败")},[I,L]),f)?(0,l.jsx)(d.Z,{}):(0,l.jsxs)("div",{className:"bg-white p-6 shadow-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-base font-medium mb-2",children:"领取代币"}),(0,l.jsx)("div",{className:"flex justify-center mb-2",children:(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"text-2xl font-bold text-orange-400 mr-1",children:(0,o.LH)(k)}),(0,l.jsx)("span",{className:"text-sm text-gray-500",children:null==s?void 0:s.symbol})]})})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"mb-6 flex space-x-8",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"text-sm text-gray-500",children:"我的申购："}),(0,o.LH)(x||0n),u?(0,l.jsx)(d.Z,{}):(0,l.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:null==s?void 0:s.parentTokenSymbol})]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"text-sm text-gray-500",children:"退回父币："}),(0,o.LH)(N||0n),y?(0,l.jsx)(d.Z,{}):(0,l.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:null==s?void 0:s.parentTokenSymbol})]})]}),(0,l.jsxs)("div",{className:"flex justify-center",children:[0>=Number(x)&&(0,l.jsx)(j.z,{className:"w-1/2 bg-gray-500 text-white px-4 py-2 rounded",disabled:!0,children:"未申购"}),Number(x)>0&&!g&&(0,l.jsx)(j.z,{className:"w-1/2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",onClick:z,disabled:Z||T,children:Z||T?"领取中...":"领取"}),Number(x)>0&&g&&(0,l.jsx)(j.z,{className:"w-1/2 bg-gray-400 text-white px-4 py-2 rounded",disabled:!0,children:"已领取"})]}),L&&(0,l.jsx)("div",{className:"text-red-500",children:L.message}),h&&(0,l.jsx)("div",{className:"text-red-500",children:h.message}),w&&(0,l.jsx)("div",{className:"text-red-500",children:w.message}),v&&(0,l.jsx)("div",{className:"text-red-500",children:v.message})]})]})},k=n(57457),C=n(4270);function Z(){let{token:e}=(0,a.useContext)(t.M)||{token:null},{launchInfo:s,isPending:n,error:x}=(0,r.zL)(e?e.address:"0x0");return n?(0,l.jsx)(d.Z,{}):x?(0,l.jsx)("div",{className:"text-red-500",children:"加载发射信息失败"}):s?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.Z,{title:"Launch"}),(0,l.jsxs)("main",{className:"flex-grow",children:[(0,l.jsx)("div",{className:"px-6 pt-6 pb-1  bg-white",children:(0,l.jsx)(c.Z,{showGovernanceLink:!1})}),(0,l.jsx)(h,{token:e,launchInfo:s}),!s.hasEnded&&e&&(0,l.jsx)(y,{token:e,launchInfo:s}),s.hasEnded&&e&&(0,l.jsx)(w,{token:e,launchInfo:s}),(null==s?void 0:s.hasEnded)&&(0,l.jsxs)("div",{className:"bg-white p-6 mt-4 shadow-sm",children:[(0,l.jsx)("h3",{className:"text-base font-medium mb-2",children:"部署子币"}),(0,l.jsx)("div",{className:"w-full text-center",children:(0,l.jsx)(k.Z,{href:"/".concat(null==e?void 0:e.symbol,"/launch/deploy"),children:(0,l.jsxs)(j.z,{size:"sm",className:"w-1/2 bg-blue-600 hover:bg-blue-700",children:[(0,l.jsx)(C.Z,{className:"w-4 h-4"}),"去部署"]})})}),(0,l.jsxs)("div",{className:"bg-gray-100 text-gray-500 rounded-lg p-4 text-sm mt-4",children:[(0,l.jsx)("p",{className:"mb-1",children:"说明："}),(0,l.jsxs)("p",{children:["1. 部署者：须持有$",null==e?void 0:e.symbol,"不少于 0.5%的治理票"]}),(0,l.jsxs)("p",{children:["2. 子币发射目标：须筹集",(0,o.LH)(BigInt("2E+25")),"个",null==e?void 0:e.symbol]})]})]})]})]}):(0,l.jsx)("div",{className:"text-red-500",children:"找不到发射信息"})}}}]);