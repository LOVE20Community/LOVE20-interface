"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2868],{22868:function(e,n,t){var a=t(85893),s=t(67294),i=t(92321),r=t(86501),l=t(27245),d=t(92180),p=t(19638),u=t(77156),y=t(93778),o=t(91529),m=t(64777);n.Z=e=>{let{tokenBalance:n}=e,{address:t}=(0,i.m)(),{token:c}=(0,s.useContext)(y.M)||{},{totalSupply:f,isPending:b}=(0,u.A5)(null==c?void 0:c.stTokenAddress),{approve:v,isWriting:T,isConfirming:x,isConfirmed:w,writeError:g}=(0,p.yA)(null==c?void 0:c.address),{stakeToken:h,isWriting:A,isConfirming:j,isConfirmed:N,writeError:C}=(0,d.aE)(),[M,E]=(0,s.useState)(""),[k,S]=(0,s.useState)("4"),I=async()=>{if(0n===BigInt(M)){r.Am.error("请输入正确的数量");return}try{await v("0xf63D97fA996A57a78bf14839d112dd741Dc27321",(0,o.vz)(M))}catch(e){r.Am.error((null==e?void 0:e.message)||"授权失败"),console.error("Approve failed",e)}};(0,s.useEffect)(()=>{w&&r.Am.success("授权成功")},[w]);let R=async()=>{if(0n===BigInt(M)){r.Am.error("请输入正确的数量");return}try{await h(null==c?void 0:c.address,(0,o.vz)(M),BigInt(k),t)}catch(e){console.error("Stake failed",e)}};return(0,s.useEffect)(()=>{N&&(r.Am.success("质押成功"),E(""),S(""),setTimeout(()=>{window.location.reload()},2e3))},[N]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"w-full flex flex-col items-center rounded p-4 mt-1",children:[(0,a.jsx)("div",{className:"w-full text-left mb-4",children:(0,a.jsx)(m.Z,{title:"质押增加治理收益"})}),(0,a.jsxs)("form",{className:"w-full max-w-md",onSubmit:e=>e.preventDefault(),children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("label",{className:"block text-left mb-1 text-sm text-greyscale-500",children:["质押数 (当前持有数量：",(0,a.jsxs)("span",{className:"text-secondary",children:[(0,o.LH)(n)," ",null==c?void 0:c.symbol]}),")"]}),(0,a.jsx)("input",{type:"number",placeholder:"输入 ".concat(null==c?void 0:c.symbol," 数量"),value:M,onChange:e=>{E(e.target.value)},className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-left mb-1 text-sm text-greyscale-500",children:"释放期"}),(0,a.jsx)("select",{value:k,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring",required:!0,children:Array.from({length:9},(e,n)=>(0,a.jsx)("option",{value:n+4,children:n+4},n+4))})]}),(0,a.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,a.jsx)(l.z,{className:"w-1/2",disabled:T||x||w,onClick:I,children:T||x?"授权中...":w?"1.已授权":"1.授权"}),(0,a.jsx)(l.z,{className:"w-1/2",disabled:!w||A||j,onClick:R,children:A||j?"质押中...":"2.质押"})]})]}),C&&(0,a.jsx)("div",{className:"text-red-500",children:C.message}),g&&(0,a.jsx)("div",{className:"text-red-500",children:g.message})]})})}},77156:function(e,n,t){t.d(n,{A5:function(){return i}});var a=t(89810);let s=[{type:"constructor",inputs:[{name:"mintableAddress_",type:"address",internalType:"address"},{name:"tokenAddress_",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"function",name:"allowance",inputs:[{name:"owner",type:"address",internalType:"address"},{name:"spender",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"approve",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"burn",inputs:[{name:"to",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"decimals",inputs:[],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{type:"function",name:"mint",inputs:[{name:"to",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"mintableAddress",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"name",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"reserve",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"symbol",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"tokenAddress",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"transfer",inputs:[{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"event",name:"Approval",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"},{name:"spender",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"error",name:"ERC20InsufficientAllowance",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"allowance",type:"uint256",internalType:"uint256"},{name:"needed",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ERC20InsufficientBalance",inputs:[{name:"sender",type:"address",internalType:"address"},{name:"balance",type:"uint256",internalType:"uint256"},{name:"needed",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ERC20InvalidApprover",inputs:[{name:"approver",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidReceiver",inputs:[{name:"receiver",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidSender",inputs:[{name:"sender",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidSpender",inputs:[{name:"spender",type:"address",internalType:"address"}]}],i=e=>{let{data:n,isPending:t,error:i}=(0,a.u)({address:e,abi:s,functionName:"totalSupply",args:[]});return{totalSupply:n,isPending:t,error:i}}}}]);